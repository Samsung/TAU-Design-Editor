!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TComm=t():e.TComm=t()}(global,function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=22)}([function(e,t,s){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t,s){"use strict";const i=s(17),r=s(16),n=s(2),o=s(0),a=Buffer.from([0,0,255,255]),h=Buffer.from([0]),c=Symbol("permessage-deflate"),l=Symbol("write-in-progress"),f=Symbol("pending-close"),d=Symbol("total-length"),u=Symbol("callback"),_=Symbol("buffers"),p=Symbol("error");let m;function g(e){this[_].push(e),this[d]+=e.length}function v(e){this[d]+=e.length,this[c]._maxPayload<1||this[d]<=this[c]._maxPayload?this[_].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p][o.kStatusCode]=1009,this.removeListener("data",v),this.reset())}function y(e){this[c]._inflate=null,e[o.kStatusCode]=1007,this[u](e)}e.exports=class{constructor(e,t,s){if(this._maxPayload=0|s,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!m){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;m=new i({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate[l]?this._inflate[f]=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate[l]?this._deflate[f]=!0:(this._deflate.close(),this._deflate=null))}acceptAsServer(e){const t=this._options,s=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!s)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(s.server_no_context_takeover=!0),t.clientNoContextTakeover&&(s.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(s.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?s.client_max_window_bits=t.clientMaxWindowBits:!0!==s.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete s.client_max_window_bits,s}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var s=e[t];if(s.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(s=s[0],"client_max_window_bits"===t){if(!0!==s){const e=+s;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${s}`)}else if("server_max_window_bits"===t){const e=+s;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==s)throw new TypeError(`Invalid value for parameter "${t}": ${s}`)}e[t]=s})}),e}decompress(e,t,s){m.push(i=>{this._decompress(e,t,(e,t)=>{i(),s(e,t)})})}compress(e,t,s){m.push(i=>{this._compress(e,t,(e,t)=>{i(),s(e,t)})})}_decompress(e,t,s){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=r.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[c]=this,this._inflate[d]=0,this._inflate[_]=[],this._inflate.on("error",y),this._inflate.on("data",v)}this._inflate[u]=s,this._inflate[l]=!0,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush(()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void s(e);const r=n.concat(this._inflate[_],this._inflate[d]);t&&this.params[`${i}_no_context_takeover`]||this._inflate[f]?(this._inflate.close(),this._inflate=null):(this._inflate[l]=!1,this._inflate[d]=0,this._inflate[_]=[]),s(null,r)})}_compress(e,t,s){if(!e||0===e.length)return void process.nextTick(s,null,h);const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=r.createDeflateRaw(Object.assign({memLevel:this._options.memLevel,level:this._options.level},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[d]=0,this._deflate[_]=[],this._deflate.on("data",g)}this._deflate[l]=!0,this._deflate.write(e),this._deflate.flush(r.Z_SYNC_FLUSH,()=>{var e=n.concat(this._deflate[_],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${i}_no_context_takeover`]||this._deflate[f]?(this._deflate.close(),this._deflate=null):(this._deflate[l]=!1,this._deflate[d]=0,this._deflate[_]=[]),s(null,e)})}}},function(e,t,s){"use strict";function i(e,t){const s=Buffer.allocUnsafe(t);for(var i=0,r=0;r<e.length;r++){const t=e[r];t.copy(s,i),i+=t.length}return s}function r(e,t,s,i,r){for(var n=0;n<r;n++)s[i+n]=e[n]^t[3&n]}function n(e,t){const s=e.length;for(var i=0;i<s;i++)e[i]^=t[3&i]}try{const t=s(!function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()),o=t.BufferUtil||t;e.exports={mask(e,t,s,i,n){n<48?r(e,t,s,i,n):o.mask(e,t,s,i,n)},unmask(e,t){e.length<32?n(e,t):o.unmask(e,t)},concat:i}}catch(t){e.exports={concat:i,mask:r,unmask:n}}},function(e,t){e.exports=require("crypto")},function(e,t,s){"use strict";const i=s(12);i.Server=s(13),i.Receiver=s(8),i.Sender=s(6),e.exports=i},function(e,t){e.exports=require("events")},function(e,t,s){"use strict";const i=s(3),r=s(1),n=s(2),o=s(7),a=s(0);class h{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const s=e.length<1024||t.mask&&t.readOnly;var r=t.mask?6:2,o=e.length;e.length>=65536?(r+=8,o=127):e.length>125&&(r+=2,o=126);const a=Buffer.allocUnsafe(s?e.length+r:r);if(a[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(a[0]|=64),126===o?a.writeUInt16BE(e.length,2):127===o&&(a.writeUInt32BE(0,2),a.writeUInt32BE(e.length,6)),!t.mask)return a[1]=o,s?(e.copy(a,r),[a]):[a,e];const h=i.randomBytes(4);return a[1]=128|o,a[r-4]=h[0],a[r-3]=h[1],a[r-2]=h[2],a[r-1]=h[3],s?(n.mask(e,h,a,r,e.length),[a]):(n.mask(e,h,e,0,e.length),[a,e])}close(e,t,s,i){var r;if(void 0===e)r=a.EMPTY_BUFFER;else{if("number"!=typeof e||!o.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(r=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((r=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),r.write(t,2))}this._deflating?this.enqueue([this.doClose,r,s,i]):this.doClose(r,s,i)}doClose(e,t,s){this.sendFrame(h.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),s)}ping(e,t,s){var i=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=c(e):(e=Buffer.from(e),i=!1)),this._deflating?this.enqueue([this.doPing,e,t,i,s]):this.doPing(e,t,i,s)}doPing(e,t,s,i){this.sendFrame(h.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:s}),i)}pong(e,t,s){var i=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=c(e):(e=Buffer.from(e),i=!1)),this._deflating?this.enqueue([this.doPong,e,t,i,s]):this.doPong(e,t,i,s)}doPong(e,t,s,i){this.sendFrame(h.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:s}),i)}send(e,t,s){var i=t.binary?2:1,n=t.compress,o=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=c(e):(e=Buffer.from(e),o=!1));const a=this._extensions[r.extensionName];if(this._firstFragment?(this._firstFragment=!1,n&&a&&(n=e.length>=a._threshold),this._compress=n):(n=!1,i=0),t.fin&&(this._firstFragment=!0),a){const r={fin:t.fin,rsv1:n,opcode:i,mask:t.mask,readOnly:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,r,s]):this.dispatch(e,this._compress,r,s)}else this.sendFrame(h.frame(e,{fin:t.fin,rsv1:!1,opcode:i,mask:t.mask,readOnly:o}),s)}dispatch(e,t,s,i){if(!t)return void this.sendFrame(h.frame(e,s),i);const n=this._extensions[r.extensionName];this._deflating=!0,n.compress(e,s.fin,(e,t)=>{s.readOnly=!1,this.sendFrame(h.frame(t,s),i),this._deflating=!1,this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function c(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}e.exports=h},function(e,t,s){"use strict";try{const e=s(!function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}());t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=(()=>!0)}t.isValidStatusCode=(e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999)},function(e,t,s){"use strict";const i=s(14),r=s(1),n=s(2),o=s(7),a=s(0),h=0,c=1,l=2,f=3,d=4,u=5;function _(e,t,s,i){const r=new e(s?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(r,_),r[a.kStatusCode]=i,r}function p(e,t){return 1===e.length?e[0]:e.length>1?n.concat(e,t):a.EMPTY_BUFFER}e.exports=class extends i.Writable{constructor(e,t,s){super(),this._binaryType=e||a.BINARY_TYPES[0],this[a.kWebSocket]=void 0,this._extensions=t||{},this._maxPayload=0|s,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=h,this._loop=!1}_write(e,t,s){if(8===this._opcode)return s();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(s)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const s=this._buffers[0];e>=s.length?this._buffers.shift().copy(t,t.length-e):(s.copy(t,t.length-e,0,e),this._buffers[0]=s.slice(e)),e-=s.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case h:t=this.getInfo();break;case c:t=this.getPayloadLength16();break;case l:t=this.getPayloadLength64();break;case f:this.getMask();break;case d:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,_(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[r.extensionName])return this._loop=!1,_(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,_(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,_(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,_(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,_(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,_(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,_(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,_(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=c;else{if(127!==this._payloadLength)return this.haveLength();this._state=l}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,_(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,_(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=f:this._state=d}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=d)}getData(e){var t=a.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&n.unmask(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=u,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[r.extensionName].decompress(e,this._fin,(e,s)=>{if(e)return t(e);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(_(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(s)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)})}dataMessage(){if(this._fin){const s=this._messageLength,i=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?p(i,s):"arraybuffer"===this._binaryType?0===(t=p(i,s)).byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):i,this.emit("message",e)}else{const e=p(i,s);if(!o.isValidUTF8(e))return this._loop=!1,_(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}var t;this._state=h}controlMessage(e){if(8!==this._opcode)9===this._opcode?this.emit("ping",e):this.emit("pong",e),this._state=h;else if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return _(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!o.isValidStatusCode(t))return _(RangeError,`invalid status code ${t}`,!0,1002);const s=e.slice(2);if(!o.isValidUTF8(s))return _(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,s.toString()),this.end()}}}}},function(e,t,s){"use strict";const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,s){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(s):e[t]=[s]}e.exports={format:function(e){return Object.keys(e).map(t=>{var s=e[t];return Array.isArray(s)||(s=[s]),s.map(e=>[t].concat(Object.keys(e).map(t=>{var s=e[t];return Array.isArray(s)||(s=[s]),s.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t={};if(void 0===e||""===e)return t;for(var s,n,o={},a=!1,h=!1,c=!1,l=-1,f=-1,d=0;d<e.length;d++){const _=e.charCodeAt(d);if(void 0===s)if(-1===f&&1===i[_])-1===l&&(l=d);else if(32===_||9===_)-1===f&&-1!==l&&(f=d);else{if(59!==_&&44!==_)throw new SyntaxError(`Unexpected character at index ${d}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d);const i=e.slice(l,f);44===_?(r(t,i,o),o={}):s=i,l=f=-1}}else if(void 0===n)if(-1===f&&1===i[_])-1===l&&(l=d);else if(32===_||9===_)-1===f&&-1!==l&&(f=d);else if(59===_||44===_){if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d),r(o,e.slice(l,f),!0),44===_&&(r(t,s,o),o={},s=void 0),l=f=-1}else{if(61!==_||-1===l||-1!==f)throw new SyntaxError(`Unexpected character at index ${d}`);n=e.slice(l,d),l=f=-1}else if(h){if(1!==i[_])throw new SyntaxError(`Unexpected character at index ${d}`);-1===l?l=d:a||(a=!0),h=!1}else if(c)if(1===i[_])-1===l&&(l=d);else if(34===_&&-1!==l)c=!1,f=d;else{if(92!==_)throw new SyntaxError(`Unexpected character at index ${d}`);h=!0}else if(34===_&&61===e.charCodeAt(d-1))c=!0;else if(-1===f&&1===i[_])-1===l&&(l=d);else if(-1===l||32!==_&&9!==_){if(59!==_&&44!==_)throw new SyntaxError(`Unexpected character at index ${d}`);if(-1===l)throw new SyntaxError(`Unexpected character at index ${d}`);-1===f&&(f=d);var u=e.slice(l,f);a&&(u=u.replace(/\\/g,""),a=!1),r(o,n,u),44===_&&(r(t,s,o),o={},s=void 0),n=void 0,l=f=-1}else-1===f&&(f=d)}if(-1===l||c)throw new SyntaxError("Unexpected end of input");-1===f&&(f=d);const _=e.slice(l,f);return void 0===s?r(t,_,{}):(void 0===n?r(o,_,!0):r(o,n,a?_.replace(/\\/g,""):_),r(t,s,o)),t}}},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("http")},function(e,t,s){"use strict";const i=s(5),r=s(3),n=s(20),o=s(11),a=s(19),h=s(18),c=s(10),l=s(1),f=s(15),d=s(9),u=s(0),_=s(8),p=s(6),m=["CONNECTING","OPEN","CLOSING","CLOSED"],g=u.kWebSocket,v=[8,13],y=3e4;class b extends i{constructor(e,t,s){super(),this.readyState=b.CONNECTING,this.protocol="",this._binaryType=u.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(s=t,t=void 0),function(e,t,s){if(s=Object.assign({protocolVersion:v[1],perMessageDeflate:!0},s,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),-1===v.indexOf(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} `+`(supported versions: ${v.join(", ")})`);var i;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(i=e,this.url=e.href):(i=c.parse(e),this.url=e);const a="ws+unix:"===i.protocol;if(!(i.host||a&&i.pathname))throw new Error(`Invalid URL: ${this.url}`);const h="wss:"===i.protocol||"https:"===i.protocol,f=r.randomBytes(16).toString("base64"),_=h?n:o,p=i.search?`${i.pathname||"/"}${i.search}`:i.pathname||"/";var m;s.createConnection=h?S:w,s.port=i.port||(h?443:80),s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers=Object.assign({"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"},s.headers),s.path=p,s.perMessageDeflate&&(m=new l(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1),s.headers["Sec-WebSocket-Extensions"]=d.format({[l.extensionName]:m.offer()}));t&&(s.headers["Sec-WebSocket-Protocol"]=t);s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin);i.auth?s.auth=i.auth:(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`);if(a){const e=p.split(":");null==s.agent&&process.versions.modules<57?s._socketPath=e[0]:s.socketPath=e[0],s.path=e[1]}var g=this._req=_.get(s);s.handshakeTimeout&&g.setTimeout(s.handshakeTimeout,()=>x(this,g,"Opening handshake has timed out"));g.on("error",e=>{this._req.aborted||(g=this._req=null,this.readyState=b.CLOSING,this.emit("error",e),this.emitClose())}),g.on("response",e=>{this.emit("unexpected-response",g,e)||x(this,g,`Unexpected server response: ${e.statusCode}`)}),g.on("upgrade",(e,s,i)=>{if(this.emit("upgrade",e),this.readyState!==b.CONNECTING)return;g=this._req=null;const n=r.createHash("sha1").update(f+u.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==n)return void x(this,s,"Invalid Sec-WebSocket-Accept header");const o=e.headers["sec-websocket-protocol"],a=(t||"").split(/, */);var h;if(!t&&o?h="Server sent a subprotocol but none was requested":t&&!o?h="Server sent no subprotocol":o&&-1===a.indexOf(o)&&(h="Server sent an invalid subprotocol"),h)x(this,s,h);else{if(o&&(this.protocol=o),m)try{const t=d.parse(e.headers["sec-websocket-extensions"]);t[l.extensionName]&&(m.accept(t[l.extensionName]),this._extensions[l.extensionName]=m)}catch(e){return void x(this,s,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(s,i,0)}})}.call(this,e,t,s))}get CONNECTING(){return b.CONNECTING}get CLOSING(){return b.CLOSING}get CLOSED(){return b.CLOSED}get OPEN(){return b.OPEN}get binaryType(){return this._binaryType}set binaryType(e){u.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,s){const i=new _(this._binaryType,this._extensions,s);this._sender=new p(e,this._extensions),this._receiver=i,this._socket=e,i[g]=this,e[g]=this,i.on("conclude",k),i.on("drain",E),i.on("error",O),i.on("message",L),i.on("ping",T),i.on("pong",B),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",N),e.on("data",P),e.on("end",U),e.on("error",M),this.readyState=b.OPEN,this.emit("open")}emitClose(){this.readyState=b.CLOSED,this._socket?(this._extensions[l.extensionName]&&this._extensions[l.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==b.CLOSED){if(this.readyState===b.CONNECTING){const e="WebSocket was closed before the connection was established";return x(this,this._req,e)}this.readyState!==b.CLOSING?(this.readyState=b.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),y)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,s){if("function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),this.readyState!==b.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${m[this.readyState]})`);if(s)return s(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||u.EMPTY_BUFFER,t,s)}pong(e,t,s){if("function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),this.readyState!==b.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${m[this.readyState]})`);if(s)return s(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||u.EMPTY_BUFFER,t,s)}send(e,t,s){if("function"==typeof t&&(s=t,t={}),this.readyState!==b.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${m[this.readyState]})`);if(s)return s(e);throw e}"number"==typeof e&&(e=e.toString());const i=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[l.extensionName]||(i.compress=!1),this._sender.send(e||u.EMPTY_BUFFER,i,s)}terminate(){if(this.readyState!==b.CLOSED){if(this.readyState===b.CONNECTING){const e="WebSocket was closed before the connection was established";return x(this,this._req,e)}this._socket&&(this.readyState=b.CLOSING,this._socket.destroy())}}}function w(e){return e.path=e.socketPath||e._socketPath||void 0,a.connect(e)}function S(e){return e.path=e.socketPath||e._socketPath||void 0,e.servername=e.servername||e.host,h.connect(e)}function x(e,t,s){e.readyState=b.CLOSING;const i=new Error(s);Error.captureStackTrace(i,x),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function k(e,t){const s=this[g];s._socket.removeListener("data",P),s._socket.resume(),s._closeFrameReceived=!0,s._closeMessage=t,s._closeCode=e,1005===e?s.close():s.close(e,t)}function E(){this[g]._socket.resume()}function O(e){const t=this[g];t.readyState=b.CLOSING,t._closeCode=e[u.kStatusCode],t.emit("error",e),t._socket.destroy()}function C(){this[g].emitClose()}function L(e){this[g].emit("message",e)}function T(e){const t=this[g];t.pong(e,!t._isServer,u.NOOP),t.emit("ping",e)}function B(e){this[g].emit("pong",e)}function N(){const e=this[g];this.removeListener("close",N),this.removeListener("data",P),this.removeListener("end",U),this[g]=void 0,e.readyState=b.CLOSING,e._socket.read(),e._receiver.end(),clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",C),e._receiver.on("finish",C))}function P(e){this[g]._receiver.write(e)||this.pause()}function U(){const e=this[g];e.readyState=b.CLOSING,e._receiver.end(),this.end()}function M(){const e=this[g];this.removeListener("error",M),this.on("error",u.NOOP),e&&(e.readyState=b.CLOSING,this.destroy())}m.forEach((e,t)=>{b[m[t]]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(b.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var s=0;s<t.length;s++)if(t[s]._listener)return t[s]._listener},set(t){const s=this.listeners(e);for(var i=0;i<s.length;i++)s[i]._listener&&this.removeListener(e,s[i]);this.addEventListener(e,t)}})}),b.prototype.addEventListener=f.addEventListener,b.prototype.removeEventListener=f.removeEventListener,e.exports=b},function(e,t,s){"use strict";const i=s(5),r=s(3),n=s(11),o=s(10),a=s(1),h=s(9),c=s(0),l=s(12);function f(){this.destroy()}function d(e,t,s,i){e.writable&&(s=s||n.STATUS_CODES[t],i=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(s)},i),e.write(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+s)),e.removeListener("error",f),e.destroy()}e.exports=class extends i{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=n.createServer((e,t)=>{const s=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),t.end(s)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const s of Object.keys(t))e.on(s,t[s]);return function(){for(const s of Object.keys(t))e.removeListener(s,t[s])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,s)=>{this.handleUpgrade(e,t,s,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port))return t.close(e);e&&e()}shouldHandle(e){return!this.options.path||o.parse(e.url).pathname===this.options.path}handleUpgrade(e,t,s,i){t.on("error",f);const r=+e.headers["sec-websocket-version"],n={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==r&&13!==r||!this.shouldHandle(e))return d(t,400);if(this.options.perMessageDeflate){const s=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const i=h.parse(e.headers["sec-websocket-extensions"]);i[a.extensionName]&&(s.accept(i[a.extensionName]),n[a.extensionName]=s)}catch(e){return d(t,400)}}if(this.options.verifyClient){const o={origin:e.headers[`${8===r?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,(r,o,a,h)=>{if(!r)return d(t,o||401,a,h);this.completeUpgrade(n,e,t,s,i)});if(!this.options.verifyClient(o))return d(t,401)}this.completeUpgrade(n,e,t,s,i)}completeUpgrade(e,t,s,i,n){if(!s.readable||!s.writable)return s.destroy();const o=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${r.createHash("sha1").update(t.headers["sec-websocket-key"]+c.GUID,"binary").digest("base64")}`],d=new l(null);var u=t.headers["sec-websocket-protocol"];if(u&&(u=u.trim().split(/ *, */),(u=this.options.handleProtocols?this.options.handleProtocols(u,t):u[0])&&(o.push(`Sec-WebSocket-Protocol: ${u}`),d.protocol=u)),e[a.extensionName]){const t=e[a.extensionName].params,s=h.format({[a.extensionName]:[t]});o.push(`Sec-WebSocket-Extensions: ${s}`),d._extensions=e}this.emit("headers",o,t),s.write(o.concat("\r\n").join("\r\n")),s.removeListener("error",f),d.setSocket(s,i,this.options.maxPayload),this.clients&&(this.clients.add(d),d.on("close",()=>this.clients.delete(d))),n(d)}}},function(e,t){e.exports=require("stream")},function(e,t,s){"use strict";class i{constructor(e,t){this.target=t,this.type=e}}class r extends i{constructor(e,t){super("message",t),this.data=e}}class n extends i{constructor(e,t,s){super("close",s),this.wasClean=s._closeFrameReceived&&s._closeFrameSent,this.reason=t,this.code=e}}class o extends i{constructor(e){super("open",e)}}class a extends i{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const h={addEventListener(e,t){function s(e){t.call(this,new r(e,this))}function i(e,s){t.call(this,new n(e,s,this))}function h(e){t.call(this,new a(e,this))}function c(){t.call(this,new o(this))}"function"==typeof t&&("message"===e?(s._listener=t,this.on(e,s)):"close"===e?(i._listener=t,this.on(e,i)):"error"===e?(h._listener=t,this.on(e,h)):"open"===e?(c._listener=t,this.on(e,c)):this.on(e,t))},removeEventListener(e,t){const s=this.listeners(e);for(var i=0;i<s.length;i++)s[i]!==t&&s[i]._listener!==t||this.removeListener(e,s[i])}};e.exports=h},function(e,t){e.exports=require("zlib")},function(e,t,s){"use strict";function i(e){if(!(this instanceof i))return new i(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=function(){this.pending--,this._run()}.bind(this)}["push","unshift","splice"].forEach(function(e){i.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(i.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),i.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},i.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=i},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("dgram")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();var r=s(5),n=(s(21),s(4),function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.wsServer=null,e.wsPort=9581,e.wsClient=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),i(t,[{key:"startWSServer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.wsPort;return new Promise(function(i,r){var n=s(4),o=void 0;try{o=new n.Server({port:t},function(){console.log("[TAUCOMM] WebSocket server started")})}catch(e){r(e)}o.on("listening",function(){e.wsServer=o,i(e)}),o.on("error",function(e){console.error("[TAUCOMM] error",e)}),o.on("connection",function(t){t.on("message",function(t){console.log("[TAUCOMM] got message",t);var s=JSON.parse(t.toString());e.send(s.event,s.data).then(function(){console.log("[TAUCOMM] send ok")}).catch(function(e){console.error("[TAUCOMM] send error",e)})})})})}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(i,r){if(t){var n=s(4),o=void 0;try{o=new n("ws://localhost:"+e.wsPort)}catch(e){r(error)}o.on("open",function(){i(e)}),o.on("error",function(e){console.error("[TAUCOMM] error",e)}),o.on("message",function(t){var s=JSON.parse(t.toString("utf8"));e.emmit(s.event,s)}),e.wsClient=o}else e.startWSServer().then(function(t){i(e)}).catch(function(e){console.error(e)})})}},{key:"send",value:function(e,t){var s=this,i=JSON.stringify({event:e,data:t});return new Promise(function(e,t){if(s.wsClient)s.wsClient.send(i,function(i){i?t(i):e(s)});else{var r=[];s.wsServer.clients.forEach(function(e){r.push(new Promise(function(t,s){e.send(i,function(e){e?s(e):t()})}))}),Promise.all(r).then(function(){e(s)}).catch(function(e){t(e)})}})}}]),t}());t.default=n}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UQ29tbS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vVENvbW0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVENvbW0vLi9ub2RlX21vZHVsZXMvd3MvbGliL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9UQ29tbS8uL25vZGVfbW9kdWxlcy93cy9saWIvcGVybWVzc2FnZS1kZWZsYXRlLmpzIiwid2VicGFjazovL1RDb21tLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi9idWZmZXItdXRpbC5qcyIsIndlYnBhY2s6Ly9UQ29tbS9leHRlcm5hbCBcImNyeXB0b1wiIiwid2VicGFjazovL1RDb21tLy4vbm9kZV9tb2R1bGVzL3dzL2luZGV4LmpzIiwid2VicGFjazovL1RDb21tL2V4dGVybmFsIFwiZXZlbnRzXCIiLCJ3ZWJwYWNrOi8vVENvbW0vLi9ub2RlX21vZHVsZXMvd3MvbGliL3NlbmRlci5qcyIsIndlYnBhY2s6Ly9UQ29tbS8uL25vZGVfbW9kdWxlcy93cy9saWIvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9UQ29tbS8uL25vZGVfbW9kdWxlcy93cy9saWIvcmVjZWl2ZXIuanMiLCJ3ZWJwYWNrOi8vVENvbW0vLi9ub2RlX21vZHVsZXMvd3MvbGliL2V4dGVuc2lvbi5qcyIsIndlYnBhY2s6Ly9UQ29tbS9leHRlcm5hbCBcInVybFwiIiwid2VicGFjazovL1RDb21tL2V4dGVybmFsIFwiaHR0cFwiIiwid2VicGFjazovL1RDb21tLy4vbm9kZV9tb2R1bGVzL3dzL2xpYi93ZWJzb2NrZXQuanMiLCJ3ZWJwYWNrOi8vVENvbW0vLi9ub2RlX21vZHVsZXMvd3MvbGliL3dlYnNvY2tldC1zZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vVENvbW0vZXh0ZXJuYWwgXCJzdHJlYW1cIiIsIndlYnBhY2s6Ly9UQ29tbS8uL25vZGVfbW9kdWxlcy93cy9saWIvZXZlbnQtdGFyZ2V0LmpzIiwid2VicGFjazovL1RDb21tL2V4dGVybmFsIFwiemxpYlwiIiwid2VicGFjazovL1RDb21tLy4vbm9kZV9tb2R1bGVzL2FzeW5jLWxpbWl0ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vVENvbW0vZXh0ZXJuYWwgXCJ0bHNcIiIsIndlYnBhY2s6Ly9UQ29tbS9leHRlcm5hbCBcIm5ldFwiIiwid2VicGFjazovL1RDb21tL2V4dGVybmFsIFwiaHR0cHNcIiIsIndlYnBhY2s6Ly9UQ29tbS9leHRlcm5hbCBcImRncmFtXCIiLCJ3ZWJwYWNrOi8vVENvbW0vLi9zcmMvdGNvbW0tc2VydmVyLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImdsb2JhbCIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJCSU5BUllfVFlQRVMiLCJHVUlEIiwia1N0YXR1c0NvZGUiLCJrV2ViU29ja2V0IiwiRU1QVFlfQlVGRkVSIiwiQnVmZmVyIiwiYWxsb2MiLCJOT09QIiwiTGltaXRlciIsInpsaWIiLCJidWZmZXJVdGlsIiwiY29uc3RhbnRzIiwiVFJBSUxFUiIsImZyb20iLCJFTVBUWV9CTE9DSyIsImtQZXJNZXNzYWdlRGVmbGF0ZSIsImtXcml0ZUluUHJvZ3Jlc3MiLCJrUGVuZGluZ0Nsb3NlIiwia1RvdGFsTGVuZ3RoIiwia0NhbGxiYWNrIiwia0J1ZmZlcnMiLCJrRXJyb3IiLCJ6bGliTGltaXRlciIsImRlZmxhdGVPbkRhdGEiLCJjaHVuayIsInRoaXMiLCJwdXNoIiwibGVuZ3RoIiwiaW5mbGF0ZU9uRGF0YSIsIl9tYXhQYXlsb2FkIiwiUmFuZ2VFcnJvciIsInJlbW92ZUxpc3RlbmVyIiwicmVzZXQiLCJpbmZsYXRlT25FcnJvciIsImVyciIsIl9pbmZsYXRlIiwiW29iamVjdCBPYmplY3RdIiwib3B0aW9ucyIsImlzU2VydmVyIiwibWF4UGF5bG9hZCIsIl9vcHRpb25zIiwiX3RocmVzaG9sZCIsInVuZGVmaW5lZCIsInRocmVzaG9sZCIsIl9pc1NlcnZlciIsIl9kZWZsYXRlIiwicGFyYW1zIiwiY29uY3VycmVuY3kiLCJjb25jdXJyZW5jeUxpbWl0IiwiZXh0ZW5zaW9uTmFtZSIsInNlcnZlck5vQ29udGV4dFRha2VvdmVyIiwic2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIiLCJjbGllbnROb0NvbnRleHRUYWtlb3ZlciIsImNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyIiwic2VydmVyTWF4V2luZG93Qml0cyIsInNlcnZlcl9tYXhfd2luZG93X2JpdHMiLCJjbGllbnRNYXhXaW5kb3dCaXRzIiwiY2xpZW50X21heF93aW5kb3dfYml0cyIsImNvbmZpZ3VyYXRpb25zIiwibm9ybWFsaXplUGFyYW1zIiwiYWNjZXB0QXNTZXJ2ZXIiLCJhY2NlcHRBc0NsaWVudCIsImNsb3NlIiwib2ZmZXJzIiwib3B0cyIsImFjY2VwdGVkIiwiZmluZCIsIkVycm9yIiwicmVzcG9uc2UiLCJmb3JFYWNoIiwia2V5cyIsIm51bSIsIk51bWJlciIsImlzSW50ZWdlciIsIlR5cGVFcnJvciIsImRhdGEiLCJmaW4iLCJjYWxsYmFjayIsImRvbmUiLCJfZGVjb21wcmVzcyIsInJlc3VsdCIsIl9jb21wcmVzcyIsImVuZHBvaW50Iiwid2luZG93Qml0cyIsIlpfREVGQVVMVF9XSU5ET1dCSVRTIiwiY3JlYXRlSW5mbGF0ZVJhdyIsImFzc2lnbiIsInpsaWJJbmZsYXRlT3B0aW9ucyIsIm9uIiwid3JpdGUiLCJmbHVzaCIsImNvbmNhdCIsInByb2Nlc3MiLCJuZXh0VGljayIsImNyZWF0ZURlZmxhdGVSYXciLCJtZW1MZXZlbCIsImxldmVsIiwiemxpYkRlZmxhdGVPcHRpb25zIiwiWl9TWU5DX0ZMVVNIIiwic2xpY2UiLCJsaXN0IiwidG90YWxMZW5ndGgiLCJ0YXJnZXQiLCJhbGxvY1Vuc2FmZSIsIm9mZnNldCIsImJ1ZiIsImNvcHkiLCJfbWFzayIsInNvdXJjZSIsIm1hc2siLCJvdXRwdXQiLCJfdW5tYXNrIiwiYnVmZmVyIiwiZSIsImNvZGUiLCJidSIsIkJ1ZmZlclV0aWwiLCJ1bm1hc2siLCJyZXF1aXJlIiwiV2ViU29ja2V0IiwiU2VydmVyIiwiUmVjZWl2ZXIiLCJTZW5kZXIiLCJjcnlwdG8iLCJQZXJNZXNzYWdlRGVmbGF0ZSIsInZhbGlkYXRpb24iLCJzb2NrZXQiLCJleHRlbnNpb25zIiwiX2V4dGVuc2lvbnMiLCJfc29ja2V0IiwiX2ZpcnN0RnJhZ21lbnQiLCJfYnVmZmVyZWRCeXRlcyIsIl9kZWZsYXRpbmciLCJfcXVldWUiLCJtZXJnZSIsInJlYWRPbmx5IiwicGF5bG9hZExlbmd0aCIsIm9wY29kZSIsInJzdjEiLCJ3cml0ZVVJbnQxNkJFIiwid3JpdGVVSW50MzJCRSIsInJhbmRvbUJ5dGVzIiwiY2IiLCJpc1ZhbGlkU3RhdHVzQ29kZSIsImJ5dGVMZW5ndGgiLCJlbnF1ZXVlIiwiZG9DbG9zZSIsInNlbmRGcmFtZSIsImZyYW1lIiwiaXNCdWZmZXIiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsInZpZXdUb0J1ZmZlciIsImRvUGluZyIsImRvUG9uZyIsImJpbmFyeSIsImNvbXByZXNzIiwicGVyTWVzc2FnZURlZmxhdGUiLCJkaXNwYXRjaCIsIl8iLCJkZXF1ZXVlIiwic2hpZnQiLCJhcHBseSIsInZpZXciLCJieXRlT2Zmc2V0IiwiaXNWYWxpZFVURjgiLCJWYWxpZGF0aW9uIiwic3RyZWFtIiwiR0VUX0lORk8iLCJHRVRfUEFZTE9BRF9MRU5HVEhfMTYiLCJHRVRfUEFZTE9BRF9MRU5HVEhfNjQiLCJHRVRfTUFTSyIsIkdFVF9EQVRBIiwiSU5GTEFUSU5HIiwiZXJyb3IiLCJFcnJvckN0b3IiLCJtZXNzYWdlIiwicHJlZml4Iiwic3RhdHVzQ29kZSIsImNhcHR1cmVTdGFja1RyYWNlIiwidG9CdWZmZXIiLCJmcmFnbWVudHMiLCJtZXNzYWdlTGVuZ3RoIiwiV3JpdGFibGUiLCJiaW5hcnlUeXBlIiwic3VwZXIiLCJfYmluYXJ5VHlwZSIsIl9idWZmZXJzIiwiX2NvbXByZXNzZWQiLCJfcGF5bG9hZExlbmd0aCIsIl9mcmFnbWVudGVkIiwiX21hc2tlZCIsIl9maW4iLCJfb3Bjb2RlIiwiX3RvdGFsUGF5bG9hZExlbmd0aCIsIl9tZXNzYWdlTGVuZ3RoIiwiX2ZyYWdtZW50cyIsIl9zdGF0ZSIsIl9sb29wIiwiZW5jb2RpbmciLCJzdGFydExvb3AiLCJkc3QiLCJnZXRJbmZvIiwiZ2V0UGF5bG9hZExlbmd0aDE2IiwiZ2V0UGF5bG9hZExlbmd0aDY0IiwiZ2V0TWFzayIsImdldERhdGEiLCJjb25zdW1lIiwiY29tcHJlc3NlZCIsImhhdmVMZW5ndGgiLCJyZWFkVUludDE2QkUiLCJyZWFkVUludDMyQkUiLCJNYXRoIiwicG93IiwiY29udHJvbE1lc3NhZ2UiLCJkZWNvbXByZXNzIiwiZGF0YU1lc3NhZ2UiLCJlciIsImVtaXQiLCJ0b1N0cmluZyIsImVuZCIsInRva2VuQ2hhcnMiLCJkZXN0IiwiZWxlbSIsImZvcm1hdCIsIm1hcCIsImV4dGVuc2lvbiIsIkFycmF5IiwiaXNBcnJheSIsImsiLCJ2YWx1ZXMiLCJ2Iiwiam9pbiIsInBhcnNlIiwiaGVhZGVyIiwicGFyYW1OYW1lIiwibXVzdFVuZXNjYXBlIiwiaXNFc2NhcGluZyIsImluUXVvdGVzIiwic3RhcnQiLCJjaGFyQ29kZUF0IiwiU3ludGF4RXJyb3IiLCJyZXBsYWNlIiwidG9rZW4iLCJFdmVudEVtaXR0ZXIiLCJodHRwcyIsImh0dHAiLCJuZXQiLCJ0bHMiLCJ1cmwiLCJFdmVudFRhcmdldCIsInJlYWR5U3RhdGVzIiwicHJvdG9jb2xWZXJzaW9ucyIsImNsb3NlVGltZW91dCIsImFkZHJlc3MiLCJwcm90b2NvbHMiLCJyZWFkeVN0YXRlIiwiQ09OTkVDVElORyIsInByb3RvY29sIiwiX2Nsb3NlRnJhbWVSZWNlaXZlZCIsIl9jbG9zZUZyYW1lU2VudCIsIl9jbG9zZU1lc3NhZ2UiLCJfY2xvc2VUaW1lciIsIl9jbG9zZUNvZGUiLCJfcmVjZWl2ZXIiLCJfc2VuZGVyIiwicHJvdG9jb2xWZXJzaW9uIiwiY3JlYXRlQ29ubmVjdGlvbiIsInNvY2tldFBhdGgiLCJob3N0bmFtZSIsInRpbWVvdXQiLCJtZXRob2QiLCJhdXRoIiwiaG9zdCIsInBhdGgiLCJwb3J0IiwiaW5kZXhPZiIsInBhcnNlZFVybCIsImhyZWYiLCJpc1VuaXhTb2NrZXQiLCJwYXRobmFtZSIsImlzU2VjdXJlIiwiaHR0cE9iaiIsInNlYXJjaCIsInRsc0Nvbm5lY3QiLCJuZXRDb25uZWN0Iiwic3RhcnRzV2l0aCIsImhlYWRlcnMiLCJTZWMtV2ViU29ja2V0LVZlcnNpb24iLCJTZWMtV2ViU29ja2V0LUtleSIsIkNvbm5lY3Rpb24iLCJVcGdyYWRlIiwib2ZmZXIiLCJvcmlnaW4iLCJPcmlnaW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwicGFydHMiLCJzcGxpdCIsImFnZW50IiwidmVyc2lvbnMiLCJfc29ja2V0UGF0aCIsInJlcSIsIl9yZXEiLCJoYW5kc2hha2VUaW1lb3V0Iiwic2V0VGltZW91dCIsImFib3J0SGFuZHNoYWtlIiwiYWJvcnRlZCIsIkNMT1NJTkciLCJlbWl0Q2xvc2UiLCJyZXMiLCJoZWFkIiwiZGlnZXN0IiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsInNlcnZlclByb3QiLCJwcm90TGlzdCIsInByb3RFcnJvciIsImFjY2VwdCIsInNldFNvY2tldCIsIkNMT1NFRCIsIk9QRU4iLCJ0eXBlIiwiYnVmZmVyZWRBbW91bnQiLCJidWZmZXJTaXplIiwicmVjZWl2ZXIiLCJyZWNlaXZlck9uQ29uY2x1ZGUiLCJyZWNlaXZlck9uRHJhaW4iLCJyZWNlaXZlck9uRXJyb3IiLCJyZWNlaXZlck9uTWVzc2FnZSIsInJlY2VpdmVyT25QaW5nIiwicmVjZWl2ZXJPblBvbmciLCJzZXROb0RlbGF5IiwidW5zaGlmdCIsInNvY2tldE9uQ2xvc2UiLCJzb2NrZXRPbkRhdGEiLCJzb2NrZXRPbkVuZCIsInNvY2tldE9uRXJyb3IiLCJjbGVhbnVwIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwibXNnIiwid3JpdGFibGUiLCJkZXN0cm95IiwicGluZyIsInBvbmciLCJzZW5kIiwiY29ubmVjdCIsInNlcnZlcm5hbWUiLCJ3ZWJzb2NrZXQiLCJzZXRIZWFkZXIiLCJhYm9ydCIsIm9uY2UiLCJyZWFzb24iLCJyZXN1bWUiLCJyZWNlaXZlck9uRmluaXNoIiwicmVhZCIsImNsZWFyVGltZW91dCIsIl93cml0YWJsZVN0YXRlIiwiZmluaXNoZWQiLCJlcnJvckVtaXR0ZWQiLCJwYXVzZSIsImxpc3RlbmVycyIsIl9saXN0ZW5lciIsImxpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJTVEFUVVNfQ09ERVMiLCJDb250ZW50LXR5cGUiLCJDb250ZW50LUxlbmd0aCIsImgiLCJoYW5kbGVQcm90b2NvbHMiLCJjbGllbnRUcmFja2luZyIsInZlcmlmeUNsaWVudCIsIm5vU2VydmVyIiwiYmFja2xvZyIsInNlcnZlciIsIl9zZXJ2ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJib2R5Iiwid3JpdGVIZWFkIiwiQ29udGVudC1UeXBlIiwibGlzdGVuIiwiX3JlbW92ZUxpc3RlbmVycyIsImV2ZW50IiwiYWRkTGlzdGVuZXJzIiwibGlzdGVuaW5nIiwidXBncmFkZSIsImhhbmRsZVVwZ3JhZGUiLCJ3cyIsImNsaWVudHMiLCJTZXQiLCJjbGllbnQiLCJ0ZXJtaW5hdGUiLCJ2ZXJzaW9uIiwidG9Mb3dlckNhc2UiLCJzaG91bGRIYW5kbGUiLCJpbmZvIiwic2VjdXJlIiwiY29ubmVjdGlvbiIsImF1dGhvcml6ZWQiLCJlbmNyeXB0ZWQiLCJ2ZXJpZmllZCIsImNvbXBsZXRlVXBncmFkZSIsInJlYWRhYmxlIiwidHJpbSIsImFkZCIsImRlbGV0ZSIsIkV2ZW50IiwiTWVzc2FnZUV2ZW50IiwiQ2xvc2VFdmVudCIsIndhc0NsZWFuIiwiT3BlbkV2ZW50IiwiRXJyb3JFdmVudCIsIm9uTWVzc2FnZSIsIm9uQ2xvc2UiLCJvbkVycm9yIiwib25PcGVuIiwiUXVldWUiLCJJbmZpbml0eSIsInBlbmRpbmciLCJqb2JzIiwiY2JzIiwiX2RvbmUiLCJfcnVuIiwibWV0aG9kUmVzdWx0IiwiYXJndW1lbnRzIiwiam9iIiwicG9wIiwib25Eb25lIiwiVENvbW0iLCJfY2xhc3NDYWxsQ2hlY2siLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiZ2V0UHJvdG90eXBlT2YiLCJ3c1NlcnZlciIsIndzUG9ydCIsIndzQ2xpZW50IiwiX3RoaXMyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInRoZW4iLCJjYXRjaCIsIl90aGlzMyIsImFzQ2xpZW50IiwiZW1taXQiLCJzdGFydFdTU2VydmVyIiwidGNvbW0iLCJfdGhpczQiLCJzdHJpbmdpZnkiLCJjYWxsYmFja3MiLCJhbGwiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsTUFBQUQsSUFFQUQsRUFBQSxNQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUCxRQUdBLElBQUFDLEVBQUFJLEVBQUFFLElBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVQsWUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFB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TUFBTSxrQkFBbUJBLEtBRWxDeU4sRUFBTy9TLEdBQUcsVUFBVyxTQUFDYixHQUNyQixJQUFNeVEsRUFBTXdHLEtBQUtuTixNQUFNOUosRUFBS2dKLFNBQVMsU0FDckNvTyxFQUFLRSxNQUFNN0csRUFBSTJDLE1BQU8zQyxLQUV2QjJHLEVBQUtWLFNBQVc5QyxPQUVKd0QsRUFBS0csZ0JBQ0FMLEtBQUssU0FBQ00sR0FDSFgsRUFBUU8sS0FFWEQsTUFBTSxTQUFDNVosR0FDSndaLFFBQVE1USxNQUFNNUksb0NBTWhDNlYsRUFBT3BULEdBQU0sSUFBQXlYLEVBQUEzYSxLQUNYMlQsRUFBTXdHLEtBQUtTLFdBQVd0RSxRQUFPcFQsU0FDbkMsT0FBTyxJQUFJNFcsUUFBUSxTQUFDQyxFQUFTQyxHQUM1QixHQUFJVyxFQUFLZixTQUNSZSxFQUFLZixTQUFTNUYsS0FBS0wsRUFBSyxTQUFDbFQsR0FDcEJBLEVBQ0h1WixFQUFPdlosR0FFUHNaLEVBQVFZLFNBR0osQ0FDTSxJQUFJRSxLQUNKRixFQUFLakIsU0FBUzlDLFFBQVFoVSxRQUFRLFNBQUNrVSxHQUMzQitELEVBQVU1YSxLQUFLLElBQUk2WixRQUFRLFNBQUNDLEVBQVNDLEdBQ2pDbEQsRUFBTzlDLEtBQUtMLEVBQUssU0FBQ2xULEdBQ1ZBLEVBQ0F1WixFQUFPdlosR0FFUHNaLFdBS2hCRCxRQUFRZ0IsSUFBSUQsR0FDUFQsS0FBSyxXQUNGTCxFQUFRWSxLQUVYTixNQUFNLFNBQUM1WixHQUNKdVosRUFBT3ZaLDRCQVFoQjJZIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlRDb21tXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlRDb21tXCJdID0gZmFjdG9yeSgpO1xufSkoZ2xvYmFsLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMjIpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQklOQVJZX1RZUEVTOiBbJ25vZGVidWZmZXInLCAnYXJyYXlidWZmZXInLCAnZnJhZ21lbnRzJ10sXG4gIEdVSUQ6ICcyNThFQUZBNS1FOTE0LTQ3REEtOTVDQS1DNUFCMERDODVCMTEnLFxuICBrU3RhdHVzQ29kZTogU3ltYm9sKCdzdGF0dXMtY29kZScpLFxuICBrV2ViU29ja2V0OiBTeW1ib2woJ3dlYnNvY2tldCcpLFxuICBFTVBUWV9CVUZGRVI6IEJ1ZmZlci5hbGxvYygwKSxcbiAgTk9PUDogKCkgPT4ge31cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IExpbWl0ZXIgPSByZXF1aXJlKCdhc3luYy1saW1pdGVyJyk7XG5jb25zdCB6bGliID0gcmVxdWlyZSgnemxpYicpO1xuXG5jb25zdCBidWZmZXJVdGlsID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuY29uc3QgY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuY29uc3QgVFJBSUxFUiA9IEJ1ZmZlci5mcm9tKFsweDAwLCAweDAwLCAweGZmLCAweGZmXSk7XG5jb25zdCBFTVBUWV9CTE9DSyA9IEJ1ZmZlci5mcm9tKFsweDAwXSk7XG5cbmNvbnN0IGtQZXJNZXNzYWdlRGVmbGF0ZSA9IFN5bWJvbCgncGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBrV3JpdGVJblByb2dyZXNzID0gU3ltYm9sKCd3cml0ZS1pbi1wcm9ncmVzcycpO1xuY29uc3Qga1BlbmRpbmdDbG9zZSA9IFN5bWJvbCgncGVuZGluZy1jbG9zZScpO1xuY29uc3Qga1RvdGFsTGVuZ3RoID0gU3ltYm9sKCd0b3RhbC1sZW5ndGgnKTtcbmNvbnN0IGtDYWxsYmFjayA9IFN5bWJvbCgnY2FsbGJhY2snKTtcbmNvbnN0IGtCdWZmZXJzID0gU3ltYm9sKCdidWZmZXJzJyk7XG5jb25zdCBrRXJyb3IgPSBTeW1ib2woJ2Vycm9yJyk7XG5cbi8vXG4vLyBXZSBsaW1pdCB6bGliIGNvbmN1cnJlbmN5LCB3aGljaCBwcmV2ZW50cyBzZXZlcmUgbWVtb3J5IGZyYWdtZW50YXRpb25cbi8vIGFzIGRvY3VtZW50ZWQgaW4gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2lzc3Vlcy84ODcxI2lzc3VlY29tbWVudC0yNTA5MTU5MTNcbi8vIGFuZCBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9pc3N1ZXMvMTIwMlxuLy9cbi8vIEludGVudGlvbmFsbHkgZ2xvYmFsOyBpdCdzIHRoZSBnbG9iYWwgdGhyZWFkIHBvb2wgdGhhdCdzIGFuIGlzc3VlLlxuLy9cbmxldCB6bGliTGltaXRlcjtcblxuLyoqXG4gKiBwZXJtZXNzYWdlLWRlZmxhdGUgaW1wbGVtZW50YXRpb24uXG4gKi9cbmNsYXNzIFBlck1lc3NhZ2VEZWZsYXRlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBQZXJNZXNzYWdlRGVmbGF0ZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3ZlciBSZXF1ZXN0L2FjY2VwdCBkaXNhYmxpbmdcbiAgICogICAgIG9mIHNlcnZlciBjb250ZXh0IHRha2VvdmVyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5jbGllbnROb0NvbnRleHRUYWtlb3ZlciBBZHZlcnRpc2UvYWNrbm93bGVkZ2VcbiAgICogICAgIGRpc2FibGluZyBvZiBjbGllbnQgY29udGV4dCB0YWtlb3ZlclxuICAgKiBAcGFyYW0geyhCb29sZWFufE51bWJlcil9IG9wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cyBSZXF1ZXN0L2NvbmZpcm0gdGhlXG4gICAqICAgICB1c2Ugb2YgYSBjdXN0b20gc2VydmVyIHdpbmRvdyBzaXplXG4gICAqIEBwYXJhbSB7KEJvb2xlYW58TnVtYmVyKX0gb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzIEFkdmVydGlzZSBzdXBwb3J0XG4gICAqICAgICBmb3IsIG9yIHJlcXVlc3QsIGEgY3VzdG9tIGNsaWVudCB3aW5kb3cgc2l6ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy56bGliRGVmbGF0ZU9wdGlvbnMgT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb24gZGVmbGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy56bGliSW5mbGF0ZU9wdGlvbnMgT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb24gaW5mbGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy50aHJlc2hvbGQgU2l6ZSAoaW4gYnl0ZXMpIGJlbG93IHdoaWNoIG1lc3NhZ2VzXG4gICAqICAgICBzaG91bGQgbm90IGJlIGNvbXByZXNzZWRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMuY29uY3VycmVuY3lMaW1pdCBUaGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgY2FsbHMgdG9cbiAgICogICAgIHpsaWJcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc1NlcnZlciBDcmVhdGUgdGhlIGluc3RhbmNlIGluIGVpdGhlciBzZXJ2ZXIgb3IgY2xpZW50XG4gICAqICAgICBtb2RlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBtYXhQYXlsb2FkIFRoZSBtYXhpbXVtIGFsbG93ZWQgbWVzc2FnZSBsZW5ndGhcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zLCBpc1NlcnZlciwgbWF4UGF5bG9hZCkge1xuICAgIHRoaXMuX21heFBheWxvYWQgPSBtYXhQYXlsb2FkIHwgMDtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzLl90aHJlc2hvbGQgPSB0aGlzLl9vcHRpb25zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkXG4gICAgICA/IHRoaXMuX29wdGlvbnMudGhyZXNob2xkXG4gICAgICA6IDEwMjQ7XG4gICAgdGhpcy5faXNTZXJ2ZXIgPSAhIWlzU2VydmVyO1xuICAgIHRoaXMuX2RlZmxhdGUgPSBudWxsO1xuICAgIHRoaXMuX2luZmxhdGUgPSBudWxsO1xuXG4gICAgdGhpcy5wYXJhbXMgPSBudWxsO1xuXG4gICAgaWYgKCF6bGliTGltaXRlcikge1xuICAgICAgY29uc3QgY29uY3VycmVuY3kgPSB0aGlzLl9vcHRpb25zLmNvbmN1cnJlbmN5TGltaXQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IHRoaXMuX29wdGlvbnMuY29uY3VycmVuY3lMaW1pdFxuICAgICAgICA6IDEwO1xuICAgICAgemxpYkxpbWl0ZXIgPSBuZXcgTGltaXRlcih7IGNvbmN1cnJlbmN5IH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBleHRlbnNpb25OYW1lICgpIHtcbiAgICByZXR1cm4gJ3Blcm1lc3NhZ2UtZGVmbGF0ZSc7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBFeHRlbnNpb24gcGFyYW1ldGVyc1xuICAgKiBAcHVibGljXG4gICAqL1xuICBvZmZlciAoKSB7XG4gICAgY29uc3QgcGFyYW1zID0ge307XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgcGFyYW1zLnNlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIpIHtcbiAgICAgIHBhcmFtcy5jbGllbnRfbm9fY29udGV4dF90YWtlb3ZlciA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHMpIHtcbiAgICAgIHBhcmFtcy5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5zZXJ2ZXJNYXhXaW5kb3dCaXRzO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzKSB7XG4gICAgICBwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cyA9IHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cztcbiAgICB9IGVsc2UgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PSBudWxsKSB7XG4gICAgICBwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHQgYW4gZXh0ZW5zaW9uIG5lZ290aWF0aW9uIG9mZmVyL3Jlc3BvbnNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBjb25maWd1cmF0aW9ucyBUaGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIG9mZmVycy9yZXBvbnNlXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHVibGljXG4gICAqL1xuICBhY2NlcHQgKGNvbmZpZ3VyYXRpb25zKSB7XG4gICAgY29uZmlndXJhdGlvbnMgPSB0aGlzLm5vcm1hbGl6ZVBhcmFtcyhjb25maWd1cmF0aW9ucyk7XG5cbiAgICB0aGlzLnBhcmFtcyA9IHRoaXMuX2lzU2VydmVyXG4gICAgICA/IHRoaXMuYWNjZXB0QXNTZXJ2ZXIoY29uZmlndXJhdGlvbnMpXG4gICAgICA6IHRoaXMuYWNjZXB0QXNDbGllbnQoY29uZmlndXJhdGlvbnMpO1xuXG4gICAgcmV0dXJuIHRoaXMucGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGFsbCByZXNvdXJjZXMgdXNlZCBieSB0aGUgZXh0ZW5zaW9uLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjbGVhbnVwICgpIHtcbiAgICBpZiAodGhpcy5faW5mbGF0ZSkge1xuICAgICAgaWYgKHRoaXMuX2luZmxhdGVba1dyaXRlSW5Qcm9ncmVzc10pIHtcbiAgICAgICAgdGhpcy5faW5mbGF0ZVtrUGVuZGluZ0Nsb3NlXSA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9pbmZsYXRlLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2luZmxhdGUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fZGVmbGF0ZSkge1xuICAgICAgaWYgKHRoaXMuX2RlZmxhdGVba1dyaXRlSW5Qcm9ncmVzc10pIHtcbiAgICAgICAgdGhpcy5fZGVmbGF0ZVtrUGVuZGluZ0Nsb3NlXSA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9kZWZsYXRlLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2RlZmxhdGUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiAgQWNjZXB0IGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gb2ZmZXJzIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNjZXB0QXNTZXJ2ZXIgKG9mZmVycykge1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLl9vcHRpb25zO1xuICAgIGNvbnN0IGFjY2VwdGVkID0gb2ZmZXJzLmZpbmQoKHBhcmFtcykgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAob3B0cy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3ZlciA9PT0gZmFsc2UgJiZcbiAgICAgICAgICBwYXJhbXMuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIpIHx8XG4gICAgICAgIChwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cyAmJlxuICAgICAgICAgIChvcHRzLnNlcnZlck1heFdpbmRvd0JpdHMgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAodHlwZW9mIG9wdHMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAgICAgb3B0cy5zZXJ2ZXJNYXhXaW5kb3dCaXRzID4gcGFyYW1zLnNlcnZlcl9tYXhfd2luZG93X2JpdHMpKSkgfHxcbiAgICAgICAgKHR5cGVvZiBvcHRzLmNsaWVudE1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInICYmXG4gICAgICAgICAgIXBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICBpZiAoIWFjY2VwdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vbmUgb2YgdGhlIGV4dGVuc2lvbiBvZmZlcnMgY2FuIGJlIGFjY2VwdGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuc2VydmVyTm9Db250ZXh0VGFrZW92ZXIpIHtcbiAgICAgIGFjY2VwdGVkLnNlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9wdHMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIpIHtcbiAgICAgIGFjY2VwdGVkLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRzLnNlcnZlck1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInKSB7XG4gICAgICBhY2NlcHRlZC5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID0gb3B0cy5zZXJ2ZXJNYXhXaW5kb3dCaXRzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdHMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGFjY2VwdGVkLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPSBvcHRzLmNsaWVudE1heFdpbmRvd0JpdHM7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGFjY2VwdGVkLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPT09IHRydWUgfHxcbiAgICAgIG9wdHMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gZmFsc2VcbiAgICApIHtcbiAgICAgIGRlbGV0ZSBhY2NlcHRlZC5jbGllbnRfbWF4X3dpbmRvd19iaXRzO1xuICAgIH1cblxuICAgIHJldHVybiBhY2NlcHRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHQgdGhlIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiByZXNwb25zZS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gcmVzcG9uc2UgVGhlIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiByZXNwb25zZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEFjY2VwdGVkIGNvbmZpZ3VyYXRpb25cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFjY2VwdEFzQ2xpZW50IChyZXNwb25zZSkge1xuICAgIGNvbnN0IHBhcmFtcyA9IHJlc3BvbnNlWzBdO1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy5fb3B0aW9ucy5jbGllbnROb0NvbnRleHRUYWtlb3ZlciA9PT0gZmFsc2UgJiZcbiAgICAgIHBhcmFtcy5jbGllbnRfbm9fY29udGV4dF90YWtlb3ZlclxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIHBhcmFtZXRlciBcImNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyXCInKTtcbiAgICB9XG5cbiAgICBpZiAoIXBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHM7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gZmFsc2UgfHxcbiAgICAgICh0eXBlb2YgdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cyA+IHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cylcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1VuZXhwZWN0ZWQgb3IgaW52YWxpZCBwYXJhbWV0ZXIgXCJjbGllbnRfbWF4X3dpbmRvd19iaXRzXCInXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogTm9ybWFsaXplIHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGNvbmZpZ3VyYXRpb25zIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzL3JlcG9uc2VcbiAgICogQHJldHVybiB7QXJyYXl9IFRoZSBvZmZlcnMvcmVzcG9uc2Ugd2l0aCBub3JtYWxpemVkIHBhcmFtZXRlcnNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG5vcm1hbGl6ZVBhcmFtcyAoY29uZmlndXJhdGlvbnMpIHtcbiAgICBjb25maWd1cmF0aW9ucy5mb3JFYWNoKChwYXJhbXMpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldO1xuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXJhbWV0ZXIgXCIke2tleX1cIiBtdXN0IGhhdmUgb25seSBhIHNpbmdsZSB2YWx1ZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSB2YWx1ZVswXTtcblxuICAgICAgICBpZiAoa2V5ID09PSAnY2xpZW50X21heF93aW5kb3dfYml0cycpIHtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihudW0pIHx8IG51bSA8IDggfHwgbnVtID4gMTUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgIGBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgXCIke2tleX1cIjogJHt2YWx1ZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdzZXJ2ZXJfbWF4X3dpbmRvd19iaXRzJykge1xuICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobnVtKSB8fCBudW0gPCA4IHx8IG51bSA+IDE1KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAga2V5ID09PSAnY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXInIHx8XG4gICAgICAgICAga2V5ID09PSAnc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXInXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgYEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciBcIiR7a2V5fVwiOiAke3ZhbHVlfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJhbWV0ZXIgXCIke2tleX1cImApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmZpZ3VyYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3MgZGF0YS4gQ29uY3VycmVuY3kgbGltaXRlZCBieSBhc3luYy1saW1pdGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBDb21wcmVzc2VkIGRhdGFcbiAgICogQHBhcmFtIHtCb29sZWFufSBmaW4gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRoaXMgaXMgdGhlIGxhc3QgZnJhZ21lbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGVjb21wcmVzcyAoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIHpsaWJMaW1pdGVyLnB1c2goKGRvbmUpID0+IHtcbiAgICAgIHRoaXMuX2RlY29tcHJlc3MoZGF0YSwgZmluLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wcmVzcyBkYXRhLiBDb25jdXJyZW5jeSBsaW1pdGVkIGJ5IGFzeW5jLWxpbWl0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIERhdGEgdG8gY29tcHJlc3NcbiAgICogQHBhcmFtIHtCb29sZWFufSBmaW4gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRoaXMgaXMgdGhlIGxhc3QgZnJhZ21lbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29tcHJlc3MgKGRhdGEsIGZpbiwgY2FsbGJhY2spIHtcbiAgICB6bGliTGltaXRlci5wdXNoKChkb25lKSA9PiB7XG4gICAgICB0aGlzLl9jb21wcmVzcyhkYXRhLCBmaW4sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICBkb25lKCk7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3MgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgQ29tcHJlc3NlZCBkYXRhXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGVjb21wcmVzcyAoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnY2xpZW50JyA6ICdzZXJ2ZXInO1xuXG4gICAgaWYgKCF0aGlzLl9pbmZsYXRlKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtlbmRwb2ludH1fbWF4X3dpbmRvd19iaXRzYDtcbiAgICAgIGNvbnN0IHdpbmRvd0JpdHMgPSB0eXBlb2YgdGhpcy5wYXJhbXNba2V5XSAhPT0gJ251bWJlcidcbiAgICAgICAgPyB6bGliLlpfREVGQVVMVF9XSU5ET1dCSVRTXG4gICAgICAgIDogdGhpcy5wYXJhbXNba2V5XTtcblxuICAgICAgdGhpcy5faW5mbGF0ZSA9IHpsaWIuY3JlYXRlSW5mbGF0ZVJhdyhcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fb3B0aW9ucy56bGliSW5mbGF0ZU9wdGlvbnMsIHsgd2luZG93Qml0cyB9KVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2luZmxhdGVba1Blck1lc3NhZ2VEZWZsYXRlXSA9IHRoaXM7XG4gICAgICB0aGlzLl9pbmZsYXRlW2tUb3RhbExlbmd0aF0gPSAwO1xuICAgICAgdGhpcy5faW5mbGF0ZVtrQnVmZmVyc10gPSBbXTtcbiAgICAgIHRoaXMuX2luZmxhdGUub24oJ2Vycm9yJywgaW5mbGF0ZU9uRXJyb3IpO1xuICAgICAgdGhpcy5faW5mbGF0ZS5vbignZGF0YScsIGluZmxhdGVPbkRhdGEpO1xuICAgIH1cblxuICAgIHRoaXMuX2luZmxhdGVba0NhbGxiYWNrXSA9IGNhbGxiYWNrO1xuICAgIHRoaXMuX2luZmxhdGVba1dyaXRlSW5Qcm9ncmVzc10gPSB0cnVlO1xuXG4gICAgdGhpcy5faW5mbGF0ZS53cml0ZShkYXRhKTtcbiAgICBpZiAoZmluKSB0aGlzLl9pbmZsYXRlLndyaXRlKFRSQUlMRVIpO1xuXG4gICAgdGhpcy5faW5mbGF0ZS5mbHVzaCgoKSA9PiB7XG4gICAgICBjb25zdCBlcnIgPSB0aGlzLl9pbmZsYXRlW2tFcnJvcl07XG5cbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdGhpcy5faW5mbGF0ZS5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9pbmZsYXRlID0gbnVsbDtcbiAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYnVmZmVyVXRpbC5jb25jYXQoXG4gICAgICAgIHRoaXMuX2luZmxhdGVba0J1ZmZlcnNdLFxuICAgICAgICB0aGlzLl9pbmZsYXRlW2tUb3RhbExlbmd0aF1cbiAgICAgICk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgKGZpbiAmJiB0aGlzLnBhcmFtc1tgJHtlbmRwb2ludH1fbm9fY29udGV4dF90YWtlb3ZlcmBdKSB8fFxuICAgICAgICB0aGlzLl9pbmZsYXRlW2tQZW5kaW5nQ2xvc2VdXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5faW5mbGF0ZS5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9pbmZsYXRlID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2luZmxhdGVba1dyaXRlSW5Qcm9ncmVzc10gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faW5mbGF0ZVtrVG90YWxMZW5ndGhdID0gMDtcbiAgICAgICAgdGhpcy5faW5mbGF0ZVtrQnVmZmVyc10gPSBbXTtcbiAgICAgIH1cblxuICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHJlc3MgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgRGF0YSB0byBjb21wcmVzc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdGhpcyBpcyB0aGUgbGFzdCBmcmFnbWVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NvbXByZXNzIChkYXRhLCBmaW4sIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxiYWNrLCBudWxsLCBFTVBUWV9CTE9DSyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLl9pc1NlcnZlciA/ICdzZXJ2ZXInIDogJ2NsaWVudCc7XG5cbiAgICBpZiAoIXRoaXMuX2RlZmxhdGUpIHtcbiAgICAgIGNvbnN0IGtleSA9IGAke2VuZHBvaW50fV9tYXhfd2luZG93X2JpdHNgO1xuICAgICAgY29uc3Qgd2luZG93Qml0cyA9IHR5cGVvZiB0aGlzLnBhcmFtc1trZXldICE9PSAnbnVtYmVyJ1xuICAgICAgICA/IHpsaWIuWl9ERUZBVUxUX1dJTkRPV0JJVFNcbiAgICAgICAgOiB0aGlzLnBhcmFtc1trZXldO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlID0gemxpYi5jcmVhdGVEZWZsYXRlUmF3KFxuICAgICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIC8vIFRPRE8gZGVwcmVjYXRlIG1lbUxldmVsL2xldmVsIGFuZCByZWNvbW1lbmQgemxpYkRlZmxhdGVPcHRpb25zIGluc3RlYWRcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZW1MZXZlbDogdGhpcy5fb3B0aW9ucy5tZW1MZXZlbCxcbiAgICAgICAgICAgIGxldmVsOiB0aGlzLl9vcHRpb25zLmxldmVsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aGlzLl9vcHRpb25zLnpsaWJEZWZsYXRlT3B0aW9ucyxcbiAgICAgICAgICB7IHdpbmRvd0JpdHMgfVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlW2tUb3RhbExlbmd0aF0gPSAwO1xuICAgICAgdGhpcy5fZGVmbGF0ZVtrQnVmZmVyc10gPSBbXTtcblxuICAgICAgLy9cbiAgICAgIC8vIGB6bGliLkRlZmxhdGVSYXdgIGVtaXRzIGFuIGAnZXJyb3InYCBldmVudCBvbmx5IHdoZW4gYW4gYXR0ZW1wdCB0byB1c2VcbiAgICAgIC8vIGl0IGlzIG1hZGUgYWZ0ZXIgaXQgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQuIFRoaXMgY2Fubm90IGhhcHBlbiBoZXJlLFxuICAgICAgLy8gc28gd2Ugb25seSBhZGQgYSBsaXN0ZW5lciBmb3IgdGhlIGAnZGF0YSdgIGV2ZW50LlxuICAgICAgLy9cbiAgICAgIHRoaXMuX2RlZmxhdGUub24oJ2RhdGEnLCBkZWZsYXRlT25EYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kZWZsYXRlW2tXcml0ZUluUHJvZ3Jlc3NdID0gdHJ1ZTtcblxuICAgIHRoaXMuX2RlZmxhdGUud3JpdGUoZGF0YSk7XG4gICAgdGhpcy5fZGVmbGF0ZS5mbHVzaCh6bGliLlpfU1lOQ19GTFVTSCwgKCkgPT4ge1xuICAgICAgdmFyIGRhdGEgPSBidWZmZXJVdGlsLmNvbmNhdChcbiAgICAgICAgdGhpcy5fZGVmbGF0ZVtrQnVmZmVyc10sXG4gICAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXVxuICAgICAgKTtcblxuICAgICAgaWYgKGZpbikgZGF0YSA9IGRhdGEuc2xpY2UoMCwgZGF0YS5sZW5ndGggLSA0KTtcblxuICAgICAgaWYgKFxuICAgICAgICAoZmluICYmIHRoaXMucGFyYW1zW2Ake2VuZHBvaW50fV9ub19jb250ZXh0X3Rha2VvdmVyYF0pIHx8XG4gICAgICAgIHRoaXMuX2RlZmxhdGVba1BlbmRpbmdDbG9zZV1cbiAgICAgICkge1xuICAgICAgICB0aGlzLl9kZWZsYXRlLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2RlZmxhdGUgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZGVmbGF0ZVtrV3JpdGVJblByb2dyZXNzXSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kZWZsYXRlW2tUb3RhbExlbmd0aF0gPSAwO1xuICAgICAgICB0aGlzLl9kZWZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBlck1lc3NhZ2VEZWZsYXRlO1xuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYHpsaWIuRGVmbGF0ZVJhd2Agc3RyZWFtIGAnZGF0YSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBBIGNodW5rIG9mIGRhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVPbkRhdGEgKGNodW5rKSB7XG4gIHRoaXNba0J1ZmZlcnNdLnB1c2goY2h1bmspO1xuICB0aGlzW2tUb3RhbExlbmd0aF0gKz0gY2h1bmsubGVuZ3RoO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYHpsaWIuSW5mbGF0ZVJhd2Agc3RyZWFtIGAnZGF0YSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBBIGNodW5rIG9mIGRhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGluZmxhdGVPbkRhdGEgKGNodW5rKSB7XG4gIHRoaXNba1RvdGFsTGVuZ3RoXSArPSBjaHVuay5sZW5ndGg7XG5cbiAgaWYgKFxuICAgIHRoaXNba1Blck1lc3NhZ2VEZWZsYXRlXS5fbWF4UGF5bG9hZCA8IDEgfHxcbiAgICB0aGlzW2tUb3RhbExlbmd0aF0gPD0gdGhpc1trUGVyTWVzc2FnZURlZmxhdGVdLl9tYXhQYXlsb2FkXG4gICkge1xuICAgIHRoaXNba0J1ZmZlcnNdLnB1c2goY2h1bmspO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXNba0Vycm9yXSA9IG5ldyBSYW5nZUVycm9yKCdNYXggcGF5bG9hZCBzaXplIGV4Y2VlZGVkJyk7XG4gIHRoaXNba0Vycm9yXVtjb25zdGFudHMua1N0YXR1c0NvZGVdID0gMTAwOTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIGluZmxhdGVPbkRhdGEpO1xuICB0aGlzLnJlc2V0KCk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgemxpYi5JbmZsYXRlUmF3YCBzdHJlYW0gYCdlcnJvcidgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBUaGUgZW1pdHRlZCBlcnJvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZU9uRXJyb3IgKGVycikge1xuICAvL1xuICAvLyBUaGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgYFpsaWIjY2xvc2UoKWAgYXMgdGhlIGhhbmRsZSBpcyBhdXRvbWF0aWNhbGx5XG4gIC8vIGNsb3NlZCB3aGVuIGFuIGVycm9yIGlzIGVtaXR0ZWQuXG4gIC8vXG4gIHRoaXNba1Blck1lc3NhZ2VEZWZsYXRlXS5faW5mbGF0ZSA9IG51bGw7XG4gIGVycltjb25zdGFudHMua1N0YXR1c0NvZGVdID0gMTAwNztcbiAgdGhpc1trQ2FsbGJhY2tdKGVycik7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVyZ2VzIGFuIGFycmF5IG9mIGJ1ZmZlcnMgaW50byBhIG5ldyBidWZmZXIuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJbXX0gbGlzdCBUaGUgYXJyYXkgb2YgYnVmZmVycyB0byBjb25jYXRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbExlbmd0aCBUaGUgdG90YWwgbGVuZ3RoIG9mIGJ1ZmZlcnMgaW4gdGhlIGxpc3RcbiAqIEByZXR1cm4ge0J1ZmZlcn0gVGhlIHJlc3VsdGluZyBidWZmZXJcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gY29uY2F0IChsaXN0LCB0b3RhbExlbmd0aCkge1xuICBjb25zdCB0YXJnZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUodG90YWxMZW5ndGgpO1xuICB2YXIgb2Zmc2V0ID0gMDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBidWYgPSBsaXN0W2ldO1xuICAgIGJ1Zi5jb3B5KHRhcmdldCwgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gYnVmLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogTWFza3MgYSBidWZmZXIgdXNpbmcgdGhlIGdpdmVuIG1hc2suXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IHNvdXJjZSBUaGUgYnVmZmVyIHRvIG1hc2tcbiAqIEBwYXJhbSB7QnVmZmVyfSBtYXNrIFRoZSBtYXNrIHRvIHVzZVxuICogQHBhcmFtIHtCdWZmZXJ9IG91dHB1dCBUaGUgYnVmZmVyIHdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgVGhlIG9mZnNldCBhdCB3aGljaCB0byBzdGFydCB3cml0aW5nXG4gKiBAcGFyYW0ge051bWJlcn0gbGVuZ3RoIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gbWFzay5cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gX21hc2sgKHNvdXJjZSwgbWFzaywgb3V0cHV0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0W29mZnNldCArIGldID0gc291cmNlW2ldIF4gbWFza1tpICYgM107XG4gIH1cbn1cblxuLyoqXG4gKiBVbm1hc2tzIGEgYnVmZmVyIHVzaW5nIHRoZSBnaXZlbiBtYXNrLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgVGhlIGJ1ZmZlciB0byB1bm1hc2tcbiAqIEBwYXJhbSB7QnVmZmVyfSBtYXNrIFRoZSBtYXNrIHRvIHVzZVxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBfdW5tYXNrIChidWZmZXIsIG1hc2spIHtcbiAgLy8gUmVxdWlyZWQgdW50aWwgaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2lzc3Vlcy85MDA2IGlzIHJlc29sdmVkLlxuICBjb25zdCBsZW5ndGggPSBidWZmZXIubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgYnVmZmVyW2ldIF49IG1hc2tbaSAmIDNdO1xuICB9XG59XG5cbnRyeSB7XG4gIGNvbnN0IGJ1ZmZlclV0aWwgPSByZXF1aXJlKCdidWZmZXJ1dGlsJyk7XG4gIGNvbnN0IGJ1ID0gYnVmZmVyVXRpbC5CdWZmZXJVdGlsIHx8IGJ1ZmZlclV0aWw7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgbWFzayAoc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKSB7XG4gICAgICBpZiAobGVuZ3RoIDwgNDgpIF9tYXNrKHNvdXJjZSwgbWFzaywgb3V0cHV0LCBvZmZzZXQsIGxlbmd0aCk7XG4gICAgICBlbHNlIGJ1Lm1hc2soc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKTtcbiAgICB9LFxuICAgIHVubWFzayAoYnVmZmVyLCBtYXNrKSB7XG4gICAgICBpZiAoYnVmZmVyLmxlbmd0aCA8IDMyKSBfdW5tYXNrKGJ1ZmZlciwgbWFzayk7XG4gICAgICBlbHNlIGJ1LnVubWFzayhidWZmZXIsIG1hc2spO1xuICAgIH0sXG4gICAgY29uY2F0XG4gIH07XG59IGNhdGNoIChlKSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB7XG4gIG1vZHVsZS5leHBvcnRzID0geyBjb25jYXQsIG1hc2s6IF9tYXNrLCB1bm1hc2s6IF91bm1hc2sgfTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNyeXB0b1wiKTsiLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IFdlYlNvY2tldCA9IHJlcXVpcmUoJy4vbGliL3dlYnNvY2tldCcpO1xuXG5XZWJTb2NrZXQuU2VydmVyID0gcmVxdWlyZSgnLi9saWIvd2Vic29ja2V0LXNlcnZlcicpO1xuV2ViU29ja2V0LlJlY2VpdmVyID0gcmVxdWlyZSgnLi9saWIvcmVjZWl2ZXInKTtcbldlYlNvY2tldC5TZW5kZXIgPSByZXF1aXJlKCcuL2xpYi9zZW5kZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXQ7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJldmVudHNcIik7IiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3QgYnVmZmVyVXRpbCA9IHJlcXVpcmUoJy4vYnVmZmVyLXV0aWwnKTtcbmNvbnN0IHZhbGlkYXRpb24gPSByZXF1aXJlKCcuL3ZhbGlkYXRpb24nKTtcbmNvbnN0IGNvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbi8qKlxuICogSHlCaSBTZW5kZXIgaW1wbGVtZW50YXRpb24uXG4gKi9cbmNsYXNzIFNlbmRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU2VuZGVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge25ldC5Tb2NrZXR9IHNvY2tldCBUaGUgY29ubmVjdGlvbiBzb2NrZXRcbiAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuc2lvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lZ290aWF0ZWQgZXh0ZW5zaW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKHNvY2tldCwgZXh0ZW5zaW9ucykge1xuICAgIHRoaXMuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zIHx8IHt9O1xuICAgIHRoaXMuX3NvY2tldCA9IHNvY2tldDtcblxuICAgIHRoaXMuX2ZpcnN0RnJhZ21lbnQgPSB0cnVlO1xuICAgIHRoaXMuX2NvbXByZXNzID0gZmFsc2U7XG5cbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzID0gMDtcbiAgICB0aGlzLl9kZWZsYXRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEZyYW1lcyBhIHBpZWNlIG9mIGRhdGEgYWNjb3JkaW5nIHRvIHRoZSBIeUJpIFdlYlNvY2tldCBwcm90b2NvbC5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgVGhlIGRhdGEgdG8gZnJhbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMub3Bjb2RlIFRoZSBvcGNvZGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLnJlYWRPbmx5IFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBjYW4gYmUgbW9kaWZpZWRcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmZpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZSBGSU4gYml0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5tYXNrIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucnN2MSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZSBSU1YxIGJpdFxuICAgKiBAcmV0dXJuIHtCdWZmZXJbXX0gVGhlIGZyYW1lZCBkYXRhIGFzIGEgbGlzdCBvZiBgQnVmZmVyYCBpbnN0YW5jZXNcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIGZyYW1lIChkYXRhLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbWVyZ2UgPSBkYXRhLmxlbmd0aCA8IDEwMjQgfHwgKG9wdGlvbnMubWFzayAmJiBvcHRpb25zLnJlYWRPbmx5KTtcbiAgICB2YXIgb2Zmc2V0ID0gb3B0aW9ucy5tYXNrID8gNiA6IDI7XG4gICAgdmFyIHBheWxvYWRMZW5ndGggPSBkYXRhLmxlbmd0aDtcblxuICAgIGlmIChkYXRhLmxlbmd0aCA+PSA2NTUzNikge1xuICAgICAgb2Zmc2V0ICs9IDg7XG4gICAgICBwYXlsb2FkTGVuZ3RoID0gMTI3O1xuICAgIH0gZWxzZSBpZiAoZGF0YS5sZW5ndGggPiAxMjUpIHtcbiAgICAgIG9mZnNldCArPSAyO1xuICAgICAgcGF5bG9hZExlbmd0aCA9IDEyNjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobWVyZ2UgPyBkYXRhLmxlbmd0aCArIG9mZnNldCA6IG9mZnNldCk7XG5cbiAgICB0YXJnZXRbMF0gPSBvcHRpb25zLmZpbiA/IG9wdGlvbnMub3Bjb2RlIHwgMHg4MCA6IG9wdGlvbnMub3Bjb2RlO1xuICAgIGlmIChvcHRpb25zLnJzdjEpIHRhcmdldFswXSB8PSAweDQwO1xuXG4gICAgaWYgKHBheWxvYWRMZW5ndGggPT09IDEyNikge1xuICAgICAgdGFyZ2V0LndyaXRlVUludDE2QkUoZGF0YS5sZW5ndGgsIDIpO1xuICAgIH0gZWxzZSBpZiAocGF5bG9hZExlbmd0aCA9PT0gMTI3KSB7XG4gICAgICB0YXJnZXQud3JpdGVVSW50MzJCRSgwLCAyKTtcbiAgICAgIHRhcmdldC53cml0ZVVJbnQzMkJFKGRhdGEubGVuZ3RoLCA2KTtcbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbnMubWFzaykge1xuICAgICAgdGFyZ2V0WzFdID0gcGF5bG9hZExlbmd0aDtcbiAgICAgIGlmIChtZXJnZSkge1xuICAgICAgICBkYXRhLmNvcHkodGFyZ2V0LCBvZmZzZXQpO1xuICAgICAgICByZXR1cm4gW3RhcmdldF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbdGFyZ2V0LCBkYXRhXTtcbiAgICB9XG5cbiAgICBjb25zdCBtYXNrID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDQpO1xuXG4gICAgdGFyZ2V0WzFdID0gcGF5bG9hZExlbmd0aCB8IDB4ODA7XG4gICAgdGFyZ2V0W29mZnNldCAtIDRdID0gbWFza1swXTtcbiAgICB0YXJnZXRbb2Zmc2V0IC0gM10gPSBtYXNrWzFdO1xuICAgIHRhcmdldFtvZmZzZXQgLSAyXSA9IG1hc2tbMl07XG4gICAgdGFyZ2V0W29mZnNldCAtIDFdID0gbWFza1szXTtcblxuICAgIGlmIChtZXJnZSkge1xuICAgICAgYnVmZmVyVXRpbC5tYXNrKGRhdGEsIG1hc2ssIHRhcmdldCwgb2Zmc2V0LCBkYXRhLmxlbmd0aCk7XG4gICAgICByZXR1cm4gW3RhcmdldF07XG4gICAgfVxuXG4gICAgYnVmZmVyVXRpbC5tYXNrKGRhdGEsIG1hc2ssIGRhdGEsIDAsIGRhdGEubGVuZ3RoKTtcbiAgICByZXR1cm4gW3RhcmdldCwgZGF0YV07XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBjbG9zZSBtZXNzYWdlIHRvIHRoZSBvdGhlciBwZWVyLlxuICAgKlxuICAgKiBAcGFyYW0geyhOdW1iZXJ8dW5kZWZpbmVkKX0gY29kZSBUaGUgc3RhdHVzIGNvZGUgY29tcG9uZW50IG9mIHRoZSBib2R5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhIFRoZSBtZXNzYWdlIGNvbXBvbmVudCBvZiB0aGUgYm9keVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgdGhlIG1lc3NhZ2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xvc2UgKGNvZGUsIGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgdmFyIGJ1ZjtcblxuICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGJ1ZiA9IGNvbnN0YW50cy5FTVBUWV9CVUZGRVI7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29kZSAhPT0gJ251bWJlcicgfHwgIXZhbGlkYXRpb24uaXNWYWxpZFN0YXR1c0NvZGUoY29kZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSB2YWxpZCBlcnJvciBjb2RlIG51bWJlcicpO1xuICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkIHx8IGRhdGEgPT09ICcnKSB7XG4gICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMik7XG4gICAgICBidWYud3JpdGVVSW50MTZCRShjb2RlLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmID0gQnVmZmVyLmFsbG9jVW5zYWZlKDIgKyBCdWZmZXIuYnl0ZUxlbmd0aChkYXRhKSk7XG4gICAgICBidWYud3JpdGVVSW50MTZCRShjb2RlLCAwKTtcbiAgICAgIGJ1Zi53cml0ZShkYXRhLCAyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZGVmbGF0aW5nKSB7XG4gICAgICB0aGlzLmVucXVldWUoW3RoaXMuZG9DbG9zZSwgYnVmLCBtYXNrLCBjYl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvQ2xvc2UoYnVmLCBtYXNrLCBjYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZyYW1lcyBhbmQgc2VuZHMgYSBjbG9zZSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRvQ2xvc2UgKGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIHtcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIHJzdjE6IGZhbHNlLFxuICAgICAgb3Bjb2RlOiAweDA4LFxuICAgICAgbWFzayxcbiAgICAgIHJlYWRPbmx5OiBmYWxzZVxuICAgIH0pLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBwaW5nIG1lc3NhZ2UgdG8gdGhlIG90aGVyIHBlZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcGluZyAoZGF0YSwgbWFzaywgY2IpIHtcbiAgICB2YXIgcmVhZE9ubHkgPSB0cnVlO1xuXG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHtcbiAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpO1xuICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpIHtcbiAgICAgICAgZGF0YSA9IHZpZXdUb0J1ZmZlcihkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBCdWZmZXIuZnJvbShkYXRhKTtcbiAgICAgICAgcmVhZE9ubHkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZGVmbGF0aW5nKSB7XG4gICAgICB0aGlzLmVucXVldWUoW3RoaXMuZG9QaW5nLCBkYXRhLCBtYXNrLCByZWFkT25seSwgY2JdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb1BpbmcoZGF0YSwgbWFzaywgcmVhZE9ubHksIGNiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRnJhbWVzIGFuZCBzZW5kcyBhIHBpbmcgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBtYXNrIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlYWRPbmx5IFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBjYW4gYmUgbW9kaWZpZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRvUGluZyAoZGF0YSwgbWFzaywgcmVhZE9ubHksIGNiKSB7XG4gICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIHtcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIHJzdjE6IGZhbHNlLFxuICAgICAgb3Bjb2RlOiAweDA5LFxuICAgICAgbWFzayxcbiAgICAgIHJlYWRPbmx5XG4gICAgfSksIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHBvbmcgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBtYXNrIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHVibGljXG4gICAqL1xuICBwb25nIChkYXRhLCBtYXNrLCBjYikge1xuICAgIHZhciByZWFkT25seSA9IHRydWU7XG5cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkge1xuICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICBkYXRhID0gQnVmZmVyLmZyb20oZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkge1xuICAgICAgICBkYXRhID0gdmlld1RvQnVmZmVyKGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpO1xuICAgICAgICByZWFkT25seSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kb1BvbmcsIGRhdGEsIG1hc2ssIHJlYWRPbmx5LCBjYl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvUG9uZyhkYXRhLCBtYXNrLCByZWFkT25seSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGcmFtZXMgYW5kIHNlbmRzIGEgcG9uZyBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVhZE9ubHkgU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGNhbiBiZSBtb2RpZmllZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZG9Qb25nIChkYXRhLCBtYXNrLCByZWFkT25seSwgY2IpIHtcbiAgICB0aGlzLnNlbmRGcmFtZShTZW5kZXIuZnJhbWUoZGF0YSwge1xuICAgICAgZmluOiB0cnVlLFxuICAgICAgcnN2MTogZmFsc2UsXG4gICAgICBvcGNvZGU6IDB4MGEsXG4gICAgICBtYXNrLFxuICAgICAgcmVhZE9ubHlcbiAgICB9KSwgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgZGF0YSBtZXNzYWdlIHRvIHRoZSBvdGhlciBwZWVyLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuY29tcHJlc3MgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIGNvbXByZXNzIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuYmluYXJ5IFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBpcyBiaW5hcnkgb3IgdGV4dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuZmluIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBmcmFnbWVudCBpcyB0aGUgbGFzdCBvbmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLm1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNlbmQgKGRhdGEsIG9wdGlvbnMsIGNiKSB7XG4gICAgdmFyIG9wY29kZSA9IG9wdGlvbnMuYmluYXJ5ID8gMiA6IDE7XG4gICAgdmFyIHJzdjEgPSBvcHRpb25zLmNvbXByZXNzO1xuICAgIHZhciByZWFkT25seSA9IHRydWU7XG5cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkge1xuICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICBkYXRhID0gQnVmZmVyLmZyb20oZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkge1xuICAgICAgICBkYXRhID0gdmlld1RvQnVmZmVyKGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpO1xuICAgICAgICByZWFkT25seSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBlck1lc3NhZ2VEZWZsYXRlID0gdGhpcy5fZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXTtcblxuICAgIGlmICh0aGlzLl9maXJzdEZyYWdtZW50KSB7XG4gICAgICB0aGlzLl9maXJzdEZyYWdtZW50ID0gZmFsc2U7XG4gICAgICBpZiAocnN2MSAmJiBwZXJNZXNzYWdlRGVmbGF0ZSkge1xuICAgICAgICByc3YxID0gZGF0YS5sZW5ndGggPj0gcGVyTWVzc2FnZURlZmxhdGUuX3RocmVzaG9sZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NvbXByZXNzID0gcnN2MTtcbiAgICB9IGVsc2Uge1xuICAgICAgcnN2MSA9IGZhbHNlO1xuICAgICAgb3Bjb2RlID0gMDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5maW4pIHRoaXMuX2ZpcnN0RnJhZ21lbnQgPSB0cnVlO1xuXG4gICAgaWYgKHBlck1lc3NhZ2VEZWZsYXRlKSB7XG4gICAgICBjb25zdCBvcHRzID0ge1xuICAgICAgICBmaW46IG9wdGlvbnMuZmluLFxuICAgICAgICByc3YxLFxuICAgICAgICBvcGNvZGUsXG4gICAgICAgIG1hc2s6IG9wdGlvbnMubWFzayxcbiAgICAgICAgcmVhZE9ubHlcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLl9kZWZsYXRpbmcpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBkYXRhLCB0aGlzLl9jb21wcmVzcywgb3B0cywgY2JdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goZGF0YSwgdGhpcy5fY29tcHJlc3MsIG9wdHMsIGNiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIHtcbiAgICAgICAgZmluOiBvcHRpb25zLmZpbixcbiAgICAgICAgcnN2MTogZmFsc2UsXG4gICAgICAgIG9wY29kZSxcbiAgICAgICAgbWFzazogb3B0aW9ucy5tYXNrLFxuICAgICAgICByZWFkT25seVxuICAgICAgfSksIGNiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhIGRhdGEgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGNvbXByZXNzIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBjb21wcmVzcyBgZGF0YWBcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMub3Bjb2RlIFRoZSBvcGNvZGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLnJlYWRPbmx5IFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBjYW4gYmUgbW9kaWZpZWRcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmZpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZSBGSU4gYml0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5tYXNrIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucnN2MSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZSBSU1YxIGJpdFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzcGF0Y2ggKGRhdGEsIGNvbXByZXNzLCBvcHRpb25zLCBjYikge1xuICAgIGlmICghY29tcHJlc3MpIHtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCBvcHRpb25zKSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBlck1lc3NhZ2VEZWZsYXRlID0gdGhpcy5fZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXTtcblxuICAgIHRoaXMuX2RlZmxhdGluZyA9IHRydWU7XG4gICAgcGVyTWVzc2FnZURlZmxhdGUuY29tcHJlc3MoZGF0YSwgb3B0aW9ucy5maW4sIChfLCBidWYpID0+IHtcbiAgICAgIG9wdGlvbnMucmVhZE9ubHkgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShidWYsIG9wdGlvbnMpLCBjYik7XG4gICAgICB0aGlzLl9kZWZsYXRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVxdWV1ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIHF1ZXVlZCBzZW5kIG9wZXJhdGlvbnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZXF1ZXVlICgpIHtcbiAgICB3aGlsZSAoIXRoaXMuX2RlZmxhdGluZyAmJiB0aGlzLl9xdWV1ZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuX3F1ZXVlLnNoaWZ0KCk7XG5cbiAgICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgLT0gcGFyYW1zWzFdLmxlbmd0aDtcbiAgICAgIHBhcmFtc1swXS5hcHBseSh0aGlzLCBwYXJhbXMuc2xpY2UoMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnF1ZXVlcyBhIHNlbmQgb3BlcmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXMgU2VuZCBvcGVyYXRpb24gcGFyYW1ldGVycy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVucXVldWUgKHBhcmFtcykge1xuICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgKz0gcGFyYW1zWzFdLmxlbmd0aDtcbiAgICB0aGlzLl9xdWV1ZS5wdXNoKHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBmcmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJbXX0gbGlzdCBUaGUgZnJhbWUgdG8gc2VuZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2VuZEZyYW1lIChsaXN0LCBjYikge1xuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhpcy5fc29ja2V0LndyaXRlKGxpc3RbMF0pO1xuICAgICAgdGhpcy5fc29ja2V0LndyaXRlKGxpc3RbMV0sIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc29ja2V0LndyaXRlKGxpc3RbMF0sIGNiKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTZW5kZXI7XG5cbi8qKlxuICogQ29udmVydHMgYW4gYEFycmF5QnVmZmVyYCB2aWV3IGludG8gYSBidWZmZXIuXG4gKlxuICogQHBhcmFtIHsoRGF0YVZpZXd8VHlwZWRBcnJheSl9IHZpZXcgVGhlIHZpZXcgdG8gY29udmVydFxuICogQHJldHVybiB7QnVmZmVyfSBDb252ZXJ0ZWQgdmlld1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdmlld1RvQnVmZmVyICh2aWV3KSB7XG4gIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5mcm9tKHZpZXcuYnVmZmVyKTtcblxuICBpZiAodmlldy5ieXRlTGVuZ3RoICE9PSB2aWV3LmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJ1Zi5zbGljZSh2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZU9mZnNldCArIHZpZXcuYnl0ZUxlbmd0aCk7XG4gIH1cblxuICByZXR1cm4gYnVmO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG50cnkge1xuICBjb25zdCBpc1ZhbGlkVVRGOCA9IHJlcXVpcmUoJ3V0Zi04LXZhbGlkYXRlJyk7XG5cbiAgZXhwb3J0cy5pc1ZhbGlkVVRGOCA9IHR5cGVvZiBpc1ZhbGlkVVRGOCA9PT0gJ29iamVjdCdcbiAgICA/IGlzVmFsaWRVVEY4LlZhbGlkYXRpb24uaXNWYWxpZFVURjggLy8gdXRmLTgtdmFsaWRhdGVAPDMuMC4wXG4gICAgOiBpc1ZhbGlkVVRGODtcbn0gY2F0Y2ggKGUpIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHtcbiAgZXhwb3J0cy5pc1ZhbGlkVVRGOCA9ICgpID0+IHRydWU7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgc3RhdHVzIGNvZGUgaXMgYWxsb3dlZCBpbiBhIGNsb3NlIGZyYW1lLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBzdGF0dXMgY29kZVxuICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBzdGF0dXMgY29kZSBpcyB2YWxpZCwgZWxzZSBgZmFsc2VgXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydHMuaXNWYWxpZFN0YXR1c0NvZGUgPSAoY29kZSkgPT4ge1xuICByZXR1cm4gKFxuICAgIChjb2RlID49IDEwMDAgJiZcbiAgICAgIGNvZGUgPD0gMTAxMyAmJlxuICAgICAgY29kZSAhPT0gMTAwNCAmJlxuICAgICAgY29kZSAhPT0gMTAwNSAmJlxuICAgICAgY29kZSAhPT0gMTAwNikgfHxcbiAgICAoY29kZSA+PSAzMDAwICYmIGNvZGUgPD0gNDk5OSlcbiAgKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuXG5jb25zdCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vcGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBidWZmZXJVdGlsID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuY29uc3QgdmFsaWRhdGlvbiA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuY29uc3QgY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuY29uc3QgR0VUX0lORk8gPSAwO1xuY29uc3QgR0VUX1BBWUxPQURfTEVOR1RIXzE2ID0gMTtcbmNvbnN0IEdFVF9QQVlMT0FEX0xFTkdUSF82NCA9IDI7XG5jb25zdCBHRVRfTUFTSyA9IDM7XG5jb25zdCBHRVRfREFUQSA9IDQ7XG5jb25zdCBJTkZMQVRJTkcgPSA1O1xuXG4vKipcbiAqIEh5QmkgUmVjZWl2ZXIgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQGV4dGVuZHMgc3RyZWFtLldyaXRhYmxlXG4gKi9cbmNsYXNzIFJlY2VpdmVyIGV4dGVuZHMgc3RyZWFtLldyaXRhYmxlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBSZWNlaXZlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJpbmFyeVR5cGUgVGhlIHR5cGUgZm9yIGJpbmFyeSBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbnNpb25zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBuZWdvdGlhdGVkIGV4dGVuc2lvbnNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG1heFBheWxvYWQgVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlIGxlbmd0aFxuICAgKi9cbiAgY29uc3RydWN0b3IgKGJpbmFyeVR5cGUsIGV4dGVuc2lvbnMsIG1heFBheWxvYWQpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fYmluYXJ5VHlwZSA9IGJpbmFyeVR5cGUgfHwgY29uc3RhbnRzLkJJTkFSWV9UWVBFU1swXTtcbiAgICB0aGlzW2NvbnN0YW50cy5rV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9leHRlbnNpb25zID0gZXh0ZW5zaW9ucyB8fCB7fTtcbiAgICB0aGlzLl9tYXhQYXlsb2FkID0gbWF4UGF5bG9hZCB8IDA7XG5cbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzID0gMDtcbiAgICB0aGlzLl9idWZmZXJzID0gW107XG5cbiAgICB0aGlzLl9jb21wcmVzc2VkID0gZmFsc2U7XG4gICAgdGhpcy5fcGF5bG9hZExlbmd0aCA9IDA7XG4gICAgdGhpcy5fbWFzayA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9mcmFnbWVudGVkID0gMDtcbiAgICB0aGlzLl9tYXNrZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9maW4gPSBmYWxzZTtcbiAgICB0aGlzLl9vcGNvZGUgPSAwO1xuXG4gICAgdGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9tZXNzYWdlTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9mcmFnbWVudHMgPSBbXTtcblxuICAgIHRoaXMuX3N0YXRlID0gR0VUX0lORk87XG4gICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudHMgYFdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBUaGUgY2h1bmsgb2YgZGF0YSB0byB3cml0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW5jb2RpbmcgVGhlIGNoYXJhY3RlciBlbmNvZGluZyBvZiBgY2h1bmtgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqL1xuICBfd3JpdGUgKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgICBpZiAodGhpcy5fb3Bjb2RlID09PSAweDA4KSByZXR1cm4gY2IoKTtcblxuICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgKz0gY2h1bmsubGVuZ3RoO1xuICAgIHRoaXMuX2J1ZmZlcnMucHVzaChjaHVuayk7XG4gICAgdGhpcy5zdGFydExvb3AoY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bWVzIGBuYCBieXRlcyBmcm9tIHRoZSBidWZmZXJlZCBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIGNvbnN1bWVcbiAgICogQHJldHVybiB7QnVmZmVyfSBUaGUgY29uc3VtZWQgYnl0ZXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN1bWUgKG4pIHtcbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzIC09IG47XG5cbiAgICBpZiAobiA9PT0gdGhpcy5fYnVmZmVyc1swXS5sZW5ndGgpIHJldHVybiB0aGlzLl9idWZmZXJzLnNoaWZ0KCk7XG5cbiAgICBpZiAobiA8IHRoaXMuX2J1ZmZlcnNbMF0ubGVuZ3RoKSB7XG4gICAgICBjb25zdCBidWYgPSB0aGlzLl9idWZmZXJzWzBdO1xuICAgICAgdGhpcy5fYnVmZmVyc1swXSA9IGJ1Zi5zbGljZShuKTtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMCwgbik7XG4gICAgfVxuXG4gICAgY29uc3QgZHN0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG4pO1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgYnVmID0gdGhpcy5fYnVmZmVyc1swXTtcblxuICAgICAgaWYgKG4gPj0gYnVmLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9idWZmZXJzLnNoaWZ0KCkuY29weShkc3QsIGRzdC5sZW5ndGggLSBuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1Zi5jb3B5KGRzdCwgZHN0Lmxlbmd0aCAtIG4sIDAsIG4pO1xuICAgICAgICB0aGlzLl9idWZmZXJzWzBdID0gYnVmLnNsaWNlKG4pO1xuICAgICAgfVxuXG4gICAgICBuIC09IGJ1Zi5sZW5ndGg7XG4gICAgfSB3aGlsZSAobiA+IDApO1xuXG4gICAgcmV0dXJuIGRzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHBhcnNpbmcgbG9vcC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0TG9vcCAoY2IpIHtcbiAgICB2YXIgZXJyO1xuICAgIHRoaXMuX2xvb3AgPSB0cnVlO1xuXG4gICAgZG8ge1xuICAgICAgc3dpdGNoICh0aGlzLl9zdGF0ZSkge1xuICAgICAgICBjYXNlIEdFVF9JTkZPOlxuICAgICAgICAgIGVyciA9IHRoaXMuZ2V0SW5mbygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdFVF9QQVlMT0FEX0xFTkdUSF8xNjpcbiAgICAgICAgICBlcnIgPSB0aGlzLmdldFBheWxvYWRMZW5ndGgxNigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdFVF9QQVlMT0FEX0xFTkdUSF82NDpcbiAgICAgICAgICBlcnIgPSB0aGlzLmdldFBheWxvYWRMZW5ndGg2NCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdFVF9NQVNLOlxuICAgICAgICAgIHRoaXMuZ2V0TWFzaygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdFVF9EQVRBOlxuICAgICAgICAgIGVyciA9IHRoaXMuZ2V0RGF0YShjYik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIGBJTkZMQVRJTkdgXG4gICAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IHdoaWxlICh0aGlzLl9sb29wKTtcblxuICAgIGNiKGVycik7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIGZpcnN0IHR3byBieXRlcyBvZiBhIGZyYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHsoUmFuZ2VFcnJvcnx1bmRlZmluZWQpfSBBIHBvc3NpYmxlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRJbmZvICgpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDIpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBidWYgPSB0aGlzLmNvbnN1bWUoMik7XG5cbiAgICBpZiAoKGJ1ZlswXSAmIDB4MzApICE9PSAweDAwKSB7XG4gICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICByZXR1cm4gZXJyb3IoUmFuZ2VFcnJvciwgJ1JTVjIgYW5kIFJTVjMgbXVzdCBiZSBjbGVhcicsIHRydWUsIDEwMDIpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbXByZXNzZWQgPSAoYnVmWzBdICYgMHg0MCkgPT09IDB4NDA7XG5cbiAgICBpZiAoY29tcHJlc3NlZCAmJiAhdGhpcy5fZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGVycm9yKFJhbmdlRXJyb3IsICdSU1YxIG11c3QgYmUgY2xlYXInLCB0cnVlLCAxMDAyKTtcbiAgICB9XG5cbiAgICB0aGlzLl9maW4gPSAoYnVmWzBdICYgMHg4MCkgPT09IDB4ODA7XG4gICAgdGhpcy5fb3Bjb2RlID0gYnVmWzBdICYgMHgwZjtcbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gYnVmWzFdICYgMHg3ZjtcblxuICAgIGlmICh0aGlzLl9vcGNvZGUgPT09IDB4MDApIHtcbiAgICAgIGlmIChjb21wcmVzc2VkKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGVycm9yKFJhbmdlRXJyb3IsICdSU1YxIG11c3QgYmUgY2xlYXInLCB0cnVlLCAxMDAyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9mcmFnbWVudGVkKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGVycm9yKFJhbmdlRXJyb3IsICdpbnZhbGlkIG9wY29kZSAwJywgdHJ1ZSwgMTAwMik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX29wY29kZSA9IHRoaXMuX2ZyYWdtZW50ZWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9vcGNvZGUgPT09IDB4MDEgfHwgdGhpcy5fb3Bjb2RlID09PSAweDAyKSB7XG4gICAgICBpZiAodGhpcy5fZnJhZ21lbnRlZCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihSYW5nZUVycm9yLCBgaW52YWxpZCBvcGNvZGUgJHt0aGlzLl9vcGNvZGV9YCwgdHJ1ZSwgMTAwMik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NvbXByZXNzZWQgPSBjb21wcmVzc2VkO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3Bjb2RlID4gMHgwNyAmJiB0aGlzLl9vcGNvZGUgPCAweDBiKSB7XG4gICAgICBpZiAoIXRoaXMuX2Zpbikge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBlcnJvcihSYW5nZUVycm9yLCAnRklOIG11c3QgYmUgc2V0JywgdHJ1ZSwgMTAwMik7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb21wcmVzc2VkKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGVycm9yKFJhbmdlRXJyb3IsICdSU1YxIG11c3QgYmUgY2xlYXInLCB0cnVlLCAxMDAyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGggPiAweDdkKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGVycm9yKFxuICAgICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICAgYGludmFsaWQgcGF5bG9hZCBsZW5ndGggJHt0aGlzLl9wYXlsb2FkTGVuZ3RofWAsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAxMDAyXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihSYW5nZUVycm9yLCBgaW52YWxpZCBvcGNvZGUgJHt0aGlzLl9vcGNvZGV9YCwgdHJ1ZSwgMTAwMik7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9maW4gJiYgIXRoaXMuX2ZyYWdtZW50ZWQpIHRoaXMuX2ZyYWdtZW50ZWQgPSB0aGlzLl9vcGNvZGU7XG4gICAgdGhpcy5fbWFza2VkID0gKGJ1ZlsxXSAmIDB4ODApID09PSAweDgwO1xuXG4gICAgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGggPT09IDEyNikgdGhpcy5fc3RhdGUgPSBHRVRfUEFZTE9BRF9MRU5HVEhfMTY7XG4gICAgZWxzZSBpZiAodGhpcy5fcGF5bG9hZExlbmd0aCA9PT0gMTI3KSB0aGlzLl9zdGF0ZSA9IEdFVF9QQVlMT0FEX0xFTkdUSF82NDtcbiAgICBlbHNlIHJldHVybiB0aGlzLmhhdmVMZW5ndGgoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGV4dGVuZGVkIHBheWxvYWQgbGVuZ3RoICg3KzE2KS5cbiAgICpcbiAgICogQHJldHVybiB7KFJhbmdlRXJyb3J8dW5kZWZpbmVkKX0gQSBwb3NzaWJsZSBlcnJvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0UGF5bG9hZExlbmd0aDE2ICgpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDIpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gdGhpcy5jb25zdW1lKDIpLnJlYWRVSW50MTZCRSgwKTtcbiAgICByZXR1cm4gdGhpcy5oYXZlTGVuZ3RoKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBleHRlbmRlZCBwYXlsb2FkIGxlbmd0aCAoNys2NCkuXG4gICAqXG4gICAqIEByZXR1cm4geyhSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBheWxvYWRMZW5ndGg2NCAoKSB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPCA4KSB7XG4gICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYnVmID0gdGhpcy5jb25zdW1lKDgpO1xuICAgIGNvbnN0IG51bSA9IGJ1Zi5yZWFkVUludDMyQkUoMCk7XG5cbiAgICAvL1xuICAgIC8vIFRoZSBtYXhpbXVtIHNhZmUgaW50ZWdlciBpbiBKYXZhU2NyaXB0IGlzIDJeNTMgLSAxLiBBbiBlcnJvciBpcyByZXR1cm5lZFxuICAgIC8vIGlmIHBheWxvYWQgbGVuZ3RoIGlzIGdyZWF0ZXIgdGhhbiB0aGlzIG51bWJlci5cbiAgICAvL1xuICAgIGlmIChudW0gPiBNYXRoLnBvdygyLCA1MyAtIDMyKSAtIDEpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybiBlcnJvcihcbiAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgJ1Vuc3VwcG9ydGVkIFdlYlNvY2tldCBmcmFtZTogcGF5bG9hZCBsZW5ndGggPiAyXjUzIC0gMScsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAxMDA5XG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX3BheWxvYWRMZW5ndGggPSBudW0gKiBNYXRoLnBvdygyLCAzMikgKyBidWYucmVhZFVJbnQzMkJFKDQpO1xuICAgIHJldHVybiB0aGlzLmhhdmVMZW5ndGgoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXlsb2FkIGxlbmd0aCBoYXMgYmVlbiByZWFkLlxuICAgKlxuICAgKiBAcmV0dXJuIHsoUmFuZ2VFcnJvcnx1bmRlZmluZWQpfSBBIHBvc3NpYmxlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXZlTGVuZ3RoICgpIHtcbiAgICBpZiAodGhpcy5fcGF5bG9hZExlbmd0aCAmJiB0aGlzLl9vcGNvZGUgPCAweDA4KSB7XG4gICAgICB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggKz0gdGhpcy5fcGF5bG9hZExlbmd0aDtcbiAgICAgIGlmICh0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPiB0aGlzLl9tYXhQYXlsb2FkICYmIHRoaXMuX21heFBheWxvYWQgPiAwKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGVycm9yKFJhbmdlRXJyb3IsICdNYXggcGF5bG9hZCBzaXplIGV4Y2VlZGVkJywgZmFsc2UsIDEwMDkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9tYXNrZWQpIHRoaXMuX3N0YXRlID0gR0VUX01BU0s7XG4gICAgZWxzZSB0aGlzLl9zdGF0ZSA9IEdFVF9EQVRBO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWRzIG1hc2sgYnl0ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRNYXNrICgpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDQpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9tYXNrID0gdGhpcy5jb25zdW1lKDQpO1xuICAgIHRoaXMuX3N0YXRlID0gR0VUX0RBVEE7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgZGF0YSBieXRlcy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHJldHVybiB7KEVycm9yfFJhbmdlRXJyb3J8dW5kZWZpbmVkKX0gQSBwb3NzaWJsZSBlcnJvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0RGF0YSAoY2IpIHtcbiAgICB2YXIgZGF0YSA9IGNvbnN0YW50cy5FTVBUWV9CVUZGRVI7XG5cbiAgICBpZiAodGhpcy5fcGF5bG9hZExlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPCB0aGlzLl9wYXlsb2FkTGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBkYXRhID0gdGhpcy5jb25zdW1lKHRoaXMuX3BheWxvYWRMZW5ndGgpO1xuICAgICAgaWYgKHRoaXMuX21hc2tlZCkgYnVmZmVyVXRpbC51bm1hc2soZGF0YSwgdGhpcy5fbWFzayk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX29wY29kZSA+IDB4MDcpIHJldHVybiB0aGlzLmNvbnRyb2xNZXNzYWdlKGRhdGEpO1xuXG4gICAgaWYgKHRoaXMuX2NvbXByZXNzZWQpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gSU5GTEFUSU5HO1xuICAgICAgdGhpcy5kZWNvbXByZXNzKGRhdGEsIGNiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5sZW5ndGgpIHtcbiAgICAgIC8vXG4gICAgICAvLyBUaGlzIG1lc3NhZ2UgaXMgbm90IGNvbXByZXNzZWQgc28gaXRzIGxlbmdodCBpcyB0aGUgc3VtIG9mIHRoZSBwYXlsb2FkXG4gICAgICAvLyBsZW5ndGggb2YgYWxsIGZyYWdtZW50cy5cbiAgICAgIC8vXG4gICAgICB0aGlzLl9tZXNzYWdlTGVuZ3RoID0gdGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoO1xuICAgICAgdGhpcy5fZnJhZ21lbnRzLnB1c2goZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YU1lc3NhZ2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvbXByZXNzZXMgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgQ29tcHJlc3NlZCBkYXRhXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZWNvbXByZXNzIChkYXRhLCBjYikge1xuICAgIGNvbnN0IHBlck1lc3NhZ2VEZWZsYXRlID0gdGhpcy5fZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXTtcblxuICAgIHBlck1lc3NhZ2VEZWZsYXRlLmRlY29tcHJlc3MoZGF0YSwgdGhpcy5fZmluLCAoZXJyLCBidWYpID0+IHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBjYihlcnIpO1xuXG4gICAgICBpZiAoYnVmLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9tZXNzYWdlTGVuZ3RoICs9IGJ1Zi5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLl9tZXNzYWdlTGVuZ3RoID4gdGhpcy5fbWF4UGF5bG9hZCAmJiB0aGlzLl9tYXhQYXlsb2FkID4gMCkge1xuICAgICAgICAgIHJldHVybiBjYihlcnJvcihSYW5nZUVycm9yLCAnTWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcsIGZhbHNlLCAxMDA5KSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mcmFnbWVudHMucHVzaChidWYpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlciA9IHRoaXMuZGF0YU1lc3NhZ2UoKTtcbiAgICAgIGlmIChlcikgcmV0dXJuIGNiKGVyKTtcblxuICAgICAgdGhpcy5zdGFydExvb3AoY2IpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYSBkYXRhIG1lc3NhZ2UuXG4gICAqXG4gICAqIEByZXR1cm4geyhFcnJvcnx1bmRlZmluZWQpfSBBIHBvc3NpYmxlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkYXRhTWVzc2FnZSAoKSB7XG4gICAgaWYgKHRoaXMuX2Zpbikge1xuICAgICAgY29uc3QgbWVzc2FnZUxlbmd0aCA9IHRoaXMuX21lc3NhZ2VMZW5ndGg7XG4gICAgICBjb25zdCBmcmFnbWVudHMgPSB0aGlzLl9mcmFnbWVudHM7XG5cbiAgICAgIHRoaXMuX3RvdGFsUGF5bG9hZExlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9tZXNzYWdlTGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50ZWQgPSAwO1xuICAgICAgdGhpcy5fZnJhZ21lbnRzID0gW107XG5cbiAgICAgIGlmICh0aGlzLl9vcGNvZGUgPT09IDIpIHtcbiAgICAgICAgdmFyIGRhdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuX2JpbmFyeVR5cGUgPT09ICdub2RlYnVmZmVyJykge1xuICAgICAgICAgIGRhdGEgPSB0b0J1ZmZlcihmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JpbmFyeVR5cGUgPT09ICdhcnJheWJ1ZmZlcicpIHtcbiAgICAgICAgICBkYXRhID0gdG9BcnJheUJ1ZmZlcih0b0J1ZmZlcihmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhID0gZnJhZ21lbnRzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBidWYgPSB0b0J1ZmZlcihmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpO1xuXG4gICAgICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkVVRGOChidWYpKSB7XG4gICAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBlcnJvcihFcnJvciwgJ2ludmFsaWQgVVRGLTggc2VxdWVuY2UnLCB0cnVlLCAxMDA3KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIGJ1Zi50b1N0cmluZygpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9zdGF0ZSA9IEdFVF9JTkZPO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYSBjb250cm9sIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIERhdGEgdG8gaGFuZGxlXG4gICAqIEByZXR1cm4geyhFcnJvcnxSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnRyb2xNZXNzYWdlIChkYXRhKSB7XG4gICAgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwOCkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuXG4gICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25jbHVkZScsIDEwMDUsICcnKTtcbiAgICAgICAgdGhpcy5lbmQoKTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yKFJhbmdlRXJyb3IsICdpbnZhbGlkIHBheWxvYWQgbGVuZ3RoIDEnLCB0cnVlLCAxMDAyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBkYXRhLnJlYWRVSW50MTZCRSgwKTtcblxuICAgICAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZFN0YXR1c0NvZGUoY29kZSkpIHtcbiAgICAgICAgICByZXR1cm4gZXJyb3IoUmFuZ2VFcnJvciwgYGludmFsaWQgc3RhdHVzIGNvZGUgJHtjb2RlfWAsIHRydWUsIDEwMDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnVmID0gZGF0YS5zbGljZSgyKTtcblxuICAgICAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZFVURjgoYnVmKSkge1xuICAgICAgICAgIHJldHVybiBlcnJvcihFcnJvciwgJ2ludmFsaWQgVVRGLTggc2VxdWVuY2UnLCB0cnVlLCAxMDA3KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZW1pdCgnY29uY2x1ZGUnLCBjb2RlLCBidWYudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fb3Bjb2RlID09PSAweDA5KSB0aGlzLmVtaXQoJ3BpbmcnLCBkYXRhKTtcbiAgICBlbHNlIHRoaXMuZW1pdCgncG9uZycsIGRhdGEpO1xuXG4gICAgdGhpcy5fc3RhdGUgPSBHRVRfSU5GTztcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlY2VpdmVyO1xuXG4vKipcbiAqIEJ1aWxkcyBhbiBlcnJvciBvYmplY3QuXG4gKlxuICogQHBhcmFtIHsoRXJyb3J8UmFuZ2VFcnJvcil9IEVycm9yQ3RvciBUaGUgZXJyb3IgY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHByZWZpeCBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gYWRkIGEgZGVmYXVsdCBwcmVmaXggdG9cbiAqICAgICBgbWVzc2FnZWBcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNDb2RlIFRoZSBzdGF0dXMgY29kZVxuICogQHJldHVybiB7KEVycm9yfFJhbmdlRXJyb3IpfSBUaGUgZXJyb3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVycm9yIChFcnJvckN0b3IsIG1lc3NhZ2UsIHByZWZpeCwgc3RhdHVzQ29kZSkge1xuICBjb25zdCBlcnIgPSBuZXcgRXJyb3JDdG9yKFxuICAgIHByZWZpeCA/IGBJbnZhbGlkIFdlYlNvY2tldCBmcmFtZTogJHttZXNzYWdlfWAgOiBtZXNzYWdlXG4gICk7XG5cbiAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyLCBlcnJvcik7XG4gIGVycltjb25zdGFudHMua1N0YXR1c0NvZGVdID0gc3RhdHVzQ29kZTtcbiAgcmV0dXJuIGVycjtcbn1cblxuLyoqXG4gKiBNYWtlcyBhIGJ1ZmZlciBmcm9tIGEgbGlzdCBvZiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJbXX0gZnJhZ21lbnRzIFRoZSBsaXN0IG9mIGZyYWdtZW50cyBjb21wb3NpbmcgdGhlIG1lc3NhZ2VcbiAqIEBwYXJhbSB7TnVtYmVyfSBtZXNzYWdlTGVuZ3RoIFRoZSBsZW5ndGggb2YgdGhlIG1lc3NhZ2VcbiAqIEByZXR1cm4ge0J1ZmZlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRvQnVmZmVyIChmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpIHtcbiAgaWYgKGZyYWdtZW50cy5sZW5ndGggPT09IDEpIHJldHVybiBmcmFnbWVudHNbMF07XG4gIGlmIChmcmFnbWVudHMubGVuZ3RoID4gMSkgcmV0dXJuIGJ1ZmZlclV0aWwuY29uY2F0KGZyYWdtZW50cywgbWVzc2FnZUxlbmd0aCk7XG4gIHJldHVybiBjb25zdGFudHMuRU1QVFlfQlVGRkVSO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYnVmZmVyIHRvIGFuIGBBcnJheUJ1ZmZlcmAuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IFRoZSBidWZmZXIgdG8gY29udmVydFxuICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IENvbnZlcnRlZCBidWZmZXJcbiAqL1xuZnVuY3Rpb24gdG9BcnJheUJ1ZmZlciAoYnVmKSB7XG4gIGlmIChidWYuYnl0ZU9mZnNldCA9PT0gMCAmJiBidWYuYnl0ZUxlbmd0aCA9PT0gYnVmLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJ1Zi5idWZmZXI7XG4gIH1cblxuICByZXR1cm4gYnVmLmJ1ZmZlci5zbGljZShidWYuYnl0ZU9mZnNldCwgYnVmLmJ5dGVPZmZzZXQgKyBidWYuYnl0ZUxlbmd0aCk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vXG4vLyBBbGxvd2VkIHRva2VuIGNoYXJhY3RlcnM6XG4vL1xuLy8gJyEnLCAnIycsICckJywgJyUnLCAnJicsICcnJywgJyonLCAnKycsICctJyxcbi8vICcuJywgMC05LCBBLVosICdeJywgJ18nLCAnYCcsIGEteiwgJ3wnLCAnfidcbi8vXG4vLyB0b2tlbkNoYXJzWzMyXSA9PT0gMCAvLyAnICdcbi8vIHRva2VuQ2hhcnNbMzNdID09PSAxIC8vICchJ1xuLy8gdG9rZW5DaGFyc1szNF0gPT09IDAgLy8gJ1wiJ1xuLy8gLi4uXG4vL1xuY29uc3QgdG9rZW5DaGFycyA9IFtcbiAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gMCAtIDE1XG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDE2IC0gMzFcbiAgMCwgMSwgMCwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMSwgMSwgMCwgMSwgMSwgMCwgLy8gMzIgLSA0N1xuICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAvLyA0OCAtIDYzXG4gIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIC8vIDY0IC0gNzlcbiAgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMSwgMSwgLy8gODAgLSA5NVxuICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAvLyA5NiAtIDExMVxuICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAxLCAwLCAxLCAwIC8vIDExMiAtIDEyN1xuXTtcblxuLyoqXG4gKiBBZGRzIGFuIG9mZmVyIHRvIHRoZSBtYXAgb2YgZXh0ZW5zaW9uIG9mZmVycyBvciBhIHBhcmFtZXRlciB0byB0aGUgbWFwIG9mXG4gKiBwYXJhbWV0ZXJzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0IFRoZSBtYXAgb2YgZXh0ZW5zaW9uIG9mZmVycyBvciBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgZXh0ZW5zaW9uIG9yIHBhcmFtZXRlciBuYW1lXG4gKiBAcGFyYW0geyhPYmplY3R8Qm9vbGVhbnxTdHJpbmcpfSBlbGVtIFRoZSBleHRlbnNpb24gcGFyYW1ldGVycyBvciB0aGVcbiAqICAgICBwYXJhbWV0ZXIgdmFsdWVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHB1c2ggKGRlc3QsIG5hbWUsIGVsZW0pIHtcbiAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkZXN0LCBuYW1lKSkgZGVzdFtuYW1lXS5wdXNoKGVsZW0pO1xuICBlbHNlIGRlc3RbbmFtZV0gPSBbZWxlbV07XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zYCBoZWFkZXIgaW50byBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlciBUaGUgZmllbGQgdmFsdWUgb2YgdGhlIGhlYWRlclxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcGFyc2VkIG9iamVjdFxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBwYXJzZSAoaGVhZGVyKSB7XG4gIGNvbnN0IG9mZmVycyA9IHt9O1xuXG4gIGlmIChoZWFkZXIgPT09IHVuZGVmaW5lZCB8fCBoZWFkZXIgPT09ICcnKSByZXR1cm4gb2ZmZXJzO1xuXG4gIHZhciBwYXJhbXMgPSB7fTtcbiAgdmFyIG11c3RVbmVzY2FwZSA9IGZhbHNlO1xuICB2YXIgaXNFc2NhcGluZyA9IGZhbHNlO1xuICB2YXIgaW5RdW90ZXMgPSBmYWxzZTtcbiAgdmFyIGV4dGVuc2lvbk5hbWU7XG4gIHZhciBwYXJhbU5hbWU7XG4gIHZhciBzdGFydCA9IC0xO1xuICB2YXIgZW5kID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjb2RlID0gaGVhZGVyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICBpZiAoZXh0ZW5zaW9uTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyMC8qICcgJyAqL3x8IGNvZGUgPT09IDB4MDkvKiAnXFx0JyAqLykge1xuICAgICAgICBpZiAoZW5kID09PSAtMSAmJiBzdGFydCAhPT0gLTEpIGVuZCA9IGk7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4M2IvKiAnOycgKi8gfHwgY29kZSA9PT0gMHgyYy8qICcsJyAqLykge1xuICAgICAgICBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5kID09PSAtMSkgZW5kID0gaTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgICBwdXNoKG9mZmVycywgbmFtZSwgcGFyYW1zKTtcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleHRlbnNpb25OYW1lID0gbmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcmFtTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyMCB8fCBjb2RlID09PSAweDA5KSB7XG4gICAgICAgIGlmIChlbmQgPT09IC0xICYmIHN0YXJ0ICE9PSAtMSkgZW5kID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgzYiB8fCBjb2RlID09PSAweDJjKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmQgPT09IC0xKSBlbmQgPSBpO1xuICAgICAgICBwdXNoKHBhcmFtcywgaGVhZGVyLnNsaWNlKHN0YXJ0LCBlbmQpLCB0cnVlKTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgICBwdXNoKG9mZmVycywgZXh0ZW5zaW9uTmFtZSwgcGFyYW1zKTtcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcbiAgICAgICAgICBleHRlbnNpb25OYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnQgPSBlbmQgPSAtMTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgzZC8qICc9JyAqLyYmIHN0YXJ0ICE9PSAtMSAmJiBlbmQgPT09IC0xKSB7XG4gICAgICAgIHBhcmFtTmFtZSA9IGhlYWRlci5zbGljZShzdGFydCwgaSk7XG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9cbiAgICAgIC8vIFRoZSB2YWx1ZSBvZiBhIHF1b3RlZC1zdHJpbmcgYWZ0ZXIgdW5lc2NhcGluZyBtdXN0IGNvbmZvcm0gdG8gdGhlXG4gICAgICAvLyB0b2tlbiBBQk5GLCBzbyBvbmx5IHRva2VuIGNoYXJhY3RlcnMgYXJlIHZhbGlkLlxuICAgICAgLy8gUmVmOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjQ1NSNzZWN0aW9uLTkuMVxuICAgICAgLy9cbiAgICAgIGlmIChpc0VzY2FwaW5nKSB7XG4gICAgICAgIGlmICh0b2tlbkNoYXJzW2NvZGVdICE9PSAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgICBlbHNlIGlmICghbXVzdFVuZXNjYXBlKSBtdXN0VW5lc2NhcGUgPSB0cnVlO1xuICAgICAgICBpc0VzY2FwaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGluUXVvdGVzKSB7XG4gICAgICAgIGlmICh0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkgc3RhcnQgPSBpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4MjIvKiAnXCInICovICYmIHN0YXJ0ICE9PSAtMSkge1xuICAgICAgICAgIGluUXVvdGVzID0gZmFsc2U7XG4gICAgICAgICAgZW5kID0gaTtcbiAgICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDVjLyogJ1xcJyAqLykge1xuICAgICAgICAgIGlzRXNjYXBpbmcgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4MjIgJiYgaGVhZGVyLmNoYXJDb2RlQXQoaSAtIDEpID09PSAweDNkKSB7XG4gICAgICAgIGluUXVvdGVzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnQgIT09IC0xICYmIChjb2RlID09PSAweDIwIHx8IGNvZGUgPT09IDB4MDkpKSB7XG4gICAgICAgIGlmIChlbmQgPT09IC0xKSBlbmQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDNiIHx8IGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gICAgICAgIHZhciB2YWx1ZSA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgaWYgKG11c3RVbmVzY2FwZSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxcXC9nLCAnJyk7XG4gICAgICAgICAgbXVzdFVuZXNjYXBlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcHVzaChwYXJhbXMsIHBhcmFtTmFtZSwgdmFsdWUpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMHgyYykge1xuICAgICAgICAgIHB1c2gob2ZmZXJzLCBleHRlbnNpb25OYW1lLCBwYXJhbXMpO1xuICAgICAgICAgIHBhcmFtcyA9IHt9O1xuICAgICAgICAgIGV4dGVuc2lvbk5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJhbU5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc3RhcnQgPT09IC0xIHx8IGluUXVvdGVzKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dCcpO1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gIGNvbnN0IHRva2VuID0gaGVhZGVyLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICBpZiAoZXh0ZW5zaW9uTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcHVzaChvZmZlcnMsIHRva2VuLCB7fSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHBhcmFtTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBwdXNoKHBhcmFtcywgdG9rZW4sIHRydWUpO1xuICAgIH0gZWxzZSBpZiAobXVzdFVuZXNjYXBlKSB7XG4gICAgICBwdXNoKHBhcmFtcywgcGFyYW1OYW1lLCB0b2tlbi5yZXBsYWNlKC9cXFxcL2csICcnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2gocGFyYW1zLCBwYXJhbU5hbWUsIHRva2VuKTtcbiAgICB9XG4gICAgcHVzaChvZmZlcnMsIGV4dGVuc2lvbk5hbWUsIHBhcmFtcyk7XG4gIH1cblxuICByZXR1cm4gb2ZmZXJzO1xufVxuXG4vKipcbiAqIEJ1aWxkcyB0aGUgYFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9uc2AgaGVhZGVyIGZpZWxkIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbnNpb25zIFRoZSBtYXAgb2YgZXh0ZW5zaW9ucyBhbmQgcGFyYW1ldGVycyB0byBmb3JtYXRcbiAqIEByZXR1cm4ge1N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBnaXZlbiBvYmplY3RcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZm9ybWF0IChleHRlbnNpb25zKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhleHRlbnNpb25zKS5tYXAoKGV4dGVuc2lvbikgPT4ge1xuICAgIHZhciBjb25maWd1cmF0aW9ucyA9IGV4dGVuc2lvbnNbZXh0ZW5zaW9uXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29uZmlndXJhdGlvbnMpKSBjb25maWd1cmF0aW9ucyA9IFtjb25maWd1cmF0aW9uc107XG4gICAgcmV0dXJuIGNvbmZpZ3VyYXRpb25zLm1hcCgocGFyYW1zKSA9PiB7XG4gICAgICByZXR1cm4gW2V4dGVuc2lvbl0uY29uY2F0KE9iamVjdC5rZXlzKHBhcmFtcykubWFwKChrKSA9PiB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBwYXJhbXNba107XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB2YWx1ZXMgPSBbdmFsdWVzXTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5tYXAoKHYpID0+IHYgPT09IHRydWUgPyBrIDogYCR7a309JHt2fWApLmpvaW4oJzsgJyk7XG4gICAgICB9KSkuam9pbignOyAnKTtcbiAgICB9KS5qb2luKCcsICcpO1xuICB9KS5qb2luKCcsICcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgZm9ybWF0LCBwYXJzZSB9O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidXJsXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImh0dHBcIik7IiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKTtcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xuY29uc3QgdGxzID0gcmVxdWlyZSgndGxzJyk7XG5jb25zdCB1cmwgPSByZXF1aXJlKCd1cmwnKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3QgRXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2V2ZW50LXRhcmdldCcpO1xuY29uc3QgZXh0ZW5zaW9uID0gcmVxdWlyZSgnLi9leHRlbnNpb24nKTtcbmNvbnN0IGNvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCBSZWNlaXZlciA9IHJlcXVpcmUoJy4vcmVjZWl2ZXInKTtcbmNvbnN0IFNlbmRlciA9IHJlcXVpcmUoJy4vc2VuZGVyJyk7XG5cbmNvbnN0IHJlYWR5U3RhdGVzID0gWydDT05ORUNUSU5HJywgJ09QRU4nLCAnQ0xPU0lORycsICdDTE9TRUQnXTtcbmNvbnN0IGtXZWJTb2NrZXQgPSBjb25zdGFudHMua1dlYlNvY2tldDtcbmNvbnN0IHByb3RvY29sVmVyc2lvbnMgPSBbOCwgMTNdO1xuY29uc3QgY2xvc2VUaW1lb3V0ID0gMzAgKiAxMDAwOyAvLyBBbGxvdyAzMCBzZWNvbmRzIHRvIHRlcm1pbmF0ZSB0aGUgY29ubmVjdGlvbiBjbGVhbmx5LlxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIFdlYlNvY2tldC5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbiAqL1xuY2xhc3MgV2ViU29ja2V0IGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgV2ViU29ja2V0YC5cbiAgICpcbiAgICogQHBhcmFtIHsoU3RyaW5nfHVybC5Vcmx8dXJsLlVSTCl9IGFkZHJlc3MgVGhlIFVSTCB0byB3aGljaCB0byBjb25uZWN0XG4gICAqIEBwYXJhbSB7KFN0cmluZ3xTdHJpbmdbXSl9IHByb3RvY29scyBUaGUgc3VicHJvdG9jb2xzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENvbm5lY3Rpb24gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKGFkZHJlc3MsIHByb3RvY29scywgb3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ09OTkVDVElORztcbiAgICB0aGlzLnByb3RvY29sID0gJyc7XG5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gY29uc3RhbnRzLkJJTkFSWV9UWVBFU1swXTtcbiAgICB0aGlzLl9jbG9zZUZyYW1lUmVjZWl2ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9jbG9zZUZyYW1lU2VudCA9IGZhbHNlO1xuICAgIHRoaXMuX2Nsb3NlTWVzc2FnZSA9ICcnO1xuICAgIHRoaXMuX2Nsb3NlVGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2Nsb3NlQ29kZSA9IDEwMDY7XG4gICAgdGhpcy5fZXh0ZW5zaW9ucyA9IHt9O1xuICAgIHRoaXMuX2lzU2VydmVyID0gdHJ1ZTtcbiAgICB0aGlzLl9yZWNlaXZlciA9IG51bGw7XG4gICAgdGhpcy5fc2VuZGVyID0gbnVsbDtcbiAgICB0aGlzLl9zb2NrZXQgPSBudWxsO1xuXG4gICAgaWYgKGFkZHJlc3MgIT09IG51bGwpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3RvY29scykpIHtcbiAgICAgICAgcHJvdG9jb2xzID0gcHJvdG9jb2xzLmpvaW4oJywgJyk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcm90b2NvbHMgPT09ICdvYmplY3QnICYmIHByb3RvY29scyAhPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0gcHJvdG9jb2xzO1xuICAgICAgICBwcm90b2NvbHMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGluaXRBc0NsaWVudC5jYWxsKHRoaXMsIGFkZHJlc3MsIHByb3RvY29scywgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IENPTk5FQ1RJTkcgKCkgeyByZXR1cm4gV2ViU29ja2V0LkNPTk5FQ1RJTkc7IH1cbiAgZ2V0IENMT1NJTkcgKCkgeyByZXR1cm4gV2ViU29ja2V0LkNMT1NJTkc7IH1cbiAgZ2V0IENMT1NFRCAoKSB7IHJldHVybiBXZWJTb2NrZXQuQ0xPU0VEOyB9XG4gIGdldCBPUEVOICgpIHsgcmV0dXJuIFdlYlNvY2tldC5PUEVOOyB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZGV2aWF0ZXMgZnJvbSB0aGUgV0hBVFdHIGludGVyZmFjZSBzaW5jZSB3cyBkb2Vzbid0IHN1cHBvcnQgdGhlIHJlcXVpcmVkXG4gICAqIGRlZmF1bHQgXCJibG9iXCIgdHlwZSAoaW5zdGVhZCB3ZSBkZWZpbmUgYSBjdXN0b20gXCJub2RlYnVmZmVyXCIgdHlwZSkuXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgYmluYXJ5VHlwZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JpbmFyeVR5cGU7XG4gIH1cblxuICBzZXQgYmluYXJ5VHlwZSAodHlwZSkge1xuICAgIGlmIChjb25zdGFudHMuQklOQVJZX1RZUEVTLmluZGV4T2YodHlwZSkgPCAwKSByZXR1cm47XG5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gdHlwZTtcblxuICAgIC8vXG4gICAgLy8gQWxsb3cgdG8gY2hhbmdlIGBiaW5hcnlUeXBlYCBvbiB0aGUgZmx5LlxuICAgIC8vXG4gICAgaWYgKHRoaXMuX3JlY2VpdmVyKSB0aGlzLl9yZWNlaXZlci5fYmluYXJ5VHlwZSA9IHR5cGU7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBidWZmZXJlZEFtb3VudCAoKSB7XG4gICAgaWYgKCF0aGlzLl9zb2NrZXQpIHJldHVybiAwO1xuXG4gICAgLy9cbiAgICAvLyBgc29ja2V0LmJ1ZmZlclNpemVgIGlzIGB1bmRlZmluZWRgIGlmIHRoZSBzb2NrZXQgaXMgY2xvc2VkLlxuICAgIC8vXG4gICAgcmV0dXJuICh0aGlzLl9zb2NrZXQuYnVmZmVyU2l6ZSB8fCAwKSArIHRoaXMuX3NlbmRlci5fYnVmZmVyZWRCeXRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGV4dGVuc2lvbnMgKCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9leHRlbnNpb25zKS5qb2luKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIHRoZSBzb2NrZXQgYW5kIHRoZSBpbnRlcm5hbCByZXNvdXJjZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bmV0LlNvY2tldH0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZSBzZXJ2ZXIgYW5kIGNsaWVudFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGVhZCBUaGUgZmlyc3QgcGFja2V0IG9mIHRoZSB1cGdyYWRlZCBzdHJlYW1cbiAgICogQHBhcmFtIHtOdW1iZXJ9IG1heFBheWxvYWQgVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlIHNpemVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNldFNvY2tldCAoc29ja2V0LCBoZWFkLCBtYXhQYXlsb2FkKSB7XG4gICAgY29uc3QgcmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoXG4gICAgICB0aGlzLl9iaW5hcnlUeXBlLFxuICAgICAgdGhpcy5fZXh0ZW5zaW9ucyxcbiAgICAgIG1heFBheWxvYWRcbiAgICApO1xuXG4gICAgdGhpcy5fc2VuZGVyID0gbmV3IFNlbmRlcihzb2NrZXQsIHRoaXMuX2V4dGVuc2lvbnMpO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgdGhpcy5fc29ja2V0ID0gc29ja2V0O1xuXG4gICAgcmVjZWl2ZXJba1dlYlNvY2tldF0gPSB0aGlzO1xuICAgIHNvY2tldFtrV2ViU29ja2V0XSA9IHRoaXM7XG5cbiAgICByZWNlaXZlci5vbignY29uY2x1ZGUnLCByZWNlaXZlck9uQ29uY2x1ZGUpO1xuICAgIHJlY2VpdmVyLm9uKCdkcmFpbicsIHJlY2VpdmVyT25EcmFpbik7XG4gICAgcmVjZWl2ZXIub24oJ2Vycm9yJywgcmVjZWl2ZXJPbkVycm9yKTtcbiAgICByZWNlaXZlci5vbignbWVzc2FnZScsIHJlY2VpdmVyT25NZXNzYWdlKTtcbiAgICByZWNlaXZlci5vbigncGluZycsIHJlY2VpdmVyT25QaW5nKTtcbiAgICByZWNlaXZlci5vbigncG9uZycsIHJlY2VpdmVyT25Qb25nKTtcblxuICAgIHNvY2tldC5zZXRUaW1lb3V0KDApO1xuICAgIHNvY2tldC5zZXROb0RlbGF5KCk7XG5cbiAgICBpZiAoaGVhZC5sZW5ndGggPiAwKSBzb2NrZXQudW5zaGlmdChoZWFkKTtcblxuICAgIHNvY2tldC5vbignY2xvc2UnLCBzb2NrZXRPbkNsb3NlKTtcbiAgICBzb2NrZXQub24oJ2RhdGEnLCBzb2NrZXRPbkRhdGEpO1xuICAgIHNvY2tldC5vbignZW5kJywgc29ja2V0T25FbmQpO1xuICAgIHNvY2tldC5vbignZXJyb3InLCBzb2NrZXRPbkVycm9yKTtcblxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5PUEVOO1xuICAgIHRoaXMuZW1pdCgnb3BlbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtaXQgdGhlIGAnY2xvc2UnYCBldmVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVtaXRDbG9zZSAoKSB7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NFRDtcblxuICAgIGlmICghdGhpcy5fc29ja2V0KSB7XG4gICAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgdGhpcy5fY2xvc2VDb2RlLCB0aGlzLl9jbG9zZU1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICB0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdLmNsZWFudXAoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWNlaXZlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgdGhpcy5fY2xvc2VDb2RlLCB0aGlzLl9jbG9zZU1lc3NhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgY2xvc2luZyBoYW5kc2hha2UuXG4gICAqXG4gICAqICAgICAgICAgICstLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLStcbiAgICogICAgIC0gLSAtfHdzLmNsb3NlKCl8LS0+fGNsb3NlIGZyYW1lfC0tPnx3cy5jbG9zZSgpfC0gLSAtXG4gICAqICAgIHwgICAgICstLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLSsgICAgIHxcbiAgICogICAgICAgICAgKy0tLS0tLS0tLS0rICAgKy0tLS0tLS0tLS0tKyAgICAgICAgIHxcbiAgICogQ0xPU0lORyAgfHdzLmNsb3NlKCl8PC0tfGNsb3NlIGZyYW1lfDwtLSstLS0tLSsgICAgICAgQ0xPU0lOR1xuICAgKiAgICAgICAgICArLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLS0rICAgfFxuICAgKiAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgfCAgICstLS0rICAgICAgICB8XG4gICAqICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rLS0+fGZpbnwgLSAtIC0gLVxuICAgKiAgICB8ICAgICAgICAgKy0tLSsgICAgICAgICAgICAgICAgICAgICAgfCAgICstLS0rXG4gICAqICAgICAtIC0gLSAtIC18ZmlufDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gICAqICAgICAgICAgICAgICArLS0tK1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gY29kZSBTdGF0dXMgY29kZSBleHBsYWluaW5nIHdoeSB0aGUgY29ubmVjdGlvbiBpcyBjbG9zaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhIEEgc3RyaW5nIGV4cGxhaW5pbmcgd2h5IHRoZSBjb25uZWN0aW9uIGlzIGNsb3NpbmdcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xvc2UgKGNvZGUsIGRhdGEpIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEKSByZXR1cm47XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIGNvbnN0IG1zZyA9ICdXZWJTb2NrZXQgd2FzIGNsb3NlZCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkJztcbiAgICAgIHJldHVybiBhYm9ydEhhbmRzaGFrZSh0aGlzLCB0aGlzLl9yZXEsIG1zZyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NJTkcpIHtcbiAgICAgIGlmICh0aGlzLl9jbG9zZUZyYW1lU2VudCAmJiB0aGlzLl9jbG9zZUZyYW1lUmVjZWl2ZWQpIHRoaXMuX3NvY2tldC5lbmQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLl9zZW5kZXIuY2xvc2UoY29kZSwgZGF0YSwgIXRoaXMuX2lzU2VydmVyLCAoZXJyKSA9PiB7XG4gICAgICAvL1xuICAgICAgLy8gVGhpcyBlcnJvciBpcyBoYW5kbGVkIGJ5IHRoZSBgJ2Vycm9yJ2AgbGlzdGVuZXIgb24gdGhlIHNvY2tldC4gV2Ugb25seVxuICAgICAgLy8gd2FudCB0byBrbm93IGlmIHRoZSBjbG9zZSBmcmFtZSBoYXMgYmVlbiBzZW50IGhlcmUuXG4gICAgICAvL1xuICAgICAgaWYgKGVycikgcmV0dXJuO1xuXG4gICAgICB0aGlzLl9jbG9zZUZyYW1lU2VudCA9IHRydWU7XG5cbiAgICAgIGlmICh0aGlzLl9zb2NrZXQud3JpdGFibGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nsb3NlRnJhbWVSZWNlaXZlZCkgdGhpcy5fc29ja2V0LmVuZCgpO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjb25uZWN0aW9uIGlzIGNsb3NlZCBldmVuIGlmIHRoZSBjbG9zaW5nIGhhbmRzaGFrZVxuICAgICAgICAvLyBmYWlscy5cbiAgICAgICAgLy9cbiAgICAgICAgdGhpcy5fY2xvc2VUaW1lciA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgdGhpcy5fc29ja2V0LmRlc3Ryb3kuYmluZCh0aGlzLl9zb2NrZXQpLFxuICAgICAgICAgIGNsb3NlVGltZW91dFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBwaW5nLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIGRhdGEgdG8gc2VuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1hc2sgSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrIHdoaWNoIGlzIGV4ZWN1dGVkIHdoZW4gdGhlIHBpbmcgaXMgc2VudFxuICAgKiBAcHVibGljXG4gICAqL1xuICBwaW5nIChkYXRhLCBtYXNrLCBjYikge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBkYXRhO1xuICAgICAgZGF0YSA9IG1hc2sgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWFzayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBtYXNrO1xuICAgICAgbWFzayA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKFxuICAgICAgICBgV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlICR7dGhpcy5yZWFkeVN0YXRlfSBgICtcbiAgICAgICAgICBgKCR7cmVhZHlTdGF0ZXNbdGhpcy5yZWFkeVN0YXRlXX0pYFxuICAgICAgKTtcblxuICAgICAgaWYgKGNiKSByZXR1cm4gY2IoZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSBkYXRhID0gZGF0YS50b1N0cmluZygpO1xuICAgIGlmIChtYXNrID09PSB1bmRlZmluZWQpIG1hc2sgPSAhdGhpcy5faXNTZXJ2ZXI7XG4gICAgdGhpcy5fc2VuZGVyLnBpbmcoZGF0YSB8fCBjb25zdGFudHMuRU1QVFlfQlVGRkVSLCBtYXNrLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhIHBvbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgZGF0YSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBJbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2sgd2hpY2ggaXMgZXhlY3V0ZWQgd2hlbiB0aGUgcG9uZyBpcyBzZW50XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHBvbmcgKGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IGRhdGE7XG4gICAgICBkYXRhID0gbWFzayA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtYXNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IG1hc2s7XG4gICAgICBtYXNrID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXG4gICAgICAgIGBXZWJTb2NrZXQgaXMgbm90IG9wZW46IHJlYWR5U3RhdGUgJHt0aGlzLnJlYWR5U3RhdGV9IGAgK1xuICAgICAgICAgIGAoJHtyZWFkeVN0YXRlc1t0aGlzLnJlYWR5U3RhdGVdfSlgXG4gICAgICApO1xuXG4gICAgICBpZiAoY2IpIHJldHVybiBjYihlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XG4gICAgaWYgKG1hc2sgPT09IHVuZGVmaW5lZCkgbWFzayA9ICF0aGlzLl9pc1NlcnZlcjtcbiAgICB0aGlzLl9zZW5kZXIucG9uZyhkYXRhIHx8IGNvbnN0YW50cy5FTVBUWV9CVUZGRVIsIG1hc2ssIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgZGF0YSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuY29tcHJlc3MgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIGNvbXByZXNzIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuYmluYXJ5IFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBpcyBiaW5hcnkgb3IgdGV4dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuZmluIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBmcmFnbWVudCBpcyB0aGUgbGFzdCBvbmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLm1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrIHdoaWNoIGlzIGV4ZWN1dGVkIHdoZW4gZGF0YSBpcyB3cml0dGVuIG91dFxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZW5kIChkYXRhLCBvcHRpb25zLCBjYikge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2IgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXG4gICAgICAgIGBXZWJTb2NrZXQgaXMgbm90IG9wZW46IHJlYWR5U3RhdGUgJHt0aGlzLnJlYWR5U3RhdGV9IGAgK1xuICAgICAgICAgIGAoJHtyZWFkeVN0YXRlc1t0aGlzLnJlYWR5U3RhdGVdfSlgXG4gICAgICApO1xuXG4gICAgICBpZiAoY2IpIHJldHVybiBjYihlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XG5cbiAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBiaW5hcnk6IHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJyxcbiAgICAgIG1hc2s6ICF0aGlzLl9pc1NlcnZlcixcbiAgICAgIGNvbXByZXNzOiB0cnVlLFxuICAgICAgZmluOiB0cnVlXG4gICAgfSwgb3B0aW9ucyk7XG5cbiAgICBpZiAoIXRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICAgIG9wdHMuY29tcHJlc3MgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZW5kZXIuc2VuZChkYXRhIHx8IGNvbnN0YW50cy5FTVBUWV9CVUZGRVIsIG9wdHMsIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjaWJseSBjbG9zZSB0aGUgY29ubmVjdGlvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdGVybWluYXRlICgpIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEKSByZXR1cm47XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIGNvbnN0IG1zZyA9ICdXZWJTb2NrZXQgd2FzIGNsb3NlZCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkJztcbiAgICAgIHJldHVybiBhYm9ydEhhbmRzaGFrZSh0aGlzLCB0aGlzLl9yZXEsIG1zZyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3NvY2tldCkge1xuICAgICAgdGhpcy5yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG4gICAgICB0aGlzLl9zb2NrZXQuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufVxuXG5yZWFkeVN0YXRlcy5mb3JFYWNoKChyZWFkeVN0YXRlLCBpKSA9PiB7XG4gIFdlYlNvY2tldFtyZWFkeVN0YXRlc1tpXV0gPSBpO1xufSk7XG5cbi8vXG4vLyBBZGQgdGhlIGBvbm9wZW5gLCBgb25lcnJvcmAsIGBvbmNsb3NlYCwgYW5kIGBvbm1lc3NhZ2VgIGF0dHJpYnV0ZXMuXG4vLyBTZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY29tbXMuaHRtbCN0aGUtd2Vic29ja2V0LWludGVyZmFjZVxuLy9cblsnb3BlbicsICdlcnJvcicsICdjbG9zZScsICdtZXNzYWdlJ10uZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCBgb24ke21ldGhvZH1gLCB7XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsaXN0ZW5lciBvZiB0aGUgZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHsoRnVuY3Rpb258dW5kZWZpbmVkKX0gVGhlIGV2ZW50IGxpc3RlbmVyIG9yIGB1bmRlZmluZWRgXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCAoKSB7XG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycyhtZXRob2QpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS5fbGlzdGVuZXIpIHJldHVybiBsaXN0ZW5lcnNbaV0uX2xpc3RlbmVyO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQWRkIGEgbGlzdGVuZXIgZm9yIHRoZSBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBhZGRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0IChsaXN0ZW5lcikge1xuICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMobWV0aG9kKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIFJlbW92ZSBvbmx5IHRoZSBsaXN0ZW5lcnMgYWRkZWQgdmlhIGBhZGRFdmVudExpc3RlbmVyYC5cbiAgICAgICAgLy9cbiAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS5fbGlzdGVuZXIpIHRoaXMucmVtb3ZlTGlzdGVuZXIobWV0aG9kLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgfVxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG1ldGhvZCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuV2ViU29ja2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gRXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcjtcbldlYlNvY2tldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0O1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBXZWJTb2NrZXQgY2xpZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3x1cmwuVXJsfHVybC5VUkwpfSBhZGRyZXNzIFRoZSBVUkwgdG8gd2hpY2ggdG8gY29ubmVjdFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3RvY29scyBUaGUgc3VicHJvdG9jb2xzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25uZWN0aW9uIG9wdGlvbnNcbiAqIEBwYXJhbSB7KEJvb2xlYW58T2JqZWN0KX0gb3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSBFbmFibGUvZGlzYWJsZSBwZXJtZXNzYWdlLWRlZmxhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmhhbmRzaGFrZVRpbWVvdXQgVGltZW91dCBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSBoYW5kc2hha2UgcmVxdWVzdFxuICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMucHJvdG9jb2xWZXJzaW9uIFZhbHVlIG9mIHRoZSBgU2VjLVdlYlNvY2tldC1WZXJzaW9uYCBoZWFkZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLm9yaWdpbiBWYWx1ZSBvZiB0aGUgYE9yaWdpbmAgb3IgYFNlYy1XZWJTb2NrZXQtT3JpZ2luYCBoZWFkZXJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGluaXRBc0NsaWVudCAoYWRkcmVzcywgcHJvdG9jb2xzLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBwcm90b2NvbFZlcnNpb246IHByb3RvY29sVmVyc2lvbnNbMV0sXG4gICAgcGVyTWVzc2FnZURlZmxhdGU6IHRydWVcbiAgfSwgb3B0aW9ucywge1xuICAgIGNyZWF0ZUNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICBzb2NrZXRQYXRoOiB1bmRlZmluZWQsXG4gICAgaG9zdG5hbWU6IHVuZGVmaW5lZCxcbiAgICBwcm90b2NvbDogdW5kZWZpbmVkLFxuICAgIHRpbWVvdXQ6IHVuZGVmaW5lZCxcbiAgICBtZXRob2Q6IHVuZGVmaW5lZCxcbiAgICBhdXRoOiB1bmRlZmluZWQsXG4gICAgaG9zdDogdW5kZWZpbmVkLFxuICAgIHBhdGg6IHVuZGVmaW5lZCxcbiAgICBwb3J0OiB1bmRlZmluZWRcbiAgfSk7XG5cbiAgaWYgKHByb3RvY29sVmVyc2lvbnMuaW5kZXhPZihvcHRpb25zLnByb3RvY29sVmVyc2lvbikgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXG4gICAgICBgVW5zdXBwb3J0ZWQgcHJvdG9jb2wgdmVyc2lvbjogJHtvcHRpb25zLnByb3RvY29sVmVyc2lvbn0gYCArXG4gICAgICAgIGAoc3VwcG9ydGVkIHZlcnNpb25zOiAke3Byb3RvY29sVmVyc2lvbnMuam9pbignLCAnKX0pYFxuICAgICk7XG4gIH1cblxuICB0aGlzLl9pc1NlcnZlciA9IGZhbHNlO1xuXG4gIHZhciBwYXJzZWRVcmw7XG5cbiAgaWYgKHR5cGVvZiBhZGRyZXNzID09PSAnb2JqZWN0JyAmJiBhZGRyZXNzLmhyZWYgIT09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlZFVybCA9IGFkZHJlc3M7XG4gICAgdGhpcy51cmwgPSBhZGRyZXNzLmhyZWY7XG4gIH0gZWxzZSB7XG4gICAgcGFyc2VkVXJsID0gdXJsLnBhcnNlKGFkZHJlc3MpO1xuICAgIHRoaXMudXJsID0gYWRkcmVzcztcbiAgfVxuXG4gIGNvbnN0IGlzVW5peFNvY2tldCA9IHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ3dzK3VuaXg6JztcblxuICBpZiAoIXBhcnNlZFVybC5ob3N0ICYmICghaXNVbml4U29ja2V0IHx8ICFwYXJzZWRVcmwucGF0aG5hbWUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFVSTDogJHt0aGlzLnVybH1gKTtcbiAgfVxuXG4gIGNvbnN0IGlzU2VjdXJlID0gcGFyc2VkVXJsLnByb3RvY29sID09PSAnd3NzOicgfHwgcGFyc2VkVXJsLnByb3RvY29sID09PSAnaHR0cHM6JztcbiAgY29uc3Qga2V5ID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIGNvbnN0IGh0dHBPYmogPSBpc1NlY3VyZSA/IGh0dHBzIDogaHR0cDtcbiAgY29uc3QgcGF0aCA9IHBhcnNlZFVybC5zZWFyY2hcbiAgICA/IGAke3BhcnNlZFVybC5wYXRobmFtZSB8fCAnLyd9JHtwYXJzZWRVcmwuc2VhcmNofWBcbiAgICA6IHBhcnNlZFVybC5wYXRobmFtZSB8fCAnLyc7XG4gIHZhciBwZXJNZXNzYWdlRGVmbGF0ZTtcblxuICBvcHRpb25zLmNyZWF0ZUNvbm5lY3Rpb24gPSBpc1NlY3VyZSA/IHRsc0Nvbm5lY3QgOiBuZXRDb25uZWN0O1xuICBvcHRpb25zLnBvcnQgPSBwYXJzZWRVcmwucG9ydCB8fCAoaXNTZWN1cmUgPyA0NDMgOiA4MCk7XG4gIG9wdGlvbnMuaG9zdCA9IHBhcnNlZFVybC5ob3N0bmFtZS5zdGFydHNXaXRoKCdbJylcbiAgICA/IHBhcnNlZFVybC5ob3N0bmFtZS5zbGljZSgxLCAtMSlcbiAgICA6IHBhcnNlZFVybC5ob3N0bmFtZTtcbiAgb3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgJ1NlYy1XZWJTb2NrZXQtVmVyc2lvbic6IG9wdGlvbnMucHJvdG9jb2xWZXJzaW9uLFxuICAgICdTZWMtV2ViU29ja2V0LUtleSc6IGtleSxcbiAgICAnQ29ubmVjdGlvbic6ICdVcGdyYWRlJyxcbiAgICAnVXBncmFkZSc6ICd3ZWJzb2NrZXQnXG4gIH0sIG9wdGlvbnMuaGVhZGVycyk7XG4gIG9wdGlvbnMucGF0aCA9IHBhdGg7XG5cbiAgaWYgKG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUpIHtcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZSA9IG5ldyBQZXJNZXNzYWdlRGVmbGF0ZShcbiAgICAgIG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgIT09IHRydWUgPyBvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlIDoge30sXG4gICAgICBmYWxzZVxuICAgICk7XG4gICAgb3B0aW9ucy5oZWFkZXJzWydTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMnXSA9IGV4dGVuc2lvbi5mb3JtYXQoe1xuICAgICAgW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdOiBwZXJNZXNzYWdlRGVmbGF0ZS5vZmZlcigpXG4gICAgfSk7XG4gIH1cbiAgaWYgKHByb3RvY29scykge1xuICAgIG9wdGlvbnMuaGVhZGVyc1snU2VjLVdlYlNvY2tldC1Qcm90b2NvbCddID0gcHJvdG9jb2xzO1xuICB9XG4gIGlmIChvcHRpb25zLm9yaWdpbikge1xuICAgIGlmIChvcHRpb25zLnByb3RvY29sVmVyc2lvbiA8IDEzKSB7XG4gICAgICBvcHRpb25zLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtT3JpZ2luJ10gPSBvcHRpb25zLm9yaWdpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucy5oZWFkZXJzLk9yaWdpbiA9IG9wdGlvbnMub3JpZ2luO1xuICAgIH1cbiAgfVxuICBpZiAocGFyc2VkVXJsLmF1dGgpIHtcbiAgICBvcHRpb25zLmF1dGggPSBwYXJzZWRVcmwuYXV0aDtcbiAgfSBlbHNlIGlmIChwYXJzZWRVcmwudXNlcm5hbWUgfHwgcGFyc2VkVXJsLnBhc3N3b3JkKSB7XG4gICAgb3B0aW9ucy5hdXRoID0gYCR7cGFyc2VkVXJsLnVzZXJuYW1lfToke3BhcnNlZFVybC5wYXNzd29yZH1gO1xuICB9XG5cbiAgaWYgKGlzVW5peFNvY2tldCkge1xuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnOicpO1xuXG4gICAgaWYgKG9wdGlvbnMuYWdlbnQgPT0gbnVsbCAmJiBwcm9jZXNzLnZlcnNpb25zLm1vZHVsZXMgPCA1Nykge1xuICAgICAgLy9cbiAgICAgIC8vIFNldHRpbmcgYHNvY2tldFBhdGhgIGluIGNvbmp1bmN0aW9uIHdpdGggYGNyZWF0ZUNvbm5lY3Rpb25gIHdpdGhvdXQgYW5cbiAgICAgIC8vIGFnZW50IHRocm93cyBhbiBlcnJvciBvbiBOb2RlLmpzIDwgOC4gV29yayBhcm91bmQgdGhlIGlzc3VlIGJ5IHVzaW5nIGFcbiAgICAgIC8vIGRpZmZlcmVudCBwcm9wZXJ0eS5cbiAgICAgIC8vXG4gICAgICBvcHRpb25zLl9zb2NrZXRQYXRoID0gcGFydHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMuc29ja2V0UGF0aCA9IHBhcnRzWzBdO1xuICAgIH1cblxuICAgIG9wdGlvbnMucGF0aCA9IHBhcnRzWzFdO1xuICB9XG5cbiAgdmFyIHJlcSA9IHRoaXMuX3JlcSA9IGh0dHBPYmouZ2V0KG9wdGlvbnMpO1xuXG4gIGlmIChvcHRpb25zLmhhbmRzaGFrZVRpbWVvdXQpIHtcbiAgICByZXEuc2V0VGltZW91dChcbiAgICAgIG9wdGlvbnMuaGFuZHNoYWtlVGltZW91dCxcbiAgICAgICgpID0+IGFib3J0SGFuZHNoYWtlKHRoaXMsIHJlcSwgJ09wZW5pbmcgaGFuZHNoYWtlIGhhcyB0aW1lZCBvdXQnKVxuICAgICk7XG4gIH1cblxuICByZXEub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgIGlmICh0aGlzLl9yZXEuYWJvcnRlZCkgcmV0dXJuO1xuXG4gICAgcmVxID0gdGhpcy5fcmVxID0gbnVsbDtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICB0aGlzLmVtaXRDbG9zZSgpO1xuICB9KTtcblxuICByZXEub24oJ3Jlc3BvbnNlJywgKHJlcykgPT4ge1xuICAgIGlmICh0aGlzLmVtaXQoJ3VuZXhwZWN0ZWQtcmVzcG9uc2UnLCByZXEsIHJlcykpIHJldHVybjtcblxuICAgIGFib3J0SGFuZHNoYWtlKHRoaXMsIHJlcSwgYFVuZXhwZWN0ZWQgc2VydmVyIHJlc3BvbnNlOiAke3Jlcy5zdGF0dXNDb2RlfWApO1xuICB9KTtcblxuICByZXEub24oJ3VwZ3JhZGUnLCAocmVzLCBzb2NrZXQsIGhlYWQpID0+IHtcbiAgICB0aGlzLmVtaXQoJ3VwZ3JhZGUnLCByZXMpO1xuXG4gICAgLy9cbiAgICAvLyBUaGUgdXNlciBtYXkgaGF2ZSBjbG9zZWQgdGhlIGNvbm5lY3Rpb24gZnJvbSBhIGxpc3RlbmVyIG9mIHRoZSBgdXBncmFkZWBcbiAgICAvLyBldmVudC5cbiAgICAvL1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSByZXR1cm47XG5cbiAgICByZXEgPSB0aGlzLl9yZXEgPSBudWxsO1xuXG4gICAgY29uc3QgZGlnZXN0ID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTEnKVxuICAgICAgLnVwZGF0ZShrZXkgKyBjb25zdGFudHMuR1VJRCwgJ2JpbmFyeScpXG4gICAgICAuZGlnZXN0KCdiYXNlNjQnKTtcblxuICAgIGlmIChyZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1hY2NlcHQnXSAhPT0gZGlnZXN0KSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZSh0aGlzLCBzb2NrZXQsICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtQWNjZXB0IGhlYWRlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcnZlclByb3QgPSByZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddO1xuICAgIGNvbnN0IHByb3RMaXN0ID0gKHByb3RvY29scyB8fCAnJykuc3BsaXQoLywgKi8pO1xuICAgIHZhciBwcm90RXJyb3I7XG5cbiAgICBpZiAoIXByb3RvY29scyAmJiBzZXJ2ZXJQcm90KSB7XG4gICAgICBwcm90RXJyb3IgPSAnU2VydmVyIHNlbnQgYSBzdWJwcm90b2NvbCBidXQgbm9uZSB3YXMgcmVxdWVzdGVkJztcbiAgICB9IGVsc2UgaWYgKHByb3RvY29scyAmJiAhc2VydmVyUHJvdCkge1xuICAgICAgcHJvdEVycm9yID0gJ1NlcnZlciBzZW50IG5vIHN1YnByb3RvY29sJztcbiAgICB9IGVsc2UgaWYgKHNlcnZlclByb3QgJiYgcHJvdExpc3QuaW5kZXhPZihzZXJ2ZXJQcm90KSA9PT0gLTEpIHtcbiAgICAgIHByb3RFcnJvciA9ICdTZXJ2ZXIgc2VudCBhbiBpbnZhbGlkIHN1YnByb3RvY29sJztcbiAgICB9XG5cbiAgICBpZiAocHJvdEVycm9yKSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZSh0aGlzLCBzb2NrZXQsIHByb3RFcnJvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNlcnZlclByb3QpIHRoaXMucHJvdG9jb2wgPSBzZXJ2ZXJQcm90O1xuXG4gICAgaWYgKHBlck1lc3NhZ2VEZWZsYXRlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleHRlbnNpb25zID0gZXh0ZW5zaW9uLnBhcnNlKFxuICAgICAgICAgIHJlcy5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWV4dGVuc2lvbnMnXVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChleHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICAgICAgcGVyTWVzc2FnZURlZmxhdGUuYWNjZXB0KFxuICAgICAgICAgICAgZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5fZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSA9IHBlck1lc3NhZ2VEZWZsYXRlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgYWJvcnRIYW5kc2hha2UodGhpcywgc29ja2V0LCAnSW52YWxpZCBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMgaGVhZGVyJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldFNvY2tldChzb2NrZXQsIGhlYWQsIDApO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBgbmV0LlNvY2tldGAgYW5kIGluaXRpYXRlIGEgY29ubmVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25uZWN0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm4ge25ldC5Tb2NrZXR9IFRoZSBuZXdseSBjcmVhdGVkIHNvY2tldCB1c2VkIHRvIHN0YXJ0IHRoZSBjb25uZWN0aW9uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBuZXRDb25uZWN0IChvcHRpb25zKSB7XG4gIG9wdGlvbnMucGF0aCA9IG9wdGlvbnMuc29ja2V0UGF0aCB8fCBvcHRpb25zLl9zb2NrZXRQYXRoIHx8IHVuZGVmaW5lZDtcbiAgcmV0dXJuIG5ldC5jb25uZWN0KG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGB0bHMuVExTU29ja2V0YCBhbmQgaW5pdGlhdGUgYSBjb25uZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENvbm5lY3Rpb24gb3B0aW9uc1xuICogQHJldHVybiB7dGxzLlRMU1NvY2tldH0gVGhlIG5ld2x5IGNyZWF0ZWQgc29ja2V0IHVzZWQgdG8gc3RhcnQgdGhlIGNvbm5lY3Rpb25cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRsc0Nvbm5lY3QgKG9wdGlvbnMpIHtcbiAgb3B0aW9ucy5wYXRoID0gb3B0aW9ucy5zb2NrZXRQYXRoIHx8IG9wdGlvbnMuX3NvY2tldFBhdGggfHwgdW5kZWZpbmVkO1xuICBvcHRpb25zLnNlcnZlcm5hbWUgPSBvcHRpb25zLnNlcnZlcm5hbWUgfHwgb3B0aW9ucy5ob3N0O1xuICByZXR1cm4gdGxzLmNvbm5lY3Qob3B0aW9ucyk7XG59XG5cbi8qKlxuICogQWJvcnQgdGhlIGhhbmRzaGFrZSBhbmQgZW1pdCBhbiBlcnJvci5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldH0gd2Vic29ja2V0IFRoZSBXZWJTb2NrZXQgaW5zdGFuY2VcbiAqIEBwYXJhbSB7KGh0dHAuQ2xpZW50UmVxdWVzdHxuZXQuU29ja2V0KX0gc3RyZWFtIFRoZSByZXF1ZXN0IHRvIGFib3J0IG9yIHRoZVxuICogICAgIHNvY2tldCB0byBkZXN0cm95XG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWJvcnRIYW5kc2hha2UgKHdlYnNvY2tldCwgc3RyZWFtLCBtZXNzYWdlKSB7XG4gIHdlYnNvY2tldC5yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG5cbiAgY29uc3QgZXJyID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlcnIsIGFib3J0SGFuZHNoYWtlKTtcblxuICBpZiAoc3RyZWFtLnNldEhlYWRlcikge1xuICAgIHN0cmVhbS5hYm9ydCgpO1xuICAgIHN0cmVhbS5vbmNlKCdhYm9ydCcsIHdlYnNvY2tldC5lbWl0Q2xvc2UuYmluZCh3ZWJzb2NrZXQpKTtcbiAgICB3ZWJzb2NrZXQuZW1pdCgnZXJyb3InLCBlcnIpO1xuICB9IGVsc2Uge1xuICAgIHN0cmVhbS5kZXN0cm95KGVycik7XG4gICAgc3RyZWFtLm9uY2UoJ2Vycm9yJywgd2Vic29ja2V0LmVtaXQuYmluZCh3ZWJzb2NrZXQsICdlcnJvcicpKTtcbiAgICBzdHJlYW0ub25jZSgnY2xvc2UnLCB3ZWJzb2NrZXQuZW1pdENsb3NlLmJpbmQod2Vic29ja2V0KSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdjb25jbHVkZSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBzdGF0dXMgY29kZVxuICogQHBhcmFtIHtTdHJpbmd9IHJlYXNvbiBUaGUgcmVhc29uIGZvciBjbG9zaW5nXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uQ29uY2x1ZGUgKGNvZGUsIHJlYXNvbikge1xuICBjb25zdCB3ZWJzb2NrZXQgPSB0aGlzW2tXZWJTb2NrZXRdO1xuXG4gIHdlYnNvY2tldC5fc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgc29ja2V0T25EYXRhKTtcbiAgd2Vic29ja2V0Ll9zb2NrZXQucmVzdW1lKCk7XG5cbiAgd2Vic29ja2V0Ll9jbG9zZUZyYW1lUmVjZWl2ZWQgPSB0cnVlO1xuICB3ZWJzb2NrZXQuX2Nsb3NlTWVzc2FnZSA9IHJlYXNvbjtcbiAgd2Vic29ja2V0Ll9jbG9zZUNvZGUgPSBjb2RlO1xuXG4gIGlmIChjb2RlID09PSAxMDA1KSB3ZWJzb2NrZXQuY2xvc2UoKTtcbiAgZWxzZSB3ZWJzb2NrZXQuY2xvc2UoY29kZSwgcmVhc29uKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdkcmFpbidgIGV2ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25EcmFpbiAoKSB7XG4gIHRoaXNba1dlYlNvY2tldF0uX3NvY2tldC5yZXN1bWUoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdlcnJvcidgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFJhbmdlRXJyb3J8RXJyb3IpfSBlcnIgVGhlIGVtaXR0ZWQgZXJyb3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25FcnJvciAoZXJyKSB7XG4gIGNvbnN0IHdlYnNvY2tldCA9IHRoaXNba1dlYlNvY2tldF07XG5cbiAgd2Vic29ja2V0LnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgd2Vic29ja2V0Ll9jbG9zZUNvZGUgPSBlcnJbY29uc3RhbnRzLmtTdGF0dXNDb2RlXTtcbiAgd2Vic29ja2V0LmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgd2Vic29ja2V0Ll9zb2NrZXQuZGVzdHJveSgpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYFJlY2VpdmVyYCBgJ2ZpbmlzaCdgIGV2ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlY2VpdmVyT25GaW5pc2ggKCkge1xuICB0aGlzW2tXZWJTb2NrZXRdLmVtaXRDbG9zZSgpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYFJlY2VpdmVyYCBgJ21lc3NhZ2UnYCBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8QnVmZmVyfEFycmF5QnVmZmVyfEJ1ZmZlcltdKX0gZGF0YSBUaGUgbWVzc2FnZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPbk1lc3NhZ2UgKGRhdGEpIHtcbiAgdGhpc1trV2ViU29ja2V0XS5lbWl0KCdtZXNzYWdlJywgZGF0YSk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAncGluZydgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIFRoZSBkYXRhIGluY2x1ZGVkIGluIHRoZSBwaW5nIGZyYW1lXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uUGluZyAoZGF0YSkge1xuICBjb25zdCB3ZWJzb2NrZXQgPSB0aGlzW2tXZWJTb2NrZXRdO1xuXG4gIHdlYnNvY2tldC5wb25nKGRhdGEsICF3ZWJzb2NrZXQuX2lzU2VydmVyLCBjb25zdGFudHMuTk9PUCk7XG4gIHdlYnNvY2tldC5lbWl0KCdwaW5nJywgZGF0YSk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAncG9uZydgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIFRoZSBkYXRhIGluY2x1ZGVkIGluIHRoZSBwb25nIGZyYW1lXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uUG9uZyAoZGF0YSkge1xuICB0aGlzW2tXZWJTb2NrZXRdLmVtaXQoJ3BvbmcnLCBkYXRhKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBuZXQuU29ja2V0YCBgJ2Nsb3NlJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25DbG9zZSAoKSB7XG4gIGNvbnN0IHdlYnNvY2tldCA9IHRoaXNba1dlYlNvY2tldF07XG5cbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBzb2NrZXRPbkNsb3NlKTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIHNvY2tldE9uRGF0YSk7XG4gIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIHNvY2tldE9uRW5kKTtcbiAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcblxuICB3ZWJzb2NrZXQucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuXG4gIC8vXG4gIC8vIFRoZSBjbG9zZSBmcmFtZSBtaWdodCBub3QgaGF2ZSBiZWVuIHJlY2VpdmVkIG9yIHRoZSBgJ2VuZCdgIGV2ZW50IGVtaXR0ZWQsXG4gIC8vIGZvciBleGFtcGxlLCBpZiB0aGUgc29ja2V0IHdhcyBkZXN0cm95ZWQgZHVlIHRvIGFuIGVycm9yLiBFbnN1cmUgdGhhdCB0aGVcbiAgLy8gYHJlY2VpdmVyYCBzdHJlYW0gaXMgY2xvc2VkIGFmdGVyIHdyaXRpbmcgYW55IHJlbWFpbmluZyBidWZmZXJlZCBkYXRhIHRvXG4gIC8vIGl0LlxuICAvL1xuICB3ZWJzb2NrZXQuX3NvY2tldC5yZWFkKCk7XG4gIHdlYnNvY2tldC5fcmVjZWl2ZXIuZW5kKCk7XG5cbiAgY2xlYXJUaW1lb3V0KHdlYnNvY2tldC5fY2xvc2VUaW1lcik7XG5cbiAgaWYgKFxuICAgIHdlYnNvY2tldC5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQgfHxcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZFxuICApIHtcbiAgICB3ZWJzb2NrZXQuZW1pdENsb3NlKCk7XG4gIH0gZWxzZSB7XG4gICAgd2Vic29ja2V0Ll9yZWNlaXZlci5vbignZXJyb3InLCByZWNlaXZlck9uRmluaXNoKTtcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLm9uKCdmaW5pc2gnLCByZWNlaXZlck9uRmluaXNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYG5ldC5Tb2NrZXRgIGAnZGF0YSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBBIGNodW5rIG9mIGRhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNvY2tldE9uRGF0YSAoY2h1bmspIHtcbiAgaWYgKCF0aGlzW2tXZWJTb2NrZXRdLl9yZWNlaXZlci53cml0ZShjaHVuaykpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBuZXQuU29ja2V0YCBgJ2VuZCdgIGV2ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNvY2tldE9uRW5kICgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB3ZWJzb2NrZXQucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuICB3ZWJzb2NrZXQuX3JlY2VpdmVyLmVuZCgpO1xuICB0aGlzLmVuZCgpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYG5ldC5Tb2NrZXRgIGAnZXJyb3InYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzb2NrZXRPbkVycm9yICgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuICB0aGlzLm9uKCdlcnJvcicsIGNvbnN0YW50cy5OT09QKTtcblxuICBpZiAod2Vic29ja2V0KSB7XG4gICAgd2Vic29ja2V0LnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKTtcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IHVybCA9IHJlcXVpcmUoJ3VybCcpO1xuXG5jb25zdCBQZXJNZXNzYWdlRGVmbGF0ZSA9IHJlcXVpcmUoJy4vcGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBleHRlbnNpb24gPSByZXF1aXJlKCcuL2V4dGVuc2lvbicpO1xuY29uc3QgY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcbmNvbnN0IFdlYlNvY2tldCA9IHJlcXVpcmUoJy4vd2Vic29ja2V0Jyk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgV2ViU29ja2V0IHNlcnZlci5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbiAqL1xuY2xhc3MgV2ViU29ja2V0U2VydmVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIGBXZWJTb2NrZXRTZXJ2ZXJgIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuaG9zdCBUaGUgaG9zdG5hbWUgd2hlcmUgdG8gYmluZCB0aGUgc2VydmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnBvcnQgVGhlIHBvcnQgd2hlcmUgdG8gYmluZCB0aGUgc2VydmVyXG4gICAqIEBwYXJhbSB7aHR0cC5TZXJ2ZXJ9IG9wdGlvbnMuc2VydmVyIEEgcHJlLWNyZWF0ZWQgSFRUUC9TIHNlcnZlciB0byB1c2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy52ZXJpZnlDbGllbnQgQW4gaG9vayB0byByZWplY3QgY29ubmVjdGlvbnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5oYW5kbGVQcm90b2NvbHMgQW4gaG9vayB0byBoYW5kbGUgcHJvdG9jb2xzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnBhdGggQWNjZXB0IG9ubHkgY29ubmVjdGlvbnMgbWF0Y2hpbmcgdGhpcyBwYXRoXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5ub1NlcnZlciBFbmFibGUgbm8gc2VydmVyIG1vZGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmNsaWVudFRyYWNraW5nIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byB0cmFjayBjbGllbnRzXG4gICAqIEBwYXJhbSB7KEJvb2xlYW58T2JqZWN0KX0gb3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSBFbmFibGUvZGlzYWJsZSBwZXJtZXNzYWdlLWRlZmxhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMubWF4UGF5bG9hZCBUaGUgbWF4aW11bSBhbGxvd2VkIG1lc3NhZ2Ugc2l6ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBBIGxpc3RlbmVyIGZvciB0aGUgYGxpc3RlbmluZ2AgZXZlbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKCk7XG5cbiAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBtYXhQYXlsb2FkOiAxMDAgKiAxMDI0ICogMTAyNCxcbiAgICAgIHBlck1lc3NhZ2VEZWZsYXRlOiBmYWxzZSxcbiAgICAgIGhhbmRsZVByb3RvY29sczogbnVsbCxcbiAgICAgIGNsaWVudFRyYWNraW5nOiB0cnVlLFxuICAgICAgdmVyaWZ5Q2xpZW50OiBudWxsLFxuICAgICAgbm9TZXJ2ZXI6IGZhbHNlLFxuICAgICAgYmFja2xvZzogbnVsbCwgLy8gdXNlIGRlZmF1bHQgKDUxMSBhcyBpbXBsZW1lbnRlZCBpbiBuZXQuanMpXG4gICAgICBzZXJ2ZXI6IG51bGwsXG4gICAgICBob3N0OiBudWxsLFxuICAgICAgcGF0aDogbnVsbCxcbiAgICAgIHBvcnQ6IG51bGxcbiAgICB9LCBvcHRpb25zKTtcblxuICAgIGlmIChvcHRpb25zLnBvcnQgPT0gbnVsbCAmJiAhb3B0aW9ucy5zZXJ2ZXIgJiYgIW9wdGlvbnMubm9TZXJ2ZXIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdPbmUgb2YgdGhlIFwicG9ydFwiLCBcInNlcnZlclwiLCBvciBcIm5vU2VydmVyXCIgb3B0aW9ucyBtdXN0IGJlIHNwZWNpZmllZCdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucG9ydCAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9zZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcigocmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3QgYm9keSA9IGh0dHAuU1RBVFVTX0NPREVTWzQyNl07XG5cbiAgICAgICAgcmVzLndyaXRlSGVhZCg0MjYsIHtcbiAgICAgICAgICAnQ29udGVudC1MZW5ndGgnOiBib2R5Lmxlbmd0aCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nXG4gICAgICAgIH0pO1xuICAgICAgICByZXMuZW5kKGJvZHkpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9zZXJ2ZXIubGlzdGVuKG9wdGlvbnMucG9ydCwgb3B0aW9ucy5ob3N0LCBvcHRpb25zLmJhY2tsb2csIGNhbGxiYWNrKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuc2VydmVyKSB7XG4gICAgICB0aGlzLl9zZXJ2ZXIgPSBvcHRpb25zLnNlcnZlcjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2VydmVyKSB7XG4gICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMgPSBhZGRMaXN0ZW5lcnModGhpcy5fc2VydmVyLCB7XG4gICAgICAgIGxpc3RlbmluZzogdGhpcy5lbWl0LmJpbmQodGhpcywgJ2xpc3RlbmluZycpLFxuICAgICAgICBlcnJvcjogdGhpcy5lbWl0LmJpbmQodGhpcywgJ2Vycm9yJyksXG4gICAgICAgIHVwZ3JhZGU6IChyZXEsIHNvY2tldCwgaGVhZCkgPT4ge1xuICAgICAgICAgIHRoaXMuaGFuZGxlVXBncmFkZShyZXEsIHNvY2tldCwgaGVhZCwgKHdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb24nLCB3cywgcmVxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgPT09IHRydWUpIG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgPSB7fTtcbiAgICBpZiAob3B0aW9ucy5jbGllbnRUcmFja2luZykgdGhpcy5jbGllbnRzID0gbmV3IFNldCgpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYm91bmQgYWRkcmVzcywgdGhlIGFkZHJlc3MgZmFtaWx5IG5hbWUsIGFuZCBwb3J0IG9mIHRoZSBzZXJ2ZXJcbiAgICogYXMgcmVwb3J0ZWQgYnkgdGhlIG9wZXJhdGluZyBzeXN0ZW0gaWYgbGlzdGVuaW5nIG9uIGFuIElQIHNvY2tldC5cbiAgICogSWYgdGhlIHNlcnZlciBpcyBsaXN0ZW5pbmcgb24gYSBwaXBlIG9yIFVOSVggZG9tYWluIHNvY2tldCwgdGhlIG5hbWUgaXNcbiAgICogcmV0dXJuZWQgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIEByZXR1cm4geyhPYmplY3R8U3RyaW5nfG51bGwpfSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VydmVyXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZHJlc3MgKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMubm9TZXJ2ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNlcnZlciBpcyBvcGVyYXRpbmcgaW4gXCJub1NlcnZlclwiIG1vZGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3NlcnZlcikgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuX3NlcnZlci5hZGRyZXNzKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2UgdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xvc2UgKGNiKSB7XG4gICAgLy9cbiAgICAvLyBUZXJtaW5hdGUgYWxsIGFzc29jaWF0ZWQgY2xpZW50cy5cbiAgICAvL1xuICAgIGlmICh0aGlzLmNsaWVudHMpIHtcbiAgICAgIGZvciAoY29uc3QgY2xpZW50IG9mIHRoaXMuY2xpZW50cykgY2xpZW50LnRlcm1pbmF0ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcnZlciA9IHRoaXMuX3NlcnZlcjtcblxuICAgIGlmIChzZXJ2ZXIpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycygpO1xuICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzID0gdGhpcy5fc2VydmVyID0gbnVsbDtcblxuICAgICAgLy9cbiAgICAgIC8vIENsb3NlIHRoZSBodHRwIHNlcnZlciBpZiBpdCB3YXMgaW50ZXJuYWxseSBjcmVhdGVkLlxuICAgICAgLy9cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucG9ydCAhPSBudWxsKSByZXR1cm4gc2VydmVyLmNsb3NlKGNiKTtcbiAgICB9XG5cbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VlIGlmIGEgZ2l2ZW4gcmVxdWVzdCBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGlzIHNlcnZlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtodHRwLkluY29taW5nTWVzc2FnZX0gcmVxIFJlcXVlc3Qgb2JqZWN0IHRvIGluc3BlY3RcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSByZXF1ZXN0IGlzIHZhbGlkLCBlbHNlIGBmYWxzZWBcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2hvdWxkSGFuZGxlIChyZXEpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnBhdGggJiYgdXJsLnBhcnNlKHJlcS51cmwpLnBhdGhuYW1lICE9PSB0aGlzLm9wdGlvbnMucGF0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBhIEhUVFAgVXBncmFkZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge2h0dHAuSW5jb21pbmdNZXNzYWdlfSByZXEgVGhlIHJlcXVlc3Qgb2JqZWN0XG4gICAqIEBwYXJhbSB7bmV0LlNvY2tldH0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZSBzZXJ2ZXIgYW5kIGNsaWVudFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGVhZCBUaGUgZmlyc3QgcGFja2V0IG9mIHRoZSB1cGdyYWRlZCBzdHJlYW1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaGFuZGxlVXBncmFkZSAocmVxLCBzb2NrZXQsIGhlYWQsIGNiKSB7XG4gICAgc29ja2V0Lm9uKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuXG4gICAgY29uc3QgdmVyc2lvbiA9ICtyZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC12ZXJzaW9uJ107XG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IHt9O1xuXG4gICAgaWYgKFxuICAgICAgcmVxLm1ldGhvZCAhPT0gJ0dFVCcgfHwgcmVxLmhlYWRlcnMudXBncmFkZS50b0xvd2VyQ2FzZSgpICE9PSAnd2Vic29ja2V0JyB8fFxuICAgICAgIXJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWtleSddIHx8ICh2ZXJzaW9uICE9PSA4ICYmIHZlcnNpb24gIT09IDEzKSB8fFxuICAgICAgIXRoaXMuc2hvdWxkSGFuZGxlKHJlcSlcbiAgICApIHtcbiAgICAgIHJldHVybiBhYm9ydEhhbmRzaGFrZShzb2NrZXQsIDQwMCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSkge1xuICAgICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSBuZXcgUGVyTWVzc2FnZURlZmxhdGUoXG4gICAgICAgIHRoaXMub3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdGhpcy5vcHRpb25zLm1heFBheWxvYWRcbiAgICAgICk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9mZmVycyA9IGV4dGVuc2lvbi5wYXJzZShcbiAgICAgICAgICByZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1leHRlbnNpb25zJ11cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAob2ZmZXJzW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICAgICAgcGVyTWVzc2FnZURlZmxhdGUuYWNjZXB0KG9mZmVyc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSk7XG4gICAgICAgICAgZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSA9IHBlck1lc3NhZ2VEZWZsYXRlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgNDAwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIE9wdGlvbmFsbHkgY2FsbCBleHRlcm5hbCBjbGllbnQgdmVyaWZpY2F0aW9uIGhhbmRsZXIuXG4gICAgLy9cbiAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudCkge1xuICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgb3JpZ2luOiByZXEuaGVhZGVyc1tgJHt2ZXJzaW9uID09PSA4ID8gJ3NlYy13ZWJzb2NrZXQtb3JpZ2luJyA6ICdvcmlnaW4nfWBdLFxuICAgICAgICBzZWN1cmU6ICEhKHJlcS5jb25uZWN0aW9uLmF1dGhvcml6ZWQgfHwgcmVxLmNvbm5lY3Rpb24uZW5jcnlwdGVkKSxcbiAgICAgICAgcmVxXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudChpbmZvLCAodmVyaWZpZWQsIGNvZGUsIG1lc3NhZ2UsIGhlYWRlcnMpID0+IHtcbiAgICAgICAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gYWJvcnRIYW5kc2hha2Uoc29ja2V0LCBjb2RlIHx8IDQwMSwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5jb21wbGV0ZVVwZ3JhZGUoZXh0ZW5zaW9ucywgcmVxLCBzb2NrZXQsIGhlYWQsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudmVyaWZ5Q2xpZW50KGluZm8pKSByZXR1cm4gYWJvcnRIYW5kc2hha2Uoc29ja2V0LCA0MDEpO1xuICAgIH1cblxuICAgIHRoaXMuY29tcGxldGVVcGdyYWRlKGV4dGVuc2lvbnMsIHJlcSwgc29ja2V0LCBoZWFkLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogVXBncmFkZSB0aGUgY29ubmVjdGlvbiB0byBXZWJTb2NrZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbnNpb25zIFRoZSBhY2NlcHRlZCBleHRlbnNpb25zXG4gICAqIEBwYXJhbSB7aHR0cC5JbmNvbWluZ01lc3NhZ2V9IHJlcSBUaGUgcmVxdWVzdCBvYmplY3RcbiAgICogQHBhcmFtIHtuZXQuU29ja2V0fSBzb2NrZXQgVGhlIG5ldHdvcmsgc29ja2V0IGJldHdlZW4gdGhlIHNlcnZlciBhbmQgY2xpZW50XG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoZWFkIFRoZSBmaXJzdCBwYWNrZXQgb2YgdGhlIHVwZ3JhZGVkIHN0cmVhbVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29tcGxldGVVcGdyYWRlIChleHRlbnNpb25zLCByZXEsIHNvY2tldCwgaGVhZCwgY2IpIHtcbiAgICAvL1xuICAgIC8vIERlc3Ryb3kgdGhlIHNvY2tldCBpZiB0aGUgY2xpZW50IGhhcyBhbHJlYWR5IHNlbnQgYSBGSU4gcGFja2V0LlxuICAgIC8vXG4gICAgaWYgKCFzb2NrZXQucmVhZGFibGUgfHwgIXNvY2tldC53cml0YWJsZSkgcmV0dXJuIHNvY2tldC5kZXN0cm95KCk7XG5cbiAgICBjb25zdCBrZXkgPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMScpXG4gICAgICAudXBkYXRlKHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWtleSddICsgY29uc3RhbnRzLkdVSUQsICdiaW5hcnknKVxuICAgICAgLmRpZ2VzdCgnYmFzZTY0Jyk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gW1xuICAgICAgJ0hUVFAvMS4xIDEwMSBTd2l0Y2hpbmcgUHJvdG9jb2xzJyxcbiAgICAgICdVcGdyYWRlOiB3ZWJzb2NrZXQnLFxuICAgICAgJ0Nvbm5lY3Rpb246IFVwZ3JhZGUnLFxuICAgICAgYFNlYy1XZWJTb2NrZXQtQWNjZXB0OiAke2tleX1gXG4gICAgXTtcblxuICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldChudWxsKTtcbiAgICB2YXIgcHJvdG9jb2wgPSByZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddO1xuXG4gICAgaWYgKHByb3RvY29sKSB7XG4gICAgICBwcm90b2NvbCA9IHByb3RvY29sLnRyaW0oKS5zcGxpdCgvICosICovKTtcblxuICAgICAgLy9cbiAgICAgIC8vIE9wdGlvbmFsbHkgY2FsbCBleHRlcm5hbCBwcm90b2NvbCBzZWxlY3Rpb24gaGFuZGxlci5cbiAgICAgIC8vXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhhbmRsZVByb3RvY29scykge1xuICAgICAgICBwcm90b2NvbCA9IHRoaXMub3B0aW9ucy5oYW5kbGVQcm90b2NvbHMocHJvdG9jb2wsIHJlcSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm90b2NvbCA9IHByb3RvY29sWzBdO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvdG9jb2wpIHtcbiAgICAgICAgaGVhZGVycy5wdXNoKGBTZWMtV2ViU29ja2V0LVByb3RvY29sOiAke3Byb3RvY29sfWApO1xuICAgICAgICB3cy5wcm90b2NvbCA9IHByb3RvY29sO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChleHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBleHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdLnBhcmFtcztcbiAgICAgIGNvbnN0IHZhbHVlID0gZXh0ZW5zaW9uLmZvcm1hdCh7XG4gICAgICAgIFtQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXTogW3BhcmFtc11cbiAgICAgIH0pO1xuICAgICAgaGVhZGVycy5wdXNoKGBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnM6ICR7dmFsdWV9YCk7XG4gICAgICB3cy5fZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBBbGxvdyBleHRlcm5hbCBtb2RpZmljYXRpb24vaW5zcGVjdGlvbiBvZiBoYW5kc2hha2UgaGVhZGVycy5cbiAgICAvL1xuICAgIHRoaXMuZW1pdCgnaGVhZGVycycsIGhlYWRlcnMsIHJlcSk7XG5cbiAgICBzb2NrZXQud3JpdGUoaGVhZGVycy5jb25jYXQoJ1xcclxcbicpLmpvaW4oJ1xcclxcbicpKTtcbiAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgc29ja2V0T25FcnJvcik7XG5cbiAgICB3cy5zZXRTb2NrZXQoc29ja2V0LCBoZWFkLCB0aGlzLm9wdGlvbnMubWF4UGF5bG9hZCk7XG5cbiAgICBpZiAodGhpcy5jbGllbnRzKSB7XG4gICAgICB0aGlzLmNsaWVudHMuYWRkKHdzKTtcbiAgICAgIHdzLm9uKCdjbG9zZScsICgpID0+IHRoaXMuY2xpZW50cy5kZWxldGUod3MpKTtcbiAgICB9XG5cbiAgICBjYih3cyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXRTZXJ2ZXI7XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVycyBvbiBhbiBgRXZlbnRFbWl0dGVyYCB1c2luZyBhIG1hcCBvZiA8ZXZlbnQsIGxpc3RlbmVyPlxuICogcGFpcnMuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IHNlcnZlciBUaGUgZXZlbnQgZW1pdHRlclxuICogQHBhcmFtIHtPYmplY3QuPFN0cmluZywgRnVuY3Rpb24+fSBtYXAgVGhlIGxpc3RlbmVycyB0byBhZGRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGFkZGVkIGxpc3RlbmVycyB3aGVuIGNhbGxlZFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkTGlzdGVuZXJzIChzZXJ2ZXIsIG1hcCkge1xuICBmb3IgKGNvbnN0IGV2ZW50IG9mIE9iamVjdC5rZXlzKG1hcCkpIHNlcnZlci5vbihldmVudCwgbWFwW2V2ZW50XSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycyAoKSB7XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBPYmplY3Qua2V5cyhtYXApKSB7XG4gICAgICBzZXJ2ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIG1hcFtldmVudF0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBIYW5kbGUgcHJlbWF0dXJlIHNvY2tldCBlcnJvcnMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25FcnJvciAoKSB7XG4gIHRoaXMuZGVzdHJveSgpO1xufVxuXG4vKipcbiAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHdoZW4gcHJlY29uZGl0aW9ucyBhcmUgbm90IGZ1bGZpbGxlZC5cbiAqXG4gKiBAcGFyYW0ge25ldC5Tb2NrZXR9IHNvY2tldCBUaGUgc29ja2V0IG9mIHRoZSB1cGdyYWRlIHJlcXVlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gW21lc3NhZ2VdIFRoZSBIVFRQIHJlc3BvbnNlIGJvZHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbaGVhZGVyc10gQWRkaXRpb25hbCBIVFRQIHJlc3BvbnNlIGhlYWRlcnNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFib3J0SGFuZHNoYWtlIChzb2NrZXQsIGNvZGUsIG1lc3NhZ2UsIGhlYWRlcnMpIHtcbiAgaWYgKHNvY2tldC53cml0YWJsZSkge1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8IGh0dHAuU1RBVFVTX0NPREVTW2NvZGVdO1xuICAgIGhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICdDb25uZWN0aW9uJzogJ2Nsb3NlJyxcbiAgICAgICdDb250ZW50LXR5cGUnOiAndGV4dC9odG1sJyxcbiAgICAgICdDb250ZW50LUxlbmd0aCc6IEJ1ZmZlci5ieXRlTGVuZ3RoKG1lc3NhZ2UpXG4gICAgfSwgaGVhZGVycyk7XG5cbiAgICBzb2NrZXQud3JpdGUoXG4gICAgICBgSFRUUC8xLjEgJHtjb2RlfSAke2h0dHAuU1RBVFVTX0NPREVTW2NvZGVdfVxcclxcbmAgK1xuICAgICAgT2JqZWN0LmtleXMoaGVhZGVycykubWFwKGggPT4gYCR7aH06ICR7aGVhZGVyc1toXX1gKS5qb2luKCdcXHJcXG4nKSArXG4gICAgICAnXFxyXFxuXFxyXFxuJyArXG4gICAgICBtZXNzYWdlXG4gICAgKTtcbiAgfVxuXG4gIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBzb2NrZXRPbkVycm9yKTtcbiAgc29ja2V0LmRlc3Ryb3koKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInN0cmVhbVwiKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIGV2ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEV2ZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgRXZlbnRgLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBBIHJlZmVyZW5jZSB0byB0aGUgdGFyZ2V0IHRvIHdoaWNoIHRoZSBldmVudCB3YXMgZGlzcGF0Y2hlZFxuICAgKi9cbiAgY29uc3RydWN0b3IgKHR5cGUsIHRhcmdldCkge1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBtZXNzYWdlIGV2ZW50LlxuICpcbiAqIEBleHRlbmRzIEV2ZW50XG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBNZXNzYWdlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYE1lc3NhZ2VFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7KFN0cmluZ3xCdWZmZXJ8QXJyYXlCdWZmZXJ8QnVmZmVyW10pfSBkYXRhIFRoZSByZWNlaXZlZCBkYXRhXG4gICAqIEBwYXJhbSB7V2ViU29ja2V0fSB0YXJnZXQgQSByZWZlcmVuY2UgdG8gdGhlIHRhcmdldCB0byB3aGljaCB0aGUgZXZlbnQgd2FzIGRpc3BhdGNoZWRcbiAgICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCB0YXJnZXQpIHtcbiAgICBzdXBlcignbWVzc2FnZScsIHRhcmdldCk7XG5cbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG59XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2UgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIENsb3NlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYENsb3NlRXZlbnRgLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgc3RhdHVzIGNvZGUgZXhwbGFpbmluZyB3aHkgdGhlIGNvbm5lY3Rpb24gaXMgYmVpbmcgY2xvc2VkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWFzb24gQSBodW1hbi1yZWFkYWJsZSBzdHJpbmcgZXhwbGFpbmluZyB3aHkgdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2luZ1xuICAgKiBAcGFyYW0ge1dlYlNvY2tldH0gdGFyZ2V0IEEgcmVmZXJlbmNlIHRvIHRoZSB0YXJnZXQgdG8gd2hpY2ggdGhlIGV2ZW50IHdhcyBkaXNwYXRjaGVkXG4gICAqL1xuICBjb25zdHJ1Y3RvciAoY29kZSwgcmVhc29uLCB0YXJnZXQpIHtcbiAgICBzdXBlcignY2xvc2UnLCB0YXJnZXQpO1xuXG4gICAgdGhpcy53YXNDbGVhbiA9IHRhcmdldC5fY2xvc2VGcmFtZVJlY2VpdmVkICYmIHRhcmdldC5fY2xvc2VGcmFtZVNlbnQ7XG4gICAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiBvcGVuIGV2ZW50LlxuICpcbiAqIEBleHRlbmRzIEV2ZW50XG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBPcGVuRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYE9wZW5FdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7V2ViU29ja2V0fSB0YXJnZXQgQSByZWZlcmVuY2UgdG8gdGhlIHRhcmdldCB0byB3aGljaCB0aGUgZXZlbnQgd2FzIGRpc3BhdGNoZWRcbiAgICovXG4gIGNvbnN0cnVjdG9yICh0YXJnZXQpIHtcbiAgICBzdXBlcignb3BlbicsIHRhcmdldCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gZXJyb3IgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEVycm9yRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYEVycm9yRXZlbnRgLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZXJyb3IgVGhlIGVycm9yIHRoYXQgZ2VuZXJhdGVkIHRoaXMgZXZlbnRcbiAgICogQHBhcmFtIHtXZWJTb2NrZXR9IHRhcmdldCBBIHJlZmVyZW5jZSB0byB0aGUgdGFyZ2V0IHRvIHdoaWNoIHRoZSBldmVudCB3YXMgZGlzcGF0Y2hlZFxuICAgKi9cbiAgY29uc3RydWN0b3IgKGVycm9yLCB0YXJnZXQpIHtcbiAgICBzdXBlcignZXJyb3InLCB0YXJnZXQpO1xuXG4gICAgdGhpcy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGVtdWxhdGluZyB0aGUgYEV2ZW50VGFyZ2V0YCBpbnRlcmZhY2UuIEl0J3Mgbm90XG4gKiBtZWFudCB0byBiZSB1c2VkIGRpcmVjdGx5LlxuICpcbiAqIEBtaXhpblxuICovXG5jb25zdCBFdmVudFRhcmdldCA9IHtcbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGFuIGV2ZW50IGxpc3RlbmVyLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXZlbnQgdHlwZSB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBhZGRcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lciAobWV0aG9kLCBsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHJldHVybjtcblxuICAgIGZ1bmN0aW9uIG9uTWVzc2FnZSAoZGF0YSkge1xuICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBuZXcgTWVzc2FnZUV2ZW50KGRhdGEsIHRoaXMpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkNsb3NlIChjb2RlLCBtZXNzYWdlKSB7XG4gICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIG5ldyBDbG9zZUV2ZW50KGNvZGUsIG1lc3NhZ2UsIHRoaXMpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkVycm9yIChlcnJvcikge1xuICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBuZXcgRXJyb3JFdmVudChlcnJvciwgdGhpcykpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uT3BlbiAoKSB7XG4gICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIG5ldyBPcGVuRXZlbnQodGhpcykpO1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09ICdtZXNzYWdlJykge1xuICAgICAgb25NZXNzYWdlLl9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgdGhpcy5vbihtZXRob2QsIG9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdjbG9zZScpIHtcbiAgICAgIG9uQ2xvc2UuX2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgICB0aGlzLm9uKG1ldGhvZCwgb25DbG9zZSk7XG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdlcnJvcicpIHtcbiAgICAgIG9uRXJyb3IuX2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgICB0aGlzLm9uKG1ldGhvZCwgb25FcnJvcik7XG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdvcGVuJykge1xuICAgICAgb25PcGVuLl9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgdGhpcy5vbihtZXRob2QsIG9uT3Blbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub24obWV0aG9kLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2QgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBldmVudCB0eXBlIHRvIHJlbW92ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gcmVtb3ZlXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIgKG1ldGhvZCwgbGlzdGVuZXIpIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycyhtZXRob2QpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RlbmVyc1tpXS5fbGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIobWV0aG9kLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFRhcmdldDtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInpsaWJcIik7IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBRdWV1ZShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBRdWV1ZSkpIHtcbiAgICByZXR1cm4gbmV3IFF1ZXVlKG9wdGlvbnMpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMuY29uY3VycmVuY3kgPSBvcHRpb25zLmNvbmN1cnJlbmN5IHx8IEluZmluaXR5O1xuICB0aGlzLnBlbmRpbmcgPSAwO1xuICB0aGlzLmpvYnMgPSBbXTtcbiAgdGhpcy5jYnMgPSBbXTtcbiAgdGhpcy5fZG9uZSA9IGRvbmUuYmluZCh0aGlzKTtcbn1cblxudmFyIGFycmF5QWRkTWV0aG9kcyA9IFtcbiAgJ3B1c2gnLFxuICAndW5zaGlmdCcsXG4gICdzcGxpY2UnXG5dO1xuXG5hcnJheUFkZE1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgUXVldWUucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWV0aG9kUmVzdWx0ID0gQXJyYXkucHJvdG90eXBlW21ldGhvZF0uYXBwbHkodGhpcy5qb2JzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuX3J1bigpO1xuICAgIHJldHVybiBtZXRob2RSZXN1bHQ7XG4gIH07XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXVlLnByb3RvdHlwZSwgJ2xlbmd0aCcsIHtcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wZW5kaW5nICsgdGhpcy5qb2JzLmxlbmd0aDtcbiAgfVxufSk7XG5cblF1ZXVlLnByb3RvdHlwZS5fcnVuID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLnBlbmRpbmcgPT09IHRoaXMuY29uY3VycmVuY3kpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHRoaXMuam9icy5sZW5ndGgpIHtcbiAgICB2YXIgam9iID0gdGhpcy5qb2JzLnNoaWZ0KCk7XG4gICAgdGhpcy5wZW5kaW5nKys7XG4gICAgam9iKHRoaXMuX2RvbmUpO1xuICAgIHRoaXMuX3J1bigpO1xuICB9XG5cbiAgaWYgKHRoaXMucGVuZGluZyA9PT0gMCkge1xuICAgIHdoaWxlICh0aGlzLmNicy5sZW5ndGggIT09IDApIHtcbiAgICAgIHZhciBjYiA9IHRoaXMuY2JzLnBvcCgpO1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhjYik7XG4gICAgfVxuICB9XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUub25Eb25lID0gZnVuY3Rpb24oY2IpIHtcbiAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuY2JzLnB1c2goY2IpO1xuICAgIHRoaXMuX3J1bigpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBkb25lKCkge1xuICB0aGlzLnBlbmRpbmctLTtcbiAgdGhpcy5fcnVuKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUXVldWU7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ0bHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibmV0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImh0dHBzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImRncmFtXCIpOyIsImNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuY29uc3QgZGdyYW0gPSByZXF1aXJlKCdkZ3JhbScpO1xuY29uc3QgV2ViU29ja2V0ID0gcmVxdWlyZSgnd3MnKTtcblxuY2xhc3MgVENvbW0gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMud3NTZXJ2ZXIgPSBudWxsO1xuXHRcdHRoaXMud3NQb3J0ID0gOTU4MTtcblx0XHR0aGlzLndzQ2xpZW50ID0gbnVsbDtcblx0fVxuXG5cdHN0YXJ0V1NTZXJ2ZXIocG9ydCA9IHRoaXMud3NQb3J0KSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFdlYlNvY2tldCA9IHJlcXVpcmUoJ3dzJyk7XG5cdFx0XHRsZXQgc2VydmVyO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRzZXJ2ZXIgPSBuZXcgV2ViU29ja2V0LlNlcnZlcih7cG9ydH0sICgpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnW1RBVUNPTU1dIFdlYlNvY2tldCBzZXJ2ZXIgc3RhcnRlZCcpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdH1cblxuXHRcdFx0c2VydmVyLm9uKCdsaXN0ZW5pbmcnLCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMud3NTZXJ2ZXIgPSBzZXJ2ZXI7XG5cdFx0XHRcdHJlc29sdmUodGhpcyk7XG5cdFx0XHR9KTtcblxuXHRcdFx0c2VydmVyLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdbVEFVQ09NTV0gZXJyb3InLCBlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdFx0c2VydmVyLm9uKCdjb25uZWN0aW9uJywgKHdzKSA9PiB7XG5cdFx0XHRcdHdzLm9uKCdtZXNzYWdlJywgKGRhdGEpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnW1RBVUNPTU1dIGdvdCBtZXNzYWdlJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKG1zZy5ldmVudCwgbXNnLmRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tUQVVDT01NXSBzZW5kIG9rJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbVEFVQ09NTV0gc2VuZCBlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHN0YXJ0KGFzQ2xpZW50ID0gZmFsc2UpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0aWYgKGFzQ2xpZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgV2ViU29ja2V0ID0gcmVxdWlyZSgnd3MnKTtcblx0XHRcdFx0bGV0IGNsaWVudDtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjbGllbnQgPSBuZXcgV2ViU29ja2V0KCd3czovL2xvY2FsaG9zdDonICsgdGhpcy53c1BvcnQpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNsaWVudC5vbignb3BlbicsICgpID0+IHtcblx0XHRcdFx0XHRyZXNvbHZlKHRoaXMpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y2xpZW50Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tUQVVDT01NXSBlcnJvcicsIGVycm9yKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNsaWVudC5vbignbWVzc2FnZScsIChkYXRhKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgbXNnID0gSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCd1dGY4JykpO1xuXHRcdFx0XHRcdHRoaXMuZW1taXQobXNnLmV2ZW50LCBtc2cpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy53c0NsaWVudCA9IGNsaWVudDtcblx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFdTU2VydmVyKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHRjb21tKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHNlbmQoZXZlbnQsIGRhdGEpIHtcblx0XHRjb25zdCBtc2cgPSBKU09OLnN0cmluZ2lmeSh7ZXZlbnQsIGRhdGF9KTtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMud3NDbGllbnQpIHtcblx0XHRcdFx0dGhpcy53c0NsaWVudC5zZW5kKG1zZywgKGVycikgPT4ge1xuXHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHRoaXMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBjYWxsYmFja3MgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLndzU2VydmVyLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZW5kKG1zZywgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoY2FsbGJhY2tzKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVENvbW07XG4iXSwic291cmNlUm9vdCI6IiJ9